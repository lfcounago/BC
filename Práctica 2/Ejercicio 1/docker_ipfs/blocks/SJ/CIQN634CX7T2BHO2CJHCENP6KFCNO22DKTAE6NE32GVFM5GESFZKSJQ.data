tch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"===typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(K(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=u.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))o+t.length>r.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,o){if(K(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(i,s),l=this.slice(r,o),c=e.slice(t,n);for(let u=0;u<a;++u)if(l[u]!==c[u]){i=l[u],s=c[u];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return A(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function I(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function _(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function O(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let i=t;i<n;++i)o+=J[e[i]];return o}function N(e,t,n){const r=e.slice(t,n);let o="";for(let i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,o){$(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function R(e,t,n,r,o){$(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function L(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return t=+t,n>>>=0,i||L(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,i){return t=+t,n>>>=0,i||L(e,0,n,8),o.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,e,t,n,r-1,-r)}let o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,e,t,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{const i=u.isBuffer(e)?e:u.from(e,r),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%s]}return this};const U={};function j(e,t,n){U[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function $(e,t,n,r,o,i){if(e>n||e<t){const r="bigint"===typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new U.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||V(t,e.length-(n+1))}(r,o,i)}function H(e,t){if("number"!==typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new U.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=z(String(n)):"bigint"===typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=z(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function Z(e,t){let n;t=t||1/0;const r=e.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function q(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!==e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function X(e){return"undefined"===typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},97394:(e,t,n)=>{var r=n(98059),o=n(17870);e.exports=function(e,t,n){var i=o(e,t);return n||(i=i.replace(/ (?=\d)/g,"_")),i.replace(/ (.)/g,(function(e,n){return r(n,t)}))}},69497:(e,t,n)=>{t.no=t.noCase=n(17870),t.dot=t.dotCase=n(7142),t.swap=t.swapCase=n(68241),t.path=t.pathCase=n(15102),t.upper=t.upperCase=n(98059),t.lower=t.lowerCase=n(60463),t.camel=t.camelCase=n(97394),t.snake=t.snakeCase=n(42956),t.title=t.titleCase=n(27220),t.param=t.paramCase=n(22910),t.kebab=t.kebabCase=t.paramCase,t.hyphen=t.hyphenCase=t.paramCase,t.header=t.headerCase=n(39895),t.pascal=t.pascalCase=n(87265),t.constant=t.constantCase=n(23998),t.sentence=t.sentenceCase=n(93884),t.isUpper=t.isUpperCase=n(49355),t.isLower=t.isLowerCase=n(14456),t.ucFirst=t.upperCaseFirst=n(32996),t.lcFirst=t.lowerCaseFirst=n(16386)},81694:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var s=o.apply(null,n);s&&e.push(s)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},23998:(e,t,n)=>{var r=n(98059),o=n(42956);e.exports=function(e,t){return r(o(e,t),t)}},52354:(e,t,n)=>{async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{raw:!1};const n=e=>{if(r.didShowInfo)return;if("EncodingError"!==e.name)return;r.didShowInfo=!0;const t=`${e.name} occured within datatransfer-files-promise module\nError message: "${e.message}"\nTry serving html over http if currently you are running it from the filesystem.`;console.warn(t)},o=(e,t)=>new Promise(((r,o)=>{e.readEntries((async e=>{let n=[];for(let r of e){const e=await i(r,t);n=n.concat(e)}r(n)}),(e=>{n(e),o(e)}))})),i=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.isFile){const o=await function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise(((o,i)=>{e.file((e=>{t.raw||(e.filepath=r+e.name),o(e)}),(e=>{n(e),i(e)}))}))}(e,r);return[o]}if(e.isDirectory){const t=await(async(e,t)=>{const n=e.createReader(),r=t+e.name+"/";let i,s=[];do{i=await o(n,r),s=s.concat(i)}while(i.length>0);return s})(e,r);return t}};let s=[],a=[];for(let r=0,u=e.length;r<u;r++)a.push(e[r].webkitGetAsEntry());for(let r of a){const e=await i(r);s=s.concat(e)}return s}e=n.nmd(e),globalThis.window&&globalThis===globalThis.window&&(globalThis.getFilesFromDataTransferItems=r),e&&e.exports&&(e.exports.getFilesFromDataTransferItems=r)},49948:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function o(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function s(e,t){try{return t in e}catch(n){return!1}}function a(e,t,n){var o={};return n.isMergeableObject(e)&&i(e).forEach((function(t){o[t]=r(e[t],n)})),i(t).forEach((function(i){(function(e,t){return s(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(s(e,i)&&n.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return u;var n=t.customMerge(e);return"function"===typeof n?n:u}(i,n)(e[i],t[i],n):o[i]=r(t[i],n))})),o}function u(e,n,i){(i=i||{}).arrayMerge=i.arrayMerge||o,i.isMergeableObject=i.isMergeableObject||t,i.cloneUnlessOtherwiseSpecified=r;var s=Array.isArray(n);return s===Array.isArray(e)?s?i.arrayMerge(e,n,i):a(e,n,i):r(n,i)}u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return u(e,n,t)}),{})};var l=u;e.exports=l},61713:function(e,t,n){var r,o;void 0===(o="function"===typeof(r=function(){var e="details",t="summary";function n(e){if("summary"===e.target.nodeName.toLowerCase()){var t=e.target.parentNode;if(!t)return;t.getAttribute("open")?(t.open=!1,t.removeAttribute("open")):(t.open=!0,t.setAttribute("open","open"))}}function r(){var n=document.createElement(e);if(!("open"in n))return!1;n.innerHTML="<"+t+">a</"+t+">b",document.body.appendChild(n);var r=n.offsetHeight;n.open=!0;var o=r!=n.offsetHeight;return document.body.removeChild(n),o}function o(e,t){if(!document.getElementById(e)){var n=document.createElement("style");n.id=e,n.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(n)}}r()||(document.documentElement.className+=" no-details",window.addEventListener("click",n),o("details-polyfill-style","html.no-details "+e+" { display: block; }\nhtml.no-details "+e+":not([open]) > :not("+t+") { display: none; }\nhtml.no-details "+e+" > "+t+':before { content: "\u25b6"; display: inline-block; font-size: .8em; width: 1.5em; }\nhtml.no-details '+e+"[open] > "+t+':before { content: "\u25bc"; }'))})?r.call(t,n,t,e):r)||(e.exports=o)},97357:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=!("undefined"===typeof window||!window.document||!window.document.createElement)},58063:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r,o=n(97357);function i(e){if((!r&&0!==r||e)&&o.Z){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return r}},7142:(e,t,n)=>{var r=n(17870);e.exports=function(e,t){return r(e,t,".")}},67963:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,r){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(o){r.message=e.message,r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));return t(new n,r)}}},97143:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var u,l,c=this._events[a],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,i),!0;case 6:return c.fn.call(c.context,t,r,o,i,s),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,o);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||o&&!a[u].once||r&&a[u].context!==r)&&l.push(a[u]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},82395:(e,t,n)=>{"use strict";n.d(t,{v:()=>o.a});var r=n(97143),o=n.n(r)},72618:(e,t,n)=>{var r;!function(){"use strict";var o=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:o,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},27530:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function o(o){var i,s,a,u,l,c,f,d,h,p,g,y,m,v,b,w,E,A,S,C,T,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x=[],I=0;if(isNaN(o))throw new TypeError("Invalid number");if(a=!0===k.bits,b=!0===k.unix,y=!0===k.pad,s=k.base||2,m=void 0!==k.round?k.round:b?1:2,f=void 0!==k.locale?k.locale:"",d=k.localeOptions||{},w=void 0!==k.separator?k.separator:"",E=void 0!==k.spacer?k.spacer:b?"":" ",S=k.symbols||{},A=2===s&&k.standard||"jedec",g=k.output||"string",l=!0===k.fullform,c=k.fullforms instanceof Array?k.fullforms:[],i=void 0!==k.exponent?k.exponent:-1,C=r[k.roundingMethod]||Math.round,h=(p=Number(o))<0,u=s>2?1e3:1024,T=!1===isNaN(k.precision)?parseInt(k.precision,10):0,h&&(p=-p),(-1===i||isNaN(i))&&(i=Math.floor(Math.log(p)/Math.log(u)))<0&&(i=0),i>8&&(T>0&&(T+=8-i),i=8),"exponent"===g)return i;if(0===p)x[0]=0,v=x[1]=b?"":t[A][a?"bits":"bytes"][i];else{I=p/(2===s?Math.pow(2,10*i):Math.pow(1e3,i)),a&&(I*=8)>=u&&i<8&&(I/=u,i++);var _=Math.pow(10,i>0?m:0);x[0]=C(I*_)/_,x[0]===u&&i<8&&void 0===k.exponent&&(x[0]=1,i++),v=x[1]=10===s&&1===i?a?"kb":"kB":t[A][a?"bits":"bytes"][i],b&&(x[1]="jedec"===A?x[1].charAt(0):i>0?x[1].replace(/B$/,""):x[1],e.test(x[1])&&(x[0]=Math.floor(x[0]),x[1]=""))}if(h&&(x[0]=-x[0]),T>0&&(x[0]=x[0].toPrecision(T)),x[1]=S[x[1]]||x[1],!0===f?x[0]=x[0].toLocaleString():f.length>0?x[0]=x[0].toLocaleString(f,d):w.length>0&&(x[0]=x[0].toString().replace(".",w)),y&&!1===Number.isInteger(x[0])&&m>0){var O=w||".",N=x[0].toString().split(O),P=N[1]||"",D=P.length,B=m-D;x[0]="".concat(N[0]).concat(O).concat(P.padEnd(D+B,"0"))}return l&&(x[1]=c[i]?c[i]:n[A][i]+(a?"bit":"byte")+(1===x[0]?"":"s")),"array"===g?x:"object"===g?{value:x[0],symbol:x[1],exponent:i,unit:v}:x.join(E)}return o.partial=function(e){return function(t){return o(t,e)}},o}()},34737:e=>{e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,n=Object.create(null),r=Object.create(null);function o(o,i){n[o]=i,++t>=e&&(t=0,r=n,n=Object.create(null))}return{has:function(e){return void 0!==n[e]||void 0!==r[e]},remove:function(e){void 0!==n[e]&&(n[e]=void 0),void 0!==r[e]&&(r[e]=void 0)},get:function(e){var t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(o(e,t),t):void 0},set:function(e,t){void 0!==n[e]?n[e]=t:o(e,t)},clear:function(){n=Object.create(null),r=Object.create(null)}}}},39895:(e,t,n)=>{var r=n(17870),o=n(98059);e.exports=function(e,t){return r(e,t,"-").replace(/^.|-./g,(function(e){return o(e,t)}))}},62110:(e,t,n)=>{"use strict";var r=n(57441),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return r.isMemo(e)?s:a[e.$$typeof]||o}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var o=h(n);o&&o!==p&&e(t,o,r)}var s=c(n);f&&(s=s.concat(f(n)));for(var a=u(t),g=u(n),y=0;y<s.length;++y){var m=s[y];if(!i[m]&&(!r||!r[m])&&(!g||!g[m])&&(!a||!a[m])){var v=d(n,m);try{l(t,m,v)}catch(b){}}}}return t}},84038:(e,t)=>{t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,f=n?o-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-c)-1,h>>=-c,c+=a;c>0;i=256*i+e[t+f],f+=d,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+e[t+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=l}return(h?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*u-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[n+h]=255&s,h+=p,s/=256,l-=8);e[n+h-p]|=128*g}},59496:(e,t,n)=>{var r=t,{Buffer:o}=n(19778),i=n(11842);r.toBuffer=function(e,t,n){var r;if(n=~~n,this.isV4Format(e))r=t||new o(n+4),e.split(/\./g).map((e=>{r[n++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var i,s=e.split(":",8);for(i=0;i<s.length;i++){var a;this.isV4Format(s[i])&&(a=this.toBuffer(s[i]),s[i]=a.slice(0,2).toString("hex")),a&&++i<8&&s.splice(i,0,a.slice(2,4).toString("hex"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(i=0;i<s.length&&""!==s[i];i++);var u=[i,1];for(i=9-s.length;i>0;i--)u.push("0");s.splice.apply(s,u)}for(r=t||new o(n+16),i=0;i<s.length;i++){var l=parseInt(s[i],16);r[n++]=l>>8&255,r[n++]=255&l}}if(!r)throw Error(`Invalid ip address: ${e}`);return r},r.toString=function(e,t,n){t=~~t;var r,o=[];if(4===(n=n||e.length-t)){for(r=0;r<n;r++)o.push(e[t+r]);o=o.join(".")}else if(16===n){for(r=0;r<n;r+=2)o.push(e.readUInt16BE(t+r).toString(16));o=(o=(o=o.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return o};var s=/^(\d{1,3}\.){3,3}\d{1,3}$/,a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function u(e){return 4===e?"ipv4":6===e?"ipv6":e?e.toLowerCase():"ipv4"}r.isV4Format=function(e){return s.test(e)},r.isV6Format=function(e){return a.test(e)},r.fromPrefixLen=function(e,t){var n=4;"ipv6"===(t=e>32?"ipv6":u(t))&&(n=16);for(var i=new o(n),s=0,a=i.length;s<a;++s){var l=8;e<8&&(l=e),e-=l,i[s]=255&~(255>>l)}return r.toString(i)},r.mask=function(e,t){e=r.toBuffer(e),t=r.toBuffer(t);var n,i=new o(Math.max(e.length,t.length));if(e.length===t.length)for(n=0;n<e.length;n++)i[n]=e[n]&t[n];else if(4===t.length)for(n=0;n<t.length;n++)i[n]=e[e.length-4+n]&t[n];else{for(n=0;n<i.length-6;n++)i[n]=0;for(i[10]=255,i[11]=255,n=0;n<e.length;n++)i[n+12]=e[n]&t[n+12];n+=12}for(;n<i.length;n++)i[n]=0;return r.toString(i)},r.cidr=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error(`invalid CIDR subnet: ${n}`);var o=r.fromPrefixLen(parseInt(t[1],10));return r.mask(n,o)},r.subnet=function(e,t){for(var n=r.toLong(r.mask(e,t)),o=r.toBuffer(t),i=0,s=0;s<o.length;s++)if(255===o[s])i+=8;else for(var a=255&o[s];a;)a=a<<1&255,i++;var u=Math.pow(2,32-i);return{networkAddress:r.fromLong(n),firstAddress:u<=2?r.fromLong(n):r.fromLong(n+1),lastAddress:u<=2?r.fromLong(n+u-1):r.fromLong(n+u-2),broadcastAddress:r.fromLong(n+u-1),subnetMask:t,subnetMaskLength:i,numHosts:u<=2?u:u-2,length:u,contains:e=>n===r.toLong(r.mask(e,t))}},r.cidrSubnet=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error(`invalid CIDR subnet: ${n}`);var o=r.fromPrefixLen(parseInt(t[1],10));return r.subnet(n,o)},r.not=function(e){for(var t=r.toBuffer(e),n=0;n<t.length;n++)t[n]=255^t[n];return r.toString(t)},r.or=function(e,t){var n;if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(n=0;n<e.length;++n)e[n]|=t[n];return r.toString(e)}var o=e,i=t;t.length>e.length&&(o=t,i=e);var s=o.length-i.length;for(n=s;n<o.length;++n)o[n]|=i[n-s];return r.toString(o)},r.isEqual=function(e,t){var n;if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(4===t.length){var o=t;t=e,e=o}for(n=0;n<10;n++)if(0!==t[n])return!1;var i=t.readUInt16BE(10);if(0!==i&&65535!==i)return!1;for(n=0;n<4;n++)if(e[n]!==t[n+12])return!1;return!0},r.isPrivate=function(e){if(r.isLoopback(e))return!0;if(!r.isV6Format(e)){const t=r.normalizeToLong(e);if(t<0)throw new Error("invalid ipv4 address");e=r.fromLong(t)}return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.isPublic=function(e){return!r.isPrivate(e)},r.isLoopback=function(e){return/\./.test(e)||/:/.test(e)||(e=r.fromLong(Number(e))),/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^0177\./.test(e)||/^0x7f\./i.test(e)||/^fe80::1$/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.loopback=function(e){if("ipv4"!==(e=u(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},r.address=function(e,t){var n=i.networkInterfaces();if(t=u(t),e&&"private"!==e&&"public"!==e){var o=n[e].filter((e=>u(e.family)===t));if(0===o.length)return;return o[0].address}var s=Object.keys(n).map((o=>{var i=n[o].filter((n=>(n.family=u(n.family),n.family===t&&!r.isLoopback(n.address)&&(!e||("public"===e?r.isPrivate(n.address):r.isPublic(n.address))))));return i.length?i[0].address:void 0})).filter(Boolean);return s.length?s[0]:r.loopback(t)},r.toLong=function(e){var t=0;return e.split(".").forEach((e=>{t<<=8,t+=parseInt(e)})),t>>>0},r.fromLong=function(e){return`${e>>>24}.${e>>16&255}.${e>>8&255}.${255&e}`},r.normalizeToLong=function(e){const t=e.split(".").map((e=>e.startsWith("0x")||e.startsWith("0X")?parseInt(e,16):e.startsWith("0")&&"0"!==e&&/^[0-7]+$/.test(e)?parseInt(e,8):/^[1-9]\d*$/.test(e)||"0"===e?parseInt(e,10):NaN));if(t.some(isNaN))return-1;let n=0;switch(t.length){case 1:n=t[0];break;case 2:if(t[0]>255||t[1]>16777215)return-1;n=t[0]<<24|16777215&t[1];break;case 3:if(t[0]>255||t[1]>255||t[2]>65535)return-1;n=t[0]<<24|t[1]<<16|65535&t[2];break;case 4:if(t.some((e=>e>255)))return-1;n=t[0]<<24|t[1]<<16|t[2]<<8|t[3];break;default:return-1}return n>>>0}},78603:e=>{"use strict";e.exports={DEFAULT_HTTP_API:"/ip4/127.0.0.1/tcp/5001"}},53062:e=>{"use strict";e.exports={httpClient:"httpClient",windowIpfs:"windowIpfs",jsIpfs:"jsIpfs",webExt:"webExt"}},8297:function(e,t,n){"use strict";e.exports="object"===typeof self&&self.self===self&&self||"object"===typeof n.g&&n.g.global===n.g&&n.g||this},33006:(e,t,n)=>{"use strict";const r=n(8297),o=n(89842),i=n(38099),s=n(13671),a=n(70155),u=n(16605),l={connectionTest:async e=>{const t="QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn";for await(const n of e.get(t))if("dir"===n.type&&n.name===t)return!0;return!1}},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r=>(n=o(l,t,r,n),e(n))}},f={httpClient:c((e=>a({root:r,...e}))),windowIpfs:c((e=>s({root:r,...e}))),jsIpfs:c((e=>u(e))),webExt:c((e=>i({root:r,...e})))},d=[f.windowIpfs(),f.httpClient()];e.exports={getIpfs:async function(){let{providers:e=d,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const r of e)try{const e=await r(t);if(e)return e}catch(n){console.error("[ipfs-provider]",n)}},providers:f,makeProvider:c}},70155:(e,t,n)=>{"use strict";const{URL:r}=n(16791),o=n(53062),{DEFAULT_HTTP_API:i}=n(78603);async function s(e){let{apiAddress:t,connectionTest:n,httpClient:r,...i}=e;try{let e;try{e=r.create({...i,...a(t)})}catch(s){e=r({...i,...a(t)})}return await n(e),{ipfs:e,provider:o.httpClient,apiAddress:t}}catch(u){return null}}const a=e=>{switch(typeof e){case"string":return{url:e};case"object":return JSON.parse(JSON.stringify(e));case"undefined":return{};default:throw new Error("invalid apiAddress passed to httpClient")}};e.exports=async function(e){let t,{loadHttpClientModule:n,apiAddress:o,root:a,connectionTest:u,...l}=e;if(n&&(t=await n()),!t){if(!a.IpfsHttpClient)throw new Error("ipfs-provider could not initialize js-ipfs-http-client: make sure its constructor is returned by loadHttpClientModule function or exposed at window.IpfsHttpClient");t=a.IpfsHttpClient}if(t=t.default||t,o||l.url||l.host)return s({apiAddress:o,connectionTest:u,httpClient:t,...l});const{location:c}=a;if(c&&("5001"!==c.port||!c.hostname.match(/^127.0.0.1$|^localhost$/))){const e=new r(c.origin);e.pathname="/";const n=await s({apiAddress:e.toString(),connectionTest:u,httpClient:t,...l});if(n)return n}return s({apiAddress:i,connectionTest:u,httpClient:t,...l})}},16605:(e,t,n)=>{"use strict";const r=n(53062);async function o(e,t){return(e=e.default||e).create(t)}e.exports=async function(e){let{connectionTest:t,loadJsIpfsModule:n,options:i,init:s=o}=e;const a=await n(),u=await s(a,i);return await t(u),{ipfs:u,provider:r.jsIpfs}}},38099:(e,t,n)=>{"use strict";const r=n(53062);e.exports=async function(e){let{root:t,connectionTest:n}=e;if("object"===typeof t.chrome&&t.chrome.extension&&t.chrome.extension.getBackgroundPage){let e=null;try{e=t.chrome.extension.getBackgroundPage()}catch(o){return null}if(e&&e.ipfs){const{ipfs:t}=e;return await n(t),{ipfs:t,provider:r.webExt}}}}},13671:(e,t,n)=>{"use strict";const r=n(53062);e.exports=async function(e){let{root:t,permissions:n,connectionTest:o}=e;if(t.ipfs){n&&n.commands&&n.commands.includes("files.get")||(n=n||{},n=JSON.parse(JSON.stringify(n)),n.commands=n.commands||[],n.commands.push("files.get"));const e="function"===typeof t.ipfs.enable?await t.ipfs.enable(n):t.ipfs;return await o(e),{ipfs:e,provider:r.windowIpfs}}}},59714:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(72791),o=n(18335);const i=e=>{let{className:t="pa4",style:n,children:i,...s}=e;return r.createElement("div",{className:t,style:{background:"#fbfbfb",...n}},r.createElement(o.Z,null,i))}},24461:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(72791),o=n(87945),i=n(69458),s=n(45620);var a=n(19178);async function u(e){const t=i.k0.parse(e);try{const n=await(0,a.C)(t.multihash.code),r=await async function(e){if("Q"===e)return s.gh.base58btc;const t=Object.values(s.gh).find((t=>t.prefix===e));if(null!=t)return t;throw new Error(`unknown multibase prefix '${e}'`)}(e.substring(0,1)),o={name:t.code};return 0===t.version?o.code="implicit":t.version>=1&&(o.code=`0x${t.code.toString(16)}`),{cid:t,multibase:r,multicodec:o,multihash:{name:n.name,...t.multihash}}}catch(n){console.error("Failed to decode CID",n)}}var l=n(48236),c=n(19778).Buffer;async function f(e){const t=await u(e);if(null==t)throw new Error(`CID could not be decoded for CID '${e.toString()}'`);const n=t.multihash.name,r=t.multihash.code.toString(16),o=t.multihash.size,i=8*t.multihash.size,s=(a=t.multihash.digest,c.from(a.buffer,a.byteOffset,a.byteLength).toString("hex").toUpperCase());var a;const f=s.split("").reduce(((e,t,n)=>{const r=Math.floor(n/32);return null==e[r]&&(e[r]=[]),e[r].push(t),e}),[]),d=(0,l.Z)(t.cid.code),h=`${t.multibase.name} - cidv${t.cid.version} - ${d} - ${n}~${i}~${s}`;return{base:t.multibase.name,codecName:d,hashFn:n,hashFnCode:r,hashLengthCode:o,hashLengthInBits:i,hashValue:s,hashValueIn32CharChunks:f,humanReadable:h}}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}const h=(0,o.Zh)("explore")((e=>{let{t:t,tReady:n,cid:o,className:i,...s}=e;const[a,u]=(0,r.useState)(null),[l,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{o&&c(await f(o))}catch(e){console.error(e),u(e)}})()}),[o]),o?r.createElement("section",d({className:`ph3 pv4 sans-serif ${i}`},s),r.createElement("label",{className:"db pb2"},r.createElement("a",{className:"tracked ttu f5 fw2 teal-muted hover-aqua link",href:"https://docs.ipfs.io/concepts/glossary/#cid",rel:"external",target:"_external"},t("CidInfo.header"))),l?r.createElement("div",null,r.createElement("div",{className:"f7 monospace fw4 ma0 pb2 truncate mid-gray force-select",title:o},o),r.createElement("div",{className:"f6 sans-serif fw4 ma0 pb2 truncate",id:"CidInfo-human-readable-cid"},l.humanReadable),r.createElement("label",{htmlFor:"CidInfo-human-readable-cid",className:"db fw2 ma0 mid-gray ttu f7 tracked"},t("base")," - ",t("version")," - ",t("codec")," - ",t("multihash")),r.createElement("a",{href:"https://docs.ipfs.io/concepts/glossary/#multihash",rel:"external",target:"_external",className:"dib tracked ttu f6 fw2 teal-muted hover-aqua link mt4"},t("multihash")),r.createElement("div",null,r.createElement("div",{className:"dib monospace f6 pt2 tr dark-gray lh-title ph2"},r.createElement("code",{className:"gray"},"0x"),r.createElement("span",{className:"orange force-select"},l.hashFnCode),r.createElement("span",{className:"green force-select"},l.hashLengthCode),r.createElement("span",{id:"CidInfo-multihash",className:"force-select"},l.hashValueIn32CharChunks.map((e=>r.createElement("span",{key:e.join("")},e.join(""),r.createElement("br",null))))),r.createElement("label",{htmlFor:"CidInfo-multihash",className:"sans-serif fw2 ma0 mid-gray ttu f7 tracked"},t("CidInfo.hashDigest")),r.createElement("div",{className:"tl lh-copy"},r.createElement("a",{className:"db orange no-underline pt2",href:"https://docs.ipfs.io/concepts/glossary/#multicodec",rel:"external",target:"_external",title:"Multicodec"},r.createElement("code",{className:"gray"},"0x"),r.createElement("code",null,l.hashFnCode)," = ",l.hashFn),r.createElement("div",{id:"CidInfo-multihash",className:"green"},r.createElement("code",{className:"gray"},"0x"),r.createElement("code",null,l.hashLengthCode)," = ",l.hashLengthInBits," bits"))))):null,a?r.createElement("div",null,r.createElement("div",{className:"f5 sans-serif fw5 ma0 pv2 truncate navy"},o),r.createElement("div",{className:"red fw2 ma0 f7"},a.message)):null):null}))},18335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(72791);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}const i=e=>r.createElement("svg",o({viewBox:"0 0 100 100"},e),r.createElement("path",{d:"M63.79 63.2l-3.88 3.88-9.71-9.7-9.7 9.7-3.88-3.88 9.7-9.71-9.7-9.7 3.88-3.88 9.7 9.7 9.71-9.7 3.88 3.88-9.7 9.7 9.7 9.71z"}));function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends r.Component{constructor(){super(...arguments),s(this,"state",{hasError:!1})}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e)}render(){const{hasError:e}=this.state,{children:t,fallback:n}=this.props;return e?r.createElement(n,null):t}}s(a,"defaultProps",{fallback:i});const u=a},39278:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(5803),o=n(72791),i=n(51483);const s=(0,r.ZP)((()=>Promise.all([n.e(174),n.e(329)]).then(n.bind(n,15329))),{fallback:o.createElement(i.Z,null)})},51483:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(72791),o=n(59714);const i=e=>{let{color:t="light",...n}=e;const o=`dib la-ball-triangle-path la-${t} la-sm`;return r.createElement("div",n,r.createElement("div",{className:o,style:{width:20,height:20}},r.createElement("div",null),r.createElement("div",null),r.createElement("div",null)))},s=()=>r.createElement(o.Z,{style:{height:"100%"}},r.createElement("div",{style:{height:"100%"}},r.createElement(i,{color:"dark"})))},4901:(e,t,n)=>{"use strict";n.d(t,{$j:()=>Le,ZP:()=>je,RB:()=>Re,Yn:()=>Be});const r="array",o="bit",i="bits",s="byte",a="bytes",u="",l="exponent",c="function",f="iec",d="Invalid number",h="Invalid rounding method",p="jedec",g="object",y=".",m="round",v="s",b="si",w="kbit",E="kB",A=" ",S="string",C="0",T={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};var k=n(90721),x=n(69458),I=n(72791),_=n(87945),O=Object.create,N=Object.defineProperty,P=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,B=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,L=(e,t)=>function(){return t||(0,e[D(e)[0]])((t={exports:{}}).exports,t),t.exports},F=L({"node_modules/is-object/index.js"(e,t){t.exports=function(e){return"object"===typeof e&&null!==e}}}),M=L({"node_modules/is-window/index.js"(e,t){t.exports=function(e){if(null==e)return!1;var t=Object(e);return t===t.window}}}),U=L({"node_modules/is-dom/index.js"(e,t){var n=F(),r=M();t.exports=function(e){return!(!n(e)||!r(window)||"function"!==typeof window.Node)&&("number"===typeof e.nodeType&&"string"===typeof e.nodeName)}}}),j={};((e,t)=>{for(var n in t)N(e,n,{get:t[n],enumerable:!0})})(j,{chromeDark:()=>z,chromeLight:()=>$});var z={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},$={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},H=(0,I.createContext)([{},()=>{}]),V={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"},G=e=>({DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:{whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...V},treeNodeArrow:{base:{color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT,...parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:`transform ${e.ARROW_ANIMATION_DURATION} ease 0s`}:{},...V},expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:`1px solid ${e.TABLE_BORDER_COLOR}`,fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:`1px solid ${e.TABLE_BORDER_COLOR}`,fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:`1px solid ${e.TABLE_BORDER_COLOR}`}},TableInspectorSortIcon:{display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12,...V}}),Z="chromeLight",W=(0,I.createContext)(G(j[Z])),q=e=>(0,I.useContext)(W)[e],K=e=>t=>{let{theme:n=Z,...r}=t;const o=(0,I.useMemo)((()=>{switch(Object.prototype.toString.call(n)){case"[object String]":return G(j[n]);case"[object Object]":return G(n);default:return G(j[Z])}}),[n]);return I.createElement(W.Provider,{value:o},I.createElement(e,{...r}))},Y=e=>{let{expanded:t,styles:n}=e;return I.createElement("span",{style:{...n.base,...t?n.expanded:n.collapsed}},"\u25b6")},J=(0,I.memo)((e=>{e={expanded:!0,nodeRenderer:e=>{let{name:t}=e;return I.createElement("span",null,t)},onClick:()=>{},shouldShowArrow:!1,shouldShowPlaceholder:!0,...e};const{expanded:t,onClick:n,children:r,nodeRenderer:o,title:i,shouldShowArrow:s,shouldShowPlaceholder:a}=e,u=q("TreeNode"),l=o;return I.createElement("li",{"aria-expanded":t,role:"treeitem",style:u.treeNodeBase,title:i},I.createElement("div",{style:u.treeNodePreviewContainer,onClick:n},s||I.Children.count(r)>0?I.createElement(Y,{expanded:t,styles:u.treeNodeArrow}):a&&I.createElement("span",{style:u.treeNodePlaceholder},"\xa0"),I.createElement(l,{...e})),I.createElement("ol",{role:"group",style:u.treeNodeChildNodesContainer},t?r:void 0))})),X="$";function Q(e,t){return!t(e).next().done}var ee=(e,t,n,r,o)=>{const i=[].concat((s=r,Array.from({length:s},((e,t)=>[X].concat(Array.from({length:t},(()=>"*"))).join("."))))).concat(n).filter((e=>"string"===typeof e));var s;const a=[];return i.forEach((n=>{const r=n.split("."),o=(e,n,i)=>{if(i===r.length)return void a.push(n);const s=r[i];if(0===i)!Q(e,t)||s!==X&&"*"!==s||o(e,X,i+1);else if("*"===s)for(const{name:r,data:a}of t(e))Q(a,t)&&o(a,`${n}.${r}`,i+1);else{const r=e[s];Q(r,t)&&o(r,`${n}.${s}`,i+1)}};o(e,"",0)})),a.reduce(((e,t)=>(e[t]=!0,e)),{...o})},te=(0,I.memo)((e=>{const{data:t,dataIterator:n,path:r,depth:o,nodeRenderer:i}=e,[s,a]=(0,I.useContext)(H),u=Q(t,n),l=!!s[r],c=(0,I.useCallback)((()=>u&&a((e=>({...e,[r]:!l})))),[u,a,r,l]);return I.createElement(J,{expanded:l,onClick:c,shouldShowArrow:u,shouldShowPlaceholder:o>0,nodeRenderer:i,...e},l?[...n(t)].map((e=>{let{name:t,data:s,...a}=e;return I.createElement(te,{name:t,data:s,depth:o+1,path:`${r}.${t}`,key:t,dataIterator:n,nodeRenderer:i,...a})})):null)})),ne=(0,I.memo)((e=>{let{name:t,data:n,dataIterator:r,nodeRenderer:o,expandPaths:i,expandLevel:s}=e;const a=q("TreeView"),u=(0,I.useState)({}),[,l]=u;return(0,I.useLayoutEffect)((()=>l((e=>ee(n,r,i,s,e)))),[n,r,i,s]),I.createElement(H.Provider,{value:u},I.createElement("ol",{role:"tree",style:a.treeViewOutline},I.createElement(te,{name:t,data:n,dataIterator:r,depth:0,path:X,nodeRenderer:o})))})),re=e=>{let{name:t,dimmed:n=!1,styles:r={}}=e;const o=q("ObjectName"),i={...o.base,...n?o.dimmed:{},...r};return I.createElement("span",{style:i},t)},oe=e=>{let{object:t,styles:n}=e;const r=q("ObjectValue"),o=e=>({...r[e],...n});switch(typeof t){case"bigint":return I.createElement("span",{style:o("objectValueNumber")},String(t),"n");case"number":return I.createElement("span",{style:o("objectValueNumber")},String(t));case"string":return I.createElement("span",{style:o("objectValueString")},'"',t,'"');case"boolean":return I.createElement("span",{style:o("objectValueBoolean")},String(t));case"undefined":return I.createElement("span",{style:o("objectValueUndefined")},"undefined");case"object":return null===t?I.createElement("span",{style:o("objectValueNull")},"null"):t instanceof Date?I.createElement("span",null,t.toString()):t instanceof RegExp?I.createElement("span",{style:o("objectValueRegExp")},t.toString()):Array.isArray(t)?I.createElement("span",null,`Array(${t.length})`):t.constructor?"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)?I.createElement("span",null,`Buffer[${t.length}]`):I.createElement("span",null,t.constructor.name):I.createElement("span",null,"Object");case"function":return I.createElement("span",null,I.createElement("span",{style:o("objectValueFunctionPrefix")},"\u0192\xa0"),I.createElement("span",{style:o("objectValueFunctionName")},t.name,"()"));case"symbol":return I.createElement("span",{style:o("objectValueSymbol")},t.toString());default:return I.createElement("span",null)}},ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;function ae(e,t){const n=Object.getOwnPropertyDescriptor(e,t);if(n.get)try{return n.get()}catch{return n.get}return e[t]}function ue(e,t){return 0===e.length?[]:e.slice(1).reduce(((e,n)=>e.concat([t,n])),[e[0]])}var le=e=>{let{data:t}=e;const n=q("ObjectPreview"),r=t;if("object"!==typeof r||null===r||r instanceof Date||r instanceof RegExp)return I.createElement(oe,{object:r});if(Array.isArray(r)){const e=n.arrayMaxProperties,t=r.slice(0,e).map(((e,t)=>I.createElement(oe,{key:t,object:e})));r.length>e&&t.push(I.createElement("span",{key:"ellipsis"},"\u2026"));const o=r.length;return I.createElement(I.Fragment,null,I.createElement("span",{style:n.objectDescription},0===o?"":`(${o})\xa0`),I.createElement("span",{style:n.preview},"[",ue(t,", "),"]"))}{const e=n.objectMaxProperties,t=[];for(const n in r)if(ie.call(r,n)){let o;t.length===e-1&&Object.keys(r).length>e&&(o=I.createElement("span",{key:"ellipsis"},"\u2026"));const i=ae(r,n);if(t.push(I.createElement("span",{key:n},I.createElement(re,{name:n||'""'}),":\xa0",I.createElement(oe,{object:i}),o)),o)break}const o=r.constructor?r.constructor.name:"Object";return I.createElement(I.Fragment,null,I.createElement("span",{style:n.objectDescription},"Object"===o?"":`${o} `),I.createElement("span",{style:n.preview},"{",ue(t,", "),"}"))}},ce=e=>{let{name:t,data:n}=e;return"string"===typeof t?I.createElement("span",null,I.createElement(re,{name:t}),I.createElement("span",null,": "),I.createElement(le,{data:n})):I.createElement(le,{data:n})},fe=e=>{let{name:t,data:n,isNonenumerable:r=!1}=e;const o=n;return I.createElement("span",null,"string"===typeof t?I.createElement(re,{name:t,dimmed:r}):I.createElement(le,{data:t}),I.createElement("span",null,": "),I.createElement(oe,{object:o}))},de=e=>{let{depth:t,name:n,data:r,isNonenumerable:o}=e;return 0===t?I.createElement(ce,{name:n,data:r}):I.createElement(fe,{name:n,data:r,isNonenumerable:o})},he=K((e=>{let{showNonenumerable:t=!1,sortObjectKeys:n,nodeRenderer:r,...o}=e;const i=((e,t)=>function*(n){if(("object"!==typeof n||null===n)&&"function"!==typeof n)return;const r=Array.isArray(n);if(!r&&n[Symbol.iterator]){let e=0;for(const t of n){if(Array.isArray(t)&&2===t.length){const[e,n]=t;yield{name:e,data:n}}else yield{name:e.toString(),data:t};e++}}else{const i=Object.getOwnPropertyNames(n);!0!==t||r?"function"===typeof t&&i.sort(t):i.sort();for(const t of i)if(se.call(n,t)){const e=ae(n,t);yield{name:t||'""',data:e}}else if(e){let e;try{e=ae(n,t)}catch(o){}void 0!==e&&(yield{name:t,data:e,isNonenumerable:!0})}e&&n!==Object.prototype&&(yield{name:"__proto__",data:Object.getPrototypeOf(n),isNonenumerable:!0})}})(t,n),s=r||de;return I.createElement(ne,{nodeRenderer:s,dataIterator:i,...o})}));var pe=e=>{let{rows:t,columns:n,rowsData:r}=e;const o=q("TableInspectorDataContainer"),i=q("TableInspectorLeftBorder");return I.createElement("div",{style:o.div},I.createElement("table",{style:o.table},I.createElement("colgroup",null),I.createElement("tbody",null,t.map(((e,t)=>I.createElement("tr",{key:e,style:o.tr},I.createElement("td",{style:{...o.td,...i.none}},e),n.map((e=>{const n=r[t];return"object"===typeof n&&null!==n&&ie.call(n,e)?I.createElement("td",{key:e,style:{...o.td,...i.solid}},I.createElement(oe,{object:n[e]})):I.createElement("td",{key:e,style:{...o.td,...i.solid}})}))))))))},ge=e=>I.createElement("div",{style:{position:"absolute",top:1,right:0,bottom:1,display:"flex",alignItems:"center"}},e.children),ye=e=>{let{sortAscending:t}=e;const n=q("TableInspectorSortIcon"),r=t?"\u25b2":"\u25bc";return I.createElement("div",{style:n},r)},me=e=>{let{sortAscending:t=!1,sorted:n=!1,onClick:r,borderStyle:o={},children:i,...s}=e;const a=q("TableInspectorTH"),[u,l]=(0,I.useState)(!1),c=(0,I.useCallback)((()=>l(!0)),[]),f=(0,I.useCallback)((()=>l(!1)),[]);return I.createElement("th",{...s,style:{...a.base,...o,...u?a.base[":hover"]:{}},onMouseEnter:c,onMouseLeave:f,onClick:r},I.createElement("div",{style:a.div},i),n&&I.createElement(ge,null,I.createElement(ye,{sortAscending:t})))},ve=e=>{let{indexColumnText:t="(index)",columns:n=[],sorted:r,sortIndexColumn:o,sortColumn:i,sortAscending:s,onTHClick:a,onIndexTHClick:u}=e;const l=q("TableInspectorHeaderContainer"),c=q("TableInspectorLeftBorder");return I.createElement("div",{style:l.base},I.createElement("table",{style:l.table},I.createElement("tbody",null,I.createElement("tr",null,I.createElement(me,{borderStyle:c.none,sorted:r&&o,sortAscending:s,onClick:u},t),n.map((e=>I.createElement(me,{borderStyle:c.solid,key:e,sorted:r&&i===e,sortAscending:s,onClick:a.bind(null,e)},e)))))))},be=(K((e=>{let{data:t,columns:n}=e;const r=q("TableInspector"),[{sorted:o,sortIndexColumn:i,sortColumn:s,sortAscending:a},u]=(0,I.useState)({sorted:!1,sortIndexColumn:!1,sortColumn:void 0,sortAscending:!1}),l=(0,I.useCallback)((()=>{u((e=>{let{sortIndexColumn:t,sortAscending:n}=e;return{sorted:!0,sortIndexColumn:!0,sortColumn:void 0,sortAscending:!t||!n}}))}),[]),c=(0,I.useCallback)((e=>{u((t=>{let{sortColumn:n,sortAscending:r}=t;return{sorted:!0,sortIndexColumn:!1,sortColumn:e,sortAscending:e!==n||!r}}))}),[]);if("object"!==typeof t||null===t)return I.createElement("div",null);let{rowHeaders:f,colHeaders:d}=function(e){if("object"===typeof e){let t=[];if(Array.isArray(e)){const n=e.length;t=[...Array(n).keys()]}else null!==e&&(t=Object.keys(e));const n=t.reduce(((t,n)=>{const r=e[n];return"object"===typeof r&&null!==r&&Object.keys(r).reduce(((e,t)=>(e.includes(t)||e.push(t),e)),t),t}),[]);return{rowHeaders:t,colHeaders:n}}}(t);void 0!==n&&(d=n);let h,p=f.map((e=>t[e]));if(void 0!==s?h=p.map(((e,t)=>{if("object"===typeof e&&null!==e){return[e[s],t]}return[void 0,t]})):i&&(h=f.map(((e,t)=>[f[t],t]))),void 0!==h){const e=(e,t)=>(n,r)=>{const o=e(n),i=e(r),s=typeof o,a=typeof i,u=(e,t)=>e<t?-1:e>t?1:0;let l;if(s===a)l=u(o,i);else{const e={string:0,number:1,object:2,symbol:3,boolean:4,undefined:5,function:6};l=u(e[s],e[a])}return t||(l=-l),l},t=h.sort(e((e=>e[0]),a)).map((e=>e[1]));f=t.map((e=>f[e])),p=t.map((e=>p[e]))}return I.createElement("div",{style:r.base},I.createElement(ve,{columns:d,sorted:o,sortIndexColumn:i,sortColumn:s,sortAscending:a,onTHClick:c,onIndexTHClick:l}),I.createElement(pe,{rows:f,columns:d,rowsData:p}))})),e=>0===e.childNodes.length||1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&e.textContent.length<80),we=e=>{let{tagName:t,attributes:n,styles:r}=e;return I.createElement("span",{style:r.base},"<",I.createElement("span",{style:r.tagName},t),(()=>{if(n){const e=[];for(let t=0;t<n.length;t++){const o=n[t];e.push(I.createElement("span",{key:t}," ",I.createElement("span",{style:r.htmlAttributeName},o.name),'="',I.createElement("span",{style:r.htmlAttributeValue},o.value),'"'))}return e}})(),">")},Ee=e=>{let{tagName:t,isChildNode:n=!1,styles:r}=e;return I.createElement("span",{style:Object.assign({},r.base,n&&r.offsetLeft)},"</",I.createElement("span",{style:r.tagName},t),">")},Ae={1:"ELEMENT_NODE",3:"TEXT_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE"},Se=e=>{let{isCloseTag:t,data:n,expanded:r}=e;const o=q("DOMNodePreview");if(t)return I.createElement(Ee,{styles:o.htmlCloseTag,isChildNode:!0,tagName:n.tagName});switch(n.nodeType){case Node.ELEMENT_NODE:return I.createElement("span",null,I.createElement(we,{tagName:n.tagName,attributes:n.attributes,styles:o.htmlOpenTag}),be(n)?n.textContent:!r&&"\u2026",!r&&I.createElement(Ee,{tagName:n.tagName,styles:o.htmlCloseTag}));case Node.TEXT_NODE:return I.createElement("span",null,n.textContent);case Node.CDATA_SECTION_NODE:return I.createElement("span",null,"<![CDATA["+n.textContent+"]]>");case Node.COMMENT_NODE:return I.createElement("span",{style:o.htmlComment},"\x3c!--",n.textContent,"--\x3e");case Node.PROCESSING_INSTRUCTION_NODE:return I.createElement("span",null,n.nodeName);case Node.DOCUMENT_TYPE_NODE:return I.createElement("span",{style:o.htmlDoctype},"<!DOCTYPE ",n.name,n.publicId?` PUBLIC "${n.publicId}"`:"",!n.publicId&&n.systemId?" SYSTEM":"",n.systemId?` "${n.systemId}"`:"",">");case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return I.createElement("span",null,n.nodeName);default:return I.createElement("span",null,Ae[n.nodeType])}},Ce=function*(e){if(e&&e.childNodes){if(be(e))return;for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];n.nodeType===Node.TEXT_NODE&&0===n.textContent.trim().length||(yield{name:`${n.tagName}[${t}]`,data:n})}e.tagName&&(yield{name:"CLOSE_TAG",data:{tagName:e.tagName},isCloseTag:!0})}},Te=(K((e=>I.createElement(ne,{nodeRenderer:Se,dataIterator:Ce,...e}))),((e,t,n)=>{n=null!=e?O(B(e)):{},((e,t,n,r)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let o of D(t))R.call(e,o)||o===n||N(e,o,{get:()=>t[o],enumerable:!(r=P(t,o))||r.enumerable})})(!t&&e&&e.__esModule?n:N(n,"default",{value:e,enumerable:!0}),e)})(U()),n(48236)),ke=n(4775);function xe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ie extends I.Component{constructor(){super(...arguments),xe(this,"handleOnRowClick",(e=>{let{rowData:t}=e;const{onLinkClick:n}=this.props;n(t)}))}render(){const{links:e}=this.props,t="mid-gray fw2 tracked",n={overflow:"auto"},r=Math.max(370,Math.min(window.innerHeight-500,29*e.length+32));return I.createElement("div",null,I.createElement(ke.qj,{disableHeight:!0},(o=>{let{width:i}=o;return I.createElement(ke.iA,{className:"tl fw4 LinksTable",rowClassName:"pointer bb b--near-white f7",width:i,height:r,headerHeight:32,rowHeight:29,rowCount:e.length,rowGetter:t=>{let{index:n}=t;return{index:n,...e[n]}},onRowClick:this.handleOnRowClick},I.createElement(ke.sg,{dataKey:"index",width:34,className:"pv2 mid-gray monospace tr pr1"}),I.createElement(ke.sg,{label:"Path",dataKey:"path",width:150,flexGrow:1,className:"pv2 navy f6-ns",headerClassName:t}),I.createElement(ke.sg,{label:"CID",dataKey:"target",width:420,className:"pv2 mid-gray monospace no-ellipsis",headerClassName:t,style:n}))})))}}const _e=Ie;function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(null,arguments)}const Ne=function(){let{bits:e=!1,pad:t=!1,base:n=-1,round:k=2,locale:x=u,localeOptions:I={},separator:_=u,spacer:O=A,symbols:N={},standard:P=u,output:D=S,fullform:B=!1,fullforms:R=[],exponent:L=-1,roundingMethod:F=m,precision:M=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return U=>function(e){let{bits:t=!1,pad:n=!1,base:k=-1,round:x=2,locale:I=u,localeOptions:_={},separator:O=u,spacer:N=A,symbols:P={},standard:D=u,output:B=S,fullform:R=!1,fullforms:L=[],exponent:F=-1,roundingMethod:M=m,precision:U=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=F,z=Number(e),$=[],H=0,V=u;D===b?(k=10,D=p):D===f||D===p?k=2:2===k?D=f:(k=10,D=p);const G=10===k?1e3:1024,Z=!0===R,W=z<0,q=Math[M];if("bigint"!==typeof e&&isNaN(e))throw new TypeError(d);if(typeof q!==c)throw new TypeError(h);if(W&&(z=-z),(-1===j||isNaN(j))&&(j=Math.floor(Math.log(z)/Math.log(G)),j<0&&(j=0)),j>8&&(U>0&&(U+=8-j),j=8),B===l)return j;if(0===z)$[0]=0,V=$[1]=T.symbol[D][t?i:a][j];else{H=z/(2===k?Math.pow(2,10*j):Math.pow(1e3,j)),t&&(H*=8,H>=G&&j<8&&(H/=G,j++));const e=Math.pow(10,j>0?x:0);$[0]=q(H*e)/e,$[0]===G&&j<8&&-1===F&&($[0]=1,j++),V=$[1]=10===k&&1===j?t?w:E:T.symbol[D][t?i:a][j]}if(W&&($[0]=-$[0]),U>0&&($[0]=$[0].toPrecision(U)),$[1]=P[$[1]]||$[1],!0===I?$[0]=$[0].toLocaleString():I.length>0?$[0]=$[0].toLocaleString(I,_):O.length>0&&($[0]=$[0].toString().replace(y,O)),n&&x>0){const e=$[0].toString(),t=O||(e.match(/(\D)/g)||[]).pop()||y,n=e.toString().split(t),r=n[1]||u,o=r.length,i=x-o;$[0]=`${n[0]}${t}${r.padEnd(o+i,C)}`}return Z&&($[1]=L[j]?L[j]:T.fullform[D][j]+(t?o:s)+(1===$[0]?u:v)),B===r?$:B===g?{value:$[0],symbol:$[1],exponent:j,unit:V}:$.join(N)}(U,{bits:e,pad:t,base:n,round:k,locale:x,localeOptions:I,separator:_,spacer:O,symbols:N,standard:P,output:D,fullform:B,fullforms:R,exponent:L,roundingMethod:F,precision:M})}({round:0}),Pe={...$,BASE_FONT_FAMILY:"Consolas, Menlo, monospace",TREENODE_FONT_FAMILY:"Consolas, Menlo, monospace",BASE_FONT_SIZE:"13px",BASE_LINE_HEIGHT:"19px",TREENODE_FONT_SIZE:"13px",TREENODE_LINE_HEIGHT:"19px"},De={"dag-cbor":{shortName:"DAG-CBOR",name:"dag-cbor",color:k.colors.aqua},"dag-json":{shortName:"DAG-JSON",name:"dag-json",color:k.colors.green},raw:{shortName:"RAW",name:"Raw Block",color:k.colors.red},"dag-pb":{shortName:"DAG-PB",name:"dag-pb",color:k.colors.teal},"dag-jose":{shortName:"DAG-JOSE",name:"dag-jose",color:k.colors.yellow},json:{shortName:"JSON",name:"JSON",color:k.colors["green-muted"]},"hamt-sharded-directory":{shortName:"HAMT\nDAG-PB",name:"HAMT-Sharded dag-pb Directory",color:k.colors["teal-muted"]},"eth-block":{shortName:"ETH",name:"Ethereum Block",color:k.colors.charcoal},"eth-block-list":{shortName:"ETH",name:"Ethereum Block List",color:k.colors.charcoal},"eth-tx-trie":{shortName:"ETH",name:"Ethereum Tx Trie",color:k.colors.charcoal},"eth-tx":{shortName:"ETH",name:"Ethereum Tx",color:k.colors.charcoal},"eth-state-trie":{shortName:"ETH",name:"Ethereum State Trie",color:k.colors.charcoal}};function Be(e){const t=De[e];return t&&t.shortName||"DAG"}function Re(e){const t=De[e];return t&&t.name||"DAG Node"}function Le(e){const t=De[e];return t&&t.color||"#ea5037"}function Fe(e){if(!e)return[];const t=e.split("/"),n=t.map(((e,n)=>{if(!e)return"$";return`$${t.slice(0,n).join(".")}.${e}`}));return n.slice(0,n.length-1)}const Me=e=>{let{type:t,...n}=e;return I.createElement("svg",Oe({},n,{title:Re(t),width:"30",height:"30",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"}),I.createElement("circle",{cx:"15",cy:"15",r:"15",fillRule:"evenodd",fill:Le(t)}))},Ue=e=>(null==e||null!=e.blockSizes&&(e.blockSizes=e.blockSizes.map(Number)),e),je=(0,_.Zh)("explore")((e=>{let{t:t,tReady:n,className:r,type:o,cid:i,localPath:s,size:a,data:u,links:l,format:c,onLinkClick:f,gatewayUrl:d,publicGatewayUrl:h,...p}=e;if(!n)return null;const g="unixfs"===c&&u.type&&["directory","file"].some((e=>e===u.type));let y=o;return isNaN(o)&&!g&&"DAG Node"!==Re(o)||(y=(0,Te.Z)(x.k0.parse(i).code)??o),I.createElement("section",Oe({className:`pa4 sans-serif ${r}`},p),I.createElement("h2",{className:"ma0 lh-title f4 fw4 montserrat pb2",title:y},I.createElement(Me,{type:y,className:"mr3",style:{verticalAlign:-8}}),I.createElement("span",{className:"v-mid"},Re(y)),"unixfs"===c?I.createElement("a",{className:"dn di-ns no-underline charcoal ml2",href:"https://docs.ipfs.io/concepts/glossary/#unixfs",rel:"external",target:"_external"},"UnixFS"):null,g?I.createElement("span",{className:"dib"},d&&d!==h&&I.createElement("a",{className:"no-underline avenir ml2 pa2 fw5 f6 navy dib",href:`${d}/ipfs/${i}`,rel:"external nofollow",target:"_external"},t("ObjectInfo.privateGateway")),h&&I.createElement("a",{className:"no-underline avenir ml2 pa2 fw5 f6 navy dib",href:`${h}/ipfs/${i}`,rel:"external nofollow",target:"_external"},t("ObjectInfo.publicGateway"))):null),I.createElement("div",{className:"f6"},i?I.createElement("div",{className:"dt dt--fixed pt2"},I.createElement("label",{className:"dtc silver tracked ttu f7",style:{width:48}},"CID"),I.createElement("div",{className:"dtc truncate charcoal monospace","data-id":"ObjectInfo-cid"},i)):null,a?I.createElement("div",{className:"dt dt--fixed pt2"},I.createElement("label",{className:"dtc silver tracked ttu f7",style:{width:48}},"Size"),I.createElement("div",{className:"dtc truncate charcoal monospace"},Ne(Number(a)))):null,I.createElement("div",{className:"dt dt--fixed pt2"},I.createElement("label",{className:"dtc silver tracked ttu f7",style:{width:48}},"Links"),I.createElement("div",{className:"dtc truncate charcoal"},l?I.createElement("code",null,l.length):"No Links")),I.createElement("div",{className:"dt dt--fixed pt2",style:{height:26}},I.createElement("label",{className:"dtc silver tracked ttu f7 v-mid",style:{width:48}},"Data"),I.createElement("div",{className:"dtc truncate mid-gray"},u?null:"No data")),u?I.createElement("div",{className:"pa3 mt2 bg-white f5 nl3 nr3 mh0-l overflow-x-auto"},I.createElement(he,{showMaxKeys:100,data:Ue(u),theme:Pe,expandPaths:Fe(s)})):null),l&&l.length?I.createElement("div",{className:"mv2 nl3 nr3 mh0-l"},I.createElement(_e,{links:l,onLinkClick:f})):null)}))},70876:(e,t,n)=>{"use strict";n.d(t,{T8:()=>hm,bd:()=>_m,py:()=>yn,b0:()=>lm});var r={};n.r(r),n.d(r,{Fy:()=>No,uw:()=>go,gk:()=>po,Dd:()=>Po,dQ:()=>Do,ci:()=>mo,bytesToNumberBE:()=>So,ty:()=>Co,eV:()=>Io,n$:()=>Lo,ql:()=>xo,hexToBytes:()=>Ao,Z2:()=>Oo,_t:()=>ho,H9:()=>Uo,tL:()=>To,S5:()=>ko,uz:()=>vo,FF:()=>Mo});var o={};n.r(o),n.d(o,{Ed25519PrivateKey:()=>$i,Ed25519PublicKey:()=>zi,generateKeyPair:()=>Gi,generateKeyPairFromSeed:()=>Zi,unmarshalEd25519PrivateKey:()=>Hi,unmarshalEd25519PublicKey:()=>Vi});var i={};n.r(i),n.d(i,{MAX_RSA_KEY_SIZE:()=>gu,RsaPrivateKey:()=>mu,RsaPublicKey:()=>yu,fromJwk:()=>wu,generateKeyPair:()=>Eu,unmarshalRsaPrivateKey:()=>vu,unmarshalRsaPublicKey:()=>bu});var s={};n.r(s),n.d(s,{Secp256k1PrivateKey:()=>Wu,Secp256k1PublicKey:()=>Zu,generateKeyPair:()=>Yu,unmarshalSecp256k1PrivateKey:()=>qu,unmarshalSecp256k1PublicKey:()=>Ku});var a={};n.r(a),n.d(a,{abortedError:()=>ky,closeFailedError:()=>wy,deleteFailedError:()=>Sy,getFailedError:()=>Ay,hasFailedError:()=>Cy,notFoundError:()=>Ty,openFailedError:()=>by,putFailedError:()=>Ey});var u=n(47652),l=n(99491),c=n(69458),f=n(48236);async function d(e){let t;switch(t="string"===typeof e?e:(0,f.Z)(e),t){case"dag-cbor":return Promise.resolve().then(n.bind(n,5025));case"dag-pb":return Promise.resolve().then(n.bind(n,20099));case"git-raw":throw new Error("git-raw is unsupported until https://github.com/ipld/js-ipld-git is updated.");case"raw":return Promise.resolve().then(n.bind(n,6985));case"json":return Promise.resolve().then(n.bind(n,38792));case"dag-json":return Promise.resolve().then(n.bind(n,56161));case"dag-jose":return n.e(259).then(n.bind(n,79259));default:throw new Error(`unsupported codec: ${e}=${t}`)}}var h=n(19178);function p(e){return e.startsWith("/")?e:`/${e}`}async function g(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18;const o=await d(t),i=await(0,h.C)(r),s=o.encode(n),a=await i.digest(s),u=c.k0.createV1(o.code,a);return e.blockstore.put(u,s)}var y=n(5025),m=n(71178),v=n(74561),b=n.n(v);const w={SHA2_256:18,LENGTH:32,DAG_PB:112},E=40;function A(e,t){if(!e.length)throw new Error("Unexpected end of data");const n=b().decode(e);return t.seek(b().decode.bytes),n}const S={Null:e=>null===e?e:void 0,Int:e=>Number.isInteger(e)?e:void 0,Float:e=>"number"===typeof e&&Number.isFinite(e)?e:void 0,String:e=>"string"===typeof e?e:void 0,Bool:e=>"boolean"===typeof e?e:void 0,Bytes:e=>e instanceof Uint8Array?e:void 0,Link:e=>null!==e&&"object"===typeof e&&e.asCID===e?e:void 0,List:e=>Array.isArray(e)?e:void 0,Map:e=>null===e||"object"!==typeof e||e.asCID===e||Array.isArray(e)||e instanceof Uint8Array?void 0:e},C={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":S.Link,"CarV1HeaderOrV2Pragma > roots (anon)":e=>{if(void 0!==S.List(e)){for(let t=0;t<e.length;t++){let n=e[t];if(n=C["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](n),void 0===n)return;if(n!==e[t]){const n=e.slice(0,t);for(let r=t;r<e.length;r++){let t=e[r];if(t=C["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),void 0===t)return;n.push(t)}return n}}return e}},Int:S.Int,CarV1HeaderOrV2Pragma:e=>{if(void 0===S.Map(e))return;const t=Object.entries(e);let n=e,r=1;for(let o=0;o<t.length;o++){const[i,s]=t[o];switch(i){case"roots":{const r=C["CarV1HeaderOrV2Pragma > roots (anon)"](e[i]);if(void 0===r)return;if(r!==s||n!==e){if(n===e){n={};for(let e=0;e<o;e++)n[t[e][0]]=t[e][1]}n.roots=r}}break;case"version":{r--;const a=C.Int(e[i]);if(void 0===a)return;if(a!==s||n!==e){if(n===e){n={};for(let e=0;e<o;e++)n[t[e][0]]=t[e][1]}n.version=a}}break;default:return}}return r>0?void 0:n}},T={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":S.Link,"CarV1HeaderOrV2Pragma > roots (anon)":e=>{if(void 0!==S.List(e)){for(let t=0;t<e.length;t++){let n=e[t];if(n=T["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](n),void 0===n)return;if(n!==e[t]){const n=e.slice(0,t);for(let r=t;r<e.length;r++){let t=e[r];if(t=T["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),void 0===t)return;n.push(t)}return n}}return e}},Int:S.Int,CarV1HeaderOrV2Pragma:e=>{if(void 0===S.Map(e))return;const t=Object.entries(e);let n=e,r=1;for(let o=0;o<t.length;o++){const[i,s]=t[o];switch(i){case"roots":{const r=T["CarV1HeaderOrV2Pragma > roots (anon)"](s);if(void 0===r)return;if(r!==s||n!==e){if(n===e){n={};for(let e=0;e<o;e++)n[t[e][0]]=t[e][1]}n.roots=r}}break;case"version":{r--;const i=T.Int(s);if(void 0===i)return;if(i!==s||n!==e){if(n===e){n={};for(let e=0;e<o;e++)n[t[e][0]]=t[e][1]}n.version=i}}break;default:return}}return r>0?void 0:n}},k={toTyped:C.CarV1HeaderOrV2Pragma,toRepresentation:T.CarV1HeaderOrV2Pragma};const x=["string","number","bigint","symbol"],I=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function _(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(x.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const n=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(I.includes(t))return t;return}(e);return n||"Object"}class O{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}O.uint=new O(0,"uint",!0),O.negint=new O(1,"negint",!0),O.bytes=new O(2,"bytes",!0),O.string=new O(3,"string",!0),O.array=new O(4,"array",!1),O.map=new O(5,"map",!1),O.tag=new O(6,"tag",!1),O.float=new O(7,"float",!0),O.false=new O(7,"false",!0),O.true=new O(7,"true",!0),O.null=new O(7,"null",!0),O.undefined=new O(7,"undefined",!0),O.break=new O(7,"break",!0);class N{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const P=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,D=new TextDecoder,B=new TextEncoder;function R(e){return P&&globalThis.Buffer.isBuffer(e)}const L=P?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):$(e,t,n):(e,t,n)=>n-t>64?D.decode(e.subarray(t,n)):$(e,t,n),F=P?e=>e.length>64?globalThis.Buffer.from(e):z(e):e=>e.length>64?B.encode(e):z(e),M=P?(e,t,n)=>R(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),U=P?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),function(e){return e instanceof Uint8Array?R(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},j=P?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function z(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t}function $(e,t,n){const r=[];for(;t<n;){const o=e[t];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=n){let n,r,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:n=e[t+1],128===(192&n)&&(u=(31&o)<<6|63&n,u>127&&(i=u));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(u=(15&o)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),t+=s}return function(e){const t=e.length;if(t<=H)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=H));return n}(r)}const H=4096;const V="CBOR decode error:",G="CBOR encode error:",Z=[];function W(e,t,n){if(e.length-t<n)throw new Error(`${V} not enough data for type`)}Z[23]=1,Z[24]=2,Z[25]=3,Z[26]=5,Z[27]=9;const q=[24,256,65536,4294967296,BigInt("18446744073709551616")];function K(e,t,n){W(e,t,1);const r=e[t];if(!0===n.strict&&r<q[0])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);return r}function Y(e,t,n){W(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<q[1])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);return r}function J(e,t,n){W(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<q[2])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);return r}function X(e,t,n){W(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<q[3])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error(`${V} integers outside of the safe integer range are not supported`)}function Q(e,t){return ee(e,0,t.value)}function ee(e,t,n){if(n<q[0]){const r=Number(n);e.push([t|r])}else if(n<q[1]){const r=Number(n);e.push([24|t,r])}else if(n<q[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<q[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<q[4]))throw new Error(`${V} encountered BigInt larger than allowable range`);{const n=[27|t,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,e.push(n)}}}Q.encodedSize=function(e){return ee.encodedSize(e.value)},ee.encodedSize=function(e){return e<q[0]?1:e<q[1]?2:e<q[2]?3:e<q[3]?5:9},Q.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const te=BigInt(-1),ne=BigInt(1);function re(e,t){const n=t.value,r="bigint"===typeof n?n*te-ne:-1*n-1;ee(e,t.type.majorEncoded,r)}function oe(e,t,n,r){W(e,t,n+r);const o=M(e,t+n,t+n+r);return new N(O.bytes,o,n+r)}function ie(e,t,n,r){return oe(e,t,1,n)}function se(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===O.string?F(e.value):e.value),e.encodedBytes}function ae(e,t){const n=se(t);ee(e,t.type.majorEncoded,n.length),e.push(n)}function ue(e,t,n,r,o){const i=n+r;W(e,t,i);const s=new N(O.string,L(e,t+n,t+i),i);return!0===o.retainStringBytes&&(s.byteValue=M(e,t+n,t+i)),s}function le(e,t,n,r){return ue(e,t,1,n,r)}re.encodedSize=function(e){const t=e.value,n="bigint"===typeof t?t*te-ne:-1*t-1;return n<q[0]?1:n<q[1]?2:n<q[2]?3:n<q[3]?5:9},re.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},ae.encodedSize=function(e){const t=se(e);return ee.encodedSize(t.length)+t.length},ae.compareTokens=function(e,t){return n=se(e),r=se(t),n.length<r.length?-1:n.length>r.length?1:function(e,t){if(R(e)&&R(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(n,r);var n,r};const ce=ae;function fe(e,t,n,r){return new N(O.array,r,n)}function de(e,t,n,r){return fe(0,0,1,n)}function he(e,t){ee(e,O.array.majorEncoded,t.value)}function pe(e,t,n,r){return new N(O.map,r,n)}function ge(e,t,n,r){return pe(0,0,1,n)}function ye(e,t){ee(e,O.map.majorEncoded,t.value)}function me(e,t,n,r){return new N(O.tag,n,1)}function ve(e,t){ee(e,O.tag.majorEncoded,t.value)}he.compareTokens=Q.compareTokens,he.encodedSize=function(e){return ee.encodedSize(e.value)},ye.compareTokens=Q.compareTokens,ye.encodedSize=function(e){return ee.encodedSize(e.value)},ve.compareTokens=Q.compareTokens,ve.encodedSize=function(e){return ee.encodedSize(e.value)};const be=20,we=21,Ee=22,Ae=23;function Se(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${V} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${V} Infinity values are not supported`)}return new N(O.float,e,t)}function Ce(e,t,n){const r=t.value;if(!1===r)e.push([O.float.majorEncoded|be]);else if(!0===r)e.push([O.float.majorEncoded|we]);else if(null===r)e.push([O.float.majorEncoded|Ee]);else if(void 0===r)e.push([O.float.majorEncoded|Ae]);else{let t,i=!1;n&&!0===n.float64||(Ie(r),t=_e(xe,1),r===t||Number.isNaN(r)?(xe[0]=249,e.push(xe.slice(0,3)),i=!0):(Oe(r),t=Ne(xe,1),r===t&&(xe[0]=250,e.push(xe.slice(0,5)),i=!0))),i||(o=r,ke.setFloat64(0,o,!1),t=Pe(xe,1),xe[0]=251,e.push(xe.slice(0,9)))}var o}Ce.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){Ie(n);let e=_e(xe,1);if(n===e||Number.isNaN(n))return 3;if(Oe(n),e=Ne(xe,1),n===e)return 5}return 9};const Te=new ArrayBuffer(9),ke=new DataView(Te,1),xe=new Uint8Array(Te,0);function Ie(e){if(e===1/0)ke.setUint16(0,31744,!1);else if(e===-1/0)ke.setUint16(0,64512,!1);else if(Number.isNaN(e))ke.setUint16(0,32256,!1);else{ke.setFloat32(0,e);const t=ke.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)ke.setUint16(0,31744,!1);else if(0===n)ke.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?ke.setUint16(0,0):e<-14?ke.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):ke.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function _e(e,t){if(e.length-t<2)throw new Error(`${V} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let i;return i=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-i:i}function Oe(e){ke.setFloat32(0,e,!1)}function Ne(e,t){if(e.length-t<4)throw new Error(`${V} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function Pe(e,t){if(e.length-t<8)throw new Error(`${V} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function De(e,t,n){throw new Error(`${V} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Be(e){return()=>{throw new Error(`${V} ${e}`)}}Ce.compareTokens=Q.compareTokens;const Re=[];for(let Dm=0;Dm<=23;Dm++)Re[Dm]=De;Re[24]=function(e,t,n,r){return new N(O.uint,K(e,t+1,r),2)},Re[25]=function(e,t,n,r){return new N(O.uint,Y(e,t+1,r),3)},Re[26]=function(e,t,n,r){return new N(O.uint,J(e,t+1,r),5)},Re[27]=function(e,t,n,r){return new N(O.uint,X(e,t+1,r),9)},Re[28]=De,Re[29]=De,Re[30]=De,Re[31]=De;for(let Dm=32;Dm<=55;Dm++)Re[Dm]=De;Re[56]=function(e,t,n,r){return new N(O.negint,-1-K(e,t+1,r),2)},Re[57]=function(e,t,n,r){return new N(O.negint,-1-Y(e,t+1,r),3)},Re[58]=function(e,t,n,r){return new N(O.negint,-1-J(e,t+1,r),5)},Re[59]=function(e,t,n,r){const o=X(e,t+1,r);if("bigint"!==typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new N(O.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${V} integers outside of the safe integer range are not supported`);return new N(O.negint,te-BigInt(o),9)},Re[60]=De,Re[61]=De,Re[62]=De,Re[63]=De;for(let Dm=64;Dm<=87;Dm++)Re[Dm]=ie;Re[88]=function(e,t,n,r){return oe(e,t,2,K(e,t+1,r))},Re[89]=function(e,t,n,r){return oe(e,t,3,Y(e,t+1,r))},Re[90]=function(e,t,n,r){return oe(e,t,5,J(e,t+1,r))},Re[91]=function(e,t,n,r){const o=X(e,t+1,r);if("bigint"===typeof o)throw new Error(`${V} 64-bit integer bytes lengths not supported`);return oe(e,t,9,o)},Re[92]=De,Re[93]=De,Re[94]=De,Re[95]=Be("indefinite length bytes/strings are not supported");for(let Dm=96;Dm<=119;Dm++)Re[Dm]=le;Re[120]=function(e,t,n,r){return ue(e,t,2,K(e,t+1,r),r)},Re[121]=function(e,t,n,r){return ue(e,t,3,Y(e,t+1,r),r)},Re[122]=function(e,t,n,r){return ue(e,t,5,J(e,t+1,r),r)},Re[123]=function(e,t,n,r){const o=X(e,t+1,r);if("bigint"===typeof o)throw new Error(`${V} 64-bit integer string lengths not supported`);return ue(e,t,9,o,r)},Re[124]=De,Re[125]=De,Re[126]=De,Re[127]=Be("indefinite length bytes/strings are not supported");for(let Dm=128;Dm<=151;Dm++)Re[Dm]=de;Re[152]=function(e,t,n,r){return fe(0,0,2,K(e,t+1,r))},Re[153]=function(e,t,n,r){return fe(0,0,3,Y(e,t+1,r))},Re[154]=function(e,t,n,r){return fe(0,0,5,J(e,t+1,r))},Re[155]=function(e,t,n,r){const o=X(e,t+1,r);if("bigint"===typeof o)throw new Error(`${V} 64-bit integer array lengths not supported`);return fe(0,0,9,o)},Re[156]=De,Re[157]=De,Re[158]=De,Re[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${V} indefinite length items not allowed`);return fe(0,0,1,1/0)};for(let Dm=160;Dm<=183;Dm++)Re[Dm]=ge;Re[184]=function(e,t,n,r){return pe(0,0,2,K(e,t+1,r))},Re[185]=function(e,t,n,r){return pe(0,0,3,Y(e,t+1,r))},Re[186]=function(e,t,n,r){return pe(0,0,5,J(e,t+1,r))},Re[187]=function(e,t,n,r){const o=X(e,t+1,r);if("bigint"===typeof o)throw new Error(`${V} 64-bit integer map lengths not supported`);return pe(0,0,9,o)},Re[188]=De,Re[189]=De,Re[190]=De,Re[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${V} indefinite length items not allowed`);return pe(0,0,1,1/0)};for(let Dm=192;Dm<=215;Dm++)Re[Dm]=me;Re[216]=function(e,t,n,r){return new N(O.tag,K(e,t+1,r),2)},Re[217]=function(e,t,n,r){return new N(O.tag,Y(e,t+1,r),3)},Re[218]=function(e,t,n,r){return new N(O.tag,J(e,t+1,r),5)},Re[219]=function(e,t,n,r){return new N(O.tag,X(e,t+1,r),9)},Re[220]=De,Re[221]=De,Re[222]=De,Re[223]=De;for(let Dm=224;Dm<=243;Dm++)Re[Dm]=Be("simple values are not supported");Re[244]=De,Re[245]=De,Re[246]=De,Re[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${V} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new N(O.null,null,1):new N(O.undefined,void 0,1)},Re[248]=Be("simple values are not supported"),Re[249]=function(e,t,n,r){return Se(_e(e,t+1),3,r)},Re[250]=function(e,t,n,r){return Se(Ne(e,t+1),5,r)},Re[251]=function(e,t,n,r){return Se(Pe(e,t+1),9,r)},Re[252]=De,Re[253]=De,Re[254]=De,Re[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${V} indefinite length items not allowed`);return new N(O.break,void 0,1)};const Le=[];for(let Dm=0;Dm<24;Dm++)Le[Dm]=new N(O.uint,Dm,1);for(let Dm=-1;Dm>=-24;Dm--)Le[31-Dm]=new N(O.negint,Dm,1);Le[64]=new N(O.bytes,new Uint8Array(0),1),Le[96]=new N(O.string,"",1),Le[128]=new N(O.array,0,1),Le[160]=new N(O.map,0,1),Le[244]=new N(O.false,!1,1),Le[245]=new N(O.true,!0,1),Le[246]=new N(O.null,null,1);function Fe(){const e=[];return e[O.uint.major]=Q,e[O.negint.major]=re,e[O.bytes.major]=ae,e[O.string.major]=ce,e[O.array.major]=he,e[O.map.major]=ye,e[O.tag.major]=ve,e[O.float.major]=Ce,e}Fe(),new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=j(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){const n=this.chunks[0];t&&this.cursor>n.length/2?(e=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=M(n,0,this.cursor)}else e=U(this.chunks,this.cursor);return t&&this.reset(),e}};class Me{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${G} object contains circular references`);return new Me(t,e)}}const Ue={null:new N(O.null,null),undefined:new N(O.undefined,void 0),true:new N(O.true,!0),false:new N(O.false,!1),emptyArray:new N(O.array,0),emptyMap:new N(O.map,0)},je={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new N(e>=0?O.uint:O.negint,e):new N(O.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new N(O.uint,e):new N(O.negint,e),Uint8Array:(e,t,n,r)=>new N(O.bytes,e),string:(e,t,n,r)=>new N(O.string,e),boolean:(e,t,n,r)=>e?Ue.true:Ue.false,null:(e,t,n,r)=>Ue.null,undefined:(e,t,n,r)=>Ue.undefined,ArrayBuffer:(e,t,n,r)=>new N(O.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new N(O.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[Ue.emptyArray,new N(O.break)]:Ue.emptyArray;r=Me.createCheck(r,e);const o=[];let i=0;for(const s of e)o[i++]=ze(s,n,r);return n.addBreakTokens?[new N(O.array,e.length),o,new N(O.break)]:[new N(O.array,e.length),o]},Object(e,t,n,r){const o="Object"!==t,i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return!0===n.addBreakTokens?[Ue.emptyMap,new N(O.break)]:Ue.emptyMap;r=Me.createCheck(r,e);const a=[];let u=0;for(const l of i)a[u++]=[ze(l,n,r),ze(o?e.get(l):e[l],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new N(O.map,s),a,new N(O.break)]:[new N(O.map,s),a]}};je.Map=je.Object,je.Buffer=je.Uint8Array;for(const Dm of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))je[`${Dm}Array`]=je.DataView;function ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=_(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||je[r];if("function"===typeof o){const i=o(e,r,t,n);if(null!=i)return i}const i=je[r];if(!i)throw new Error(`${G} unsupported type: ${r}`);return i(e,r,t,n)}Symbol.for("DONE"),Symbol.for("BREAK");Fe();new N(O.map,2),new N(O.string,"version"),new N(O.uint,1),new N(O.string,"roots"),new N(O.tag,42);async function $e(e,t){const n=A(await e.upTo(8),e);if(0===n)throw new Error("Invalid CAR header (zero length)");const r=await e.exactly(n,!0),o=(0,y.decode)(r);if(void 0===k.toTyped(o))throw new Error("Invalid CAR header format");if(1!==o.version&&2!==o.version||void 0!==t&&o.version!==t)throw new Error(`Invalid CAR version: ${o.version}${void 0!==t?` (expected ${t})`:""}`);if(1===o.version){if(!Array.isArray(o.roots))throw new Error("Invalid CAR header format");return o}if(void 0!==o.roots)throw new Error("Invalid CAR header format");const i=function(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;return{version:2,characteristics:[t.getBigUint64(n,!0),t.getBigUint64(n+=8,!0)],dataOffset:Number(t.getBigUint64(n+=8,!0)),dataSize:Number(t.getBigUint64(n+=8,!0)),indexOffset:Number(t.getBigUint64(n+=8,!0))}}(await e.exactly(E,!0));e.seek(i.dataOffset-e.pos);const s=await $e(e,1);return Object.assign(s,i)}async function He(e){const t=await e.exactly(2,!1);if(t[0]===w.SHA2_256&&t[1]===w.LENGTH){const t=await e.exactly(34,!0),n=m.Jx(t);return u.k0.create(0,w.DAG_PB,n)}const n=A(await e.upTo(8),e);if(1!==n)throw new Error(`Unexpected CID version (${n})`);const r=A(await e.upTo(8),e),o=await e.exactly(function(e){b().decode(e);const t=b().decode.bytes,n=b().decode(e.subarray(b().decode.bytes));return t+b().decode.bytes+n}(await e.upTo(8)),!0),i=m.Jx(o);return u.k0.create(n,r,i)}async function Ve(e){const t=e.pos;let n=A(await e.upTo(8),e);if(0===n)throw new Error("Invalid CAR section (zero length)");n+=e.pos-t;return{cid:await He(e),length:n,blockLength:n-Number(e.pos-t)}}async function Ge(e){const{cid:t,blockLength:n}=await Ve(e);return{bytes:await e.exactly(n,!0),cid:t}}async function Ze(e){const t=e.pos,{cid:n,length:r,blockLength:o}=await Ve(e),i={cid:n,length:r,blockLength:o,offset:t,blockOffset:e.pos};return e.seek(i.blockLength),i}function We(e){const t=(async()=>{const t=await $e(e);if(2===t.version){const n=e.pos-t.dataOffset;e=function(e,t){let n=0;return{async upTo(r){let o=await e.upTo(r);return o.length+n>t&&(o=o.subarray(0,t-n)),o},async exactly(r){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=await e.exactly(r,o);if(i.length+n>t)throw new Error("Unexpected end of data");return o&&(n+=r),i},seek(t){n+=t,e.seek(t)},get pos(){return e.pos}}}(e,t.dataSize-n)}return t})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await Ge(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await Ze(e)}}}function qe(e){let t=0;return{upTo:async n=>e.subarray(t,t+Math.min(n,e.length-t)),async exactly(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n>e.length-t)throw new Error("Unexpected end of data");const o=e.subarray(t,t+n);return r&&(t+=n),o},seek(e){t+=e},get pos(){return t}}}function Ke(e){const t=e[Symbol.asyncIterator]();return function(e){let t=0,n=0,r=0,o=new Uint8Array(0);const i=async t=>{n=o.length-r;const i=[o.subarray(r)];for(;n<t;){const t=await e();if(null==t)break;n<0?t.length>n&&i.push(t.subarray(-n)):i.push(t),n+=t.length}o=new Uint8Array(i.reduce(((e,t)=>e+t.length),0));let s=0;for(const e of i)o.set(e,s),s+=e.length;r=0};return{upTo:async e=>(o.length-r<e&&await i(e),o.subarray(r,r+Math.min(o.length-r,e))),async exactly(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o.length-r<e&&await i(e),o.length-r<e)throw new Error("Unexpected end of data");const s=o.subarray(r,r+e);return n&&(t+=e,r+=e),s},seek(e){t+=e,r+=e},get pos(){return t}}}((async function(){const e=await t.next();return e.done?null:e.value}))}Symbol.asyncIterator;class Ye{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class Je extends Ye{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:n,iterator:r}=await Xe(e);return new Je(t,n,r)}static async fromIterable(e){const{version:t,roots:n,iterator:r}=await Qe(e);return new Je(t,n,r)}}Symbol.asyncIterator;async function Xe(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return et(qe(e))}async function Qe(e){if(!e||"function"!==typeof e[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return et(Ke(e))}async function et(e){const t=We(e),{version:n,roots:r}=await t.header();return{version:n,roots:r,iterator:t.blocks()}}Symbol.asyncIterator;var tt=n(6966),nt=n.n(tt);const rt=/(\/(ipns|ipfs|ipld)\/)?([^/]+)(\/.*)?/;function ot(e){return null!=e}const it=e=>(t,n)=>{let r=e(t);const o=n.split("/").filter((e=>e));for(;o.length>0;){const e=o.shift();if(null==e)throw new Error("Not found");if(r=r[e],"undefined"===typeof r)throw new Error("Not found");if(null!=c.k0.asCID(r)){return{value:r,remainderPath:o.length>0?p(o.join("/")):""}}}return{value:r,remainderPath:""}},st={"dag-pb":async(e,t)=>{if(!function(e){return ot(e)&&"object"===typeof e&&null!=e.Data&&null!=e.Links}(e))throw new Error("node is not a PBNode");const n=t.split("/");let r=n.splice(1,1)[0];"Links"===r&&(r=`${r}/${n.splice(1,1)[0]}`);let o=n.join("/"),i=e.Links.find((e=>e.Name===r));if(null==i&&r?.includes("Links")){const t=Number(r.split("/")[1]);i=e.Links[t]}let s=e;return null!=i?s=i:o=[r,...n].join("/").replace("//","/"),{value:s,remainderPath:o}}};class at extends Error{constructor(e){super(),this.options=e,this.name=this.constructor.name}toString(e){return e(this.name,this.options)}}class ut extends at{}var lt=n(20099),ct=n(67963),ft=n.n(ct),dt=n(81404);const ht=new Float32Array([-0]),pt=new Uint8Array(ht.buffer);function gt(e,t,n){ht[0]=e,t[n]=pt[0],t[n+1]=pt[1],t[n+2]=pt[2],t[n+3]=pt[3]}const yt=new Float64Array([-0]),mt=new Uint8Array(yt.buffer);function vt(e,t,n){yt[0]=e,t[n]=mt[0],t[n+1]=mt[1],t[n+2]=mt[2],t[n+3]=mt[3],t[n+4]=mt[4],t[n+5]=mt[5],t[n+6]=mt[6],t[n+7]=mt[7]}const bt=BigInt(Number.MAX_SAFE_INTEGER),wt=BigInt(Number.MIN_SAFE_INTEGER);class Et{lo;hi;constructor(e,t){this.lo=0|e,this.hi=0|t}toNumber(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.hi>>>31>0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi}toBigInt(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(0n===e)return At;if(e<bt&&e>wt)return this.fromNumber(Number(e));const t=e<0n;t&&(e=-e);let n=e>>32n,r=e-(n<<32n);return t&&(n=0n|~n,r=0n|~r,++r>St&&(r=0n,++n>St&&(n=0n))),new Et(Number(r),Number(n))}static fromNumber(e){if(0===e)return At;const t=e<0;t&&(e=-e);let n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new Et(n,r)}static from(e){return"number"===typeof e?Et.fromNumber(e):"bigint"===typeof e?Et.fromBigInt(e):"string"===typeof e?Et.fromBigInt(BigInt(e)):null!=e.low||null!=e.high?new Et(e.low>>>0,e.high>>>0):At}}const At=new Et(0,0);At.toBigInt=function(){return 0n},At.zzEncode=At.zzDecode=function(){return this},At.length=function(){return 1};const St=4294967296n;function Ct(e,t,n){const r=n;let o,i;for(let s=0;s<e.length;++s)o=e.charCodeAt(s),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&56320===(64512&(i=e.charCodeAt(s+1)))?(o=65536+((1023&o)<<10)+(1023&i),++s,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128);return n-r}function Tt(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function kt(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}class xt{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Tt(this,10);return e}int32(){return 0|this.uint32()}sint32(){const e=this.uint32();return e>>>1^-(1&e)|0}bool(){return 0!==this.uint32()}fixed32(){if(this.pos+4>this.len)throw Tt(this,4);return kt(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Tt(this,4);return 0|kt(this.buf,this.pos+=4)}float(){if(this.pos+4>this.len)throw Tt(this,4);const e=function(e,t){return pt[0]=e[t],pt[1]=e[t+1],pt[2]=e[t+2],pt[3]=e[t+3],ht[0]}(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Tt(this,4);const e=function(e,t){return mt[0]=e[t],mt[1]=e[t+1],mt[2]=e[t+2],mt[3]=e[t+3],mt[4]=e[t+4],mt[5]=e[t+5],mt[6]=e[t+6],mt[7]=e[t+7],yt[0]}(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Tt(this,e);return this.pos+=e,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const e=this.bytes();return function(e,t,n){if(n-t<1)return"";let r;const o=[];let i,s=0;for(;t<n;)i=e[t++],i<128?o[s++]=i:i>191&&i<224?o[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(i>>10),o[s++]=56320+(1023&i)):o[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r??(r=[])).push(String.fromCharCode.apply(String,o)),s=0);return null!=r?(s>0&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))}(e,0,e.length)}skip(e){if("number"===typeof e){if(this.pos+e>this.len)throw Tt(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw Tt(this)}while(0!==(128&this.buf[this.pos++]));return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new Et(0,0);let t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw Tt(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Tt(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Tt(this,8);const e=kt(this.buf,this.pos+=4),t=kt(this.buf,this.pos+=4);return new Et(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=(0,dt.CJ)(this.buf,this.pos);return this.pos+=(0,dt.P$)(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function It(e,t,n){const r=function(e){return new xt(e instanceof Uint8Array?e:e.subarray())}(e);return t.decode(r,void 0,n)}function _t(e=0){return new Uint8Array(e)}var Ot=n(45620);function Nt(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Pt=Nt("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Dt=Nt("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=_t((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Bt={utf8:Pt,"utf-8":Pt,hex:Ot.gh.base16,latin1:Dt,ascii:Dt,binary:Dt,...Ot.gh};class Rt{fn;len;next;val;constructor(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}}function Lt(){}class Ft{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const Mt=function(e){const t=e??8192,n=t>>>1;let r,o=t;return function(e){if(e<1||e>n)return _t(e);o+e>t&&(r=_t(t),o=0);const i=r.subarray(o,o+=e);return 0!==(7&o)&&(o=1+(7|o)),i}}();class Ut{len;head;tail;states;constructor(){this.len=0,this.head=new Rt(Lt,0,0),this.tail=this.head,this.states=null}_push(e,t,n){return this.tail=this.tail.next=new Rt(e,t,n),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new $t((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Ht,10,Et.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const t=Et.fromBigInt(e);return this._push(Ht,t.length(),t)}uint64Number(e){return this._push(dt.lN,(0,dt.P$)(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const t=Et.fromBigInt(e).zzEncode();return this._push(Ht,t.length(),t)}sint64Number(e){const t=Et.fromNumber(e).zzEncode();return this._push(Ht,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(jt,1,e?1:0)}fixed32(e){return this._push(Vt,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const t=Et.fromBigInt(e);return this._push(Vt,4,t.lo)._push(Vt,4,t.hi)}fixed64Number(e){const t=Et.fromNumber(e);return this._push(Vt,4,t.lo)._push(Vt,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(gt,4,e)}double(e){return this._push(vt,8,e)}bytes(e){const t=e.length>>>0;return 0===t?this._push(jt,1,0):this.uint32(t)._push(Gt,t,e)}string(e){const t=function(e){let t=0,n=0;for(let r=0;r<e.length;++r)n=e.charCodeAt(r),n<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t}(e);return 0!==t?this.uint32(t)._push(Ct,t,e):this._push(jt,1,0)}fork(){return this.states=new Ft(this),this.head=this.tail=new Rt(Lt,0,0),this.len=0,this}reset(){return null!=this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Rt(Lt,0,0),this.len=0),this}ldelim(){const e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),0!==n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this}finish(){let e=this.head.next;const t=(n=this.len,null!=globalThis.Buffer?_t(n):Mt(n));var n;let r=0;for(;null!=e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t}}function jt(e,t,n){t[n]=255&e}function zt(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}class $t extends Rt{next;constructor(e,t){super(zt,e,t),this.next=void 0}}function Ht(e,t,n){for(;0!==e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function Vt(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function Gt(e,t,n){t.set(e,n)}function Zt(e,t,n){t.set(e,n)}function Wt(e,t,n){e.length<40?Ct(e,t,n):null!=t.utf8Write?t.utf8Write(e,n):t.set(function(e,t="utf8"){const n=Bt[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}(e),n)}function qt(e,t){const n=new Ut;return t.encode(e,n,{lengthDelimited:!1}),n.finish()}var Kt,Yt,Jt,Xt;function Qt(e,t,n,r){return{name:e,type:t,encode:n,decode:r}}function en(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return Qt("enum",Kt.VARINT,(function(e,n){const r=t(e);n.int32(r)}),(function(e){return t(e.int32())}))}function tn(e,t){return Qt("message",Kt.LENGTH_DELIMITED,e,t)}null!=globalThis.Buffer&&(Ut.prototype.bytes=function(e){const t=e.length>>>0;return this.uint32(t),t>0&&this._push(Zt,t,e),this},Ut.prototype.string=function(e){const t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(Wt,t,e),this}),function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(Kt||(Kt={}));!function(e){let t,n,r;!function(e){e.Raw="Raw",e.Directory="Directory",e.File="File",e.Metadata="Metadata",e.Symlink="Symlink",e.HAMTShard="HAMTShard"}(t=e.DataType||(e.DataType={})),function(e){e[e.Raw=0]="Raw",e[e.Directory=1]="Directory",e[e.File=2]="File",e[e.Metadata=3]="Metadata",e[e.Symlink=4]="Symlink",e[e.HAMTShard=5]="HAMTShard"}(n||(n={})),function(e){e.codec=()=>en(n)}(t=e.DataType||(e.DataType={})),e.codec=()=>(null==r&&(r=tn((function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&n.fork(),null!=t.Type&&(n.uint32(8),e.DataType.codec().encode(t.Type,n)),null!=t.Data&&(n.uint32(18),n.bytes(t.Data)),null!=t.filesize&&(n.uint32(24),n.uint64(t.filesize)),null!=t.blocksizes)for(const e of t.blocksizes)n.uint32(32),n.uint64(e);null!=t.hashType&&(n.uint32(40),n.uint64(t.hashType)),null!=t.fanout&&(n.uint32(48),n.uint64(t.fanout)),null!=t.mode&&(n.uint32(56),n.uint32(t.mode)),null!=t.mtime&&(n.uint32(66),Jt.codec().encode(t.mtime,n)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={blocksizes:[]},o=null==n?t.len:t.pos+n;for(;t.pos<o;){const n=t.uint32();switch(n>>>3){case 1:r.Type=e.DataType.codec().decode(t);break;case 2:r.Data=t.bytes();break;case 3:r.filesize=t.uint64();break;case 4:r.blocksizes.push(t.uint64());break;case 5:r.hashType=t.uint64();break;case 6:r.fanout=t.uint64();break;case 7:r.mode=t.uint32();break;case 8:r.mtime=Jt.codec().decode(t,t.uint32());break;default:t.skipType(7&n)}}return r}))),r),e.encode=t=>qt(t,e.codec()),e.decode=t=>It(t,e.codec())}(Yt||(Yt={})),function(e){let t;e.codec=()=>(null==t&&(t=tn((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&t.fork(),null!=e.Seconds&&(t.uint32(8),t.int64(e.Seconds)),null!=e.FractionalNanoseconds&&(t.uint32(21),t.fixed32(e.FractionalNanoseconds)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>qt(t,e.codec()),e.decode=t=>It(t,e.codec())}(Jt||(Jt={})),function(e){let t;e.codec=()=>(null==t&&(t=tn((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&t.fork(),null!=e.MimeType&&(t.uint32(10),t.string(e.MimeType)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();if(t>>>3===1)n.MimeType=e.string();else e.skipType(7&t)}return n}))),t),e.encode=t=>qt(t,e.codec()),e.decode=t=>It(t,e.codec())}(Xt||(Xt={}));const nn={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},rn=["directory","hamt-sharded-directory"],on=parseInt("0644",8),sn=parseInt("0755",8);class an{static unmarshal(e){const t=Yt.decode(e),n=new an({type:nn[null!=t.Type?t.Type.toString():"File"],data:t.Data,blockSizes:t.blocksizes,mode:t.mode,mtime:null!=t.mtime?{secs:t.mtime.Seconds??0n,nsecs:t.mtime.FractionalNanoseconds}:void 0,fanout:t.fanout});return n._originalMode=t.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"file"};const{type:t,data:n,blockSizes:r,hashType:o,fanout:i,mtime:s,mode:a}=e;if(null!=t&&!Object.values(nn).includes(t))throw ft()(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t??"file",this.data=n,this.hashType=o,this.fanout=i,this.blockSizes=r??[],this._originalMode=0,this.mode=a,this.mtime=s}set mode(e){this._mode=null==e?this.isDirectory()?sn:on:4095&e}get mode(){return this._mode}isDirectory(){return rn.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach((t=>{e+=t})),null!=this.data&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=Yt.DataType.Raw;break;case"directory":e=Yt.DataType.Directory;break;case"file":e=Yt.DataType.File;break;case"metadata":e=Yt.DataType.Metadata;break;case"symlink":e=Yt.DataType.Symlink;break;case"hamt-sharded-directory":e=Yt.DataType.HAMTShard;break;default:throw ft()(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let t,n,r=this.data;return null!=this.data&&0!==this.data.length||(r=void 0),null!=this.mode&&(t=4294963200&this._originalMode|(this.mode??0),t!==on||this.isDirectory()||(t=void 0),t===sn&&this.isDirectory()&&(t=void 0)),null!=this.mtime&&(n={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Yt.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:n})}}var un=n(59536),ln=n(19778).Buffer;function cn(e,t){const n=(0,un.uU)(t);return n===lt.code?function(e,t,n){const r=(0,un.A$)(t);if(null==r)throw new Error(`cidStr is null for cid: ${t}`);let o="non-unixfs";const i=e.Data;if(null!=i)try{const n=an.unmarshal(i),{type:s,data:a,blockSizes:u}=n;return o="unixfs",{cid:r,type:s,data:{type:s,data:a,blockSizes:u},links:fn(e.Links,t),size:n.fileSize(),format:o}}catch(s){}return{cid:r,type:n,data:i,links:fn(e.Links,t),format:o}}(e,t,n):function(e,t,n){const r=dn(e,t);return{cid:t,type:n,data:e,links:r,size:r.reduce(((e,t)=>{let{size:n}=t;return e+n}),BigInt(0)),format:"unknown"}}(e,t,n??y.code)}function fn(e,t){return e.map(((e,n)=>({path:e.Name||`Links/${n}`,source:t,target:(0,un.A$)(e.Hash)??"",size:BigInt(e.Tsize??0),index:n})))}function dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e||"object"!==typeof e||ln.isBuffer(e)||"string"===typeof e)return[];const r=(0,un.SD)(e);if(r)return[{path:n,source:t,target:r.toString(),size:BigInt(0),index:0}];if(Array.isArray(e))return e.length?e.map(((e,r)=>dn(e,t,n?`${n}/${r}`:`${r}`))).reduce(((e,t)=>e.concat(t))).filter((e=>Boolean(e))):[];const o=Object.keys(e);if(1===o.length&&"/"===o[0]){const r=(0,un.SD)(e["/"]);if(!r)return[];const o=r.toString();return e["/"]=o,[{path:n,source:t,target:o,size:BigInt(0),index:0}]}return o.length>0?o.map((r=>dn(e[r],t,n?`${n}/${r}`:`${r}`))).reduce(((e,t)=>e.concat(t))).filter((e=>Boolean(e))):[]}async function hn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const{value:i,remainderPath:s}=await pn(e,t,n);if(null==t)throw new Error("sourceCid is null");const a=t.toString(),u=cn(i,a);r.push(u);const l=function(e,t){if(!e||"/"===e)return null;if(!t)return gn(e);if(!e.endsWith(t))throw new Error("Requested IPLD path should end with the remainder path",{fullPath:e,remainderPath:t});const n=e.substring(0,e.length-t.length);return gn(n)}(n,s),c=function(e,t){if(!t)return null;if(!e)return null;const{links:n}=e,r=n.find((e=>e.path===t));return r}(u,l);if(c)return o.push(c),hn(e,c.target,s,r,o);return{targetNode:u,canonicalPath:n?`${a}${n}`:a,localPath:n,nodes:r,pathBoundaries:o}}async function pn(e,t,n){if(null==t)throw new Error("sourceCid is null");let r=c.k0.asCID(t);null===r&&(r=c.k0.parse(t));const o=await async function(e){const t=e.code;if(void 0===t)throw new Error(`CID codec code is undefined for CID '${e.toString()}'`);const n=(0,f.Z)(t),r=await d(t),o=e=>{if(null!=r.decode)return r.decode(e);throw new Error(`codec ${t}=${n} does not have a decode function`)};return{decode:o,resolve:async(r,i)=>{if(null!=st[n])try{return await st[n](o(i),r)}catch(s){console.error(s),console.error("error resolving path for cid with codecResolverMap",e,r)}try{return it(o)(i,r)}catch(s){console.error("error resolving path for cid with resolveFn",e,r)}throw new Error(`codec ${t}=${n} does not have a resolve function`)}}}(r),i=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;const r=new AbortController;try{const o=setTimeout((()=>{r.abort("Request timed out")}),n),i=await e.blockstore.get(t,{signal:r.signal});return clearTimeout(o),i}catch(o){if(console.error("unable to get raw block",o),r.signal.aborted)throw new ut({timeout:n/1e3});throw o}}(e,r),s=o.decode(i),a=await o.resolve(n||"/",i),{remainderPath:u,resolve:l}=a;return null!=l?.Hash?await pn(e,s.Hash,u):{value:s,remainderPath:u}}function gn(e){return e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),e}BigInt.prototype.toJSON=function(){return this.toString()};const yn=()=>{const e=(0,l.Jc)({name:"explore",actionBaseType:"EXPLORE",getPromise:async e=>{let{store:t}=e;const n=t.selectExplorePathFromHash();if(!n)return null;const r=function(e){const t=rt.exec(e);return t?{namespace:t[2],cidOrFqdn:t[3],rest:t[4],address:t[0]}:null}(n);if(!r)return null;const{cidOrFqdn:o,rest:i}=r;try{const e=u.k0.parse((e=>{if(e.startsWith("/ipfs/"))return e.slice(6);if(e.startsWith("/ipns/"))throw new Error("ipns not supported yet");return e.startsWith("/")?e.slice(1):e})(o)),{targetNode:r,canonicalPath:s,localPath:a,nodes:l,pathBoundaries:c}=await hn(t.selectHelia(),e,i);return{path:n,targetNode:r,canonicalPath:s,localPath:a,nodes:l,pathBoundaries:c}}catch(s){return console.warn("Failed to resolve path",n,s),{path:n,error:s}}},staleAfter:1/0,checkIfOnline:!1});return e.selectExplorePathFromHash=(0,l.P1)("selectRouteInfo",(e=>{if(!e.url.startsWith("/explore"))return;const t=e.url.slice(8);return decodeURIComponent(t)})),e.reactExploreFetch=(0,l.P1)("selectHeliaReady","selectExploreIsLoading","selectExploreIsWaitingToRetry","selectExplorePathFromHash","selectExplore",((e,t,n,r,o)=>!(!e||t||n)&&(!(!r&&!o)&&((!o||r!==o.path)&&{actionCreator:"doFetchExplore"})))),e.doExploreLink=e=>t=>{let{store:n}=t;const{nodes:r,pathBoundaries:o}=n.selectExplore(),i=r[0].cid,s=o.map((e=>e.path));e&&e.path&&s.push(e.path),s.unshift(i);const a=`#/explore/${s.map((e=>encodeURIComponent(e))).join("/")}`;n.doUpdateHash(a)},e.doExploreUserProvidedPath=e=>t=>{let{store:n}=t;const r=e?`#/explore${p(e)}`:"#/explore";n.doUpdateHash(r)},e.doUploadUserProvidedCar=(e,t)=>async n=>{let{store:r}=n;try{const n=await async function(e,t){const n=e.stream(),r=await Je.fromIterable(nt().source(n));for await(const{cid:o,bytes:i}of r)await t.blockstore.put(o,i);return(await r.getRoots())[0]}(e,await r.selectHelia()),o=n.toString()?`#/explore${p(n.toString())}`:"#/explore";r.doUpdateHash(o);document.getElementById("car-loader-image").src=t}catch(o){console.error("Could not import car file",o)}},e};const mn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]}catch{}};class vn extends EventTarget{#e=new Map;constructor(){super(),mn(1/0,this)}listenerCount(e){const t=this.#e.get(e);return null==t?0:t.length}addEventListener(e,t,n){super.addEventListener(e,t,n);let r=this.#e.get(e);null==r&&(r=[],this.#e.set(e,r)),r.push({callback:t,once:(!0!==n&&!1!==n&&n?.once)??!1})}removeEventListener(e,t,n){super.removeEventListener(e.toString(),t??null,n);let r=this.#e.get(e);null!=r&&(r=r.filter((e=>{let{callback:n}=e;return n!==t})),this.#e.set(e,r))}dispatchEvent(e){const t=super.dispatchEvent(e);let n=this.#e.get(e.type);return null==n||(n=n.filter((e=>{let{once:t}=e;return!t})),this.#e.set(e.type,n)),t}safeDispatchEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatchEvent(new bn(e,t))}}const bn=globalThis.CustomEvent;var wn=n(9963);function En(){const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}class An{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class Sn{size;hwm;head;tail;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hwm=e.splitLimit??16,this.head=new An(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=e?.byteLength?e.byteLength:1}push(e){if(null!=e?.value&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new An(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return null!=e?.value&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}class Cn extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function Tn(e,t){let n,r,o,i=(t=t??{}).onEnd,s=new Sn,a=En();const u=e=>null!=r?r(e):(s.push(e),n),l=e=>{if(o)return n;if(!0!==t?.objectMode&&null==e?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:e})},c=e=>o?n:(o=!0,null!=e?(e=>(s=new Sn,null!=r?r({error:e}):(s.push({error:e}),n)))(e):u({done:!0}));if(n={[Symbol.asyncIterator](){return this},next:async()=>{try{return s.isEmpty()?o?{done:!0}:await new Promise(((t,o)=>{r=i=>{r=null,s.push(i);try{t(e(s))}catch(a){o(a)}return n}})):e(s)}finally{s.isEmpty()&&queueMicrotask((()=>{a.resolve(),a=En()}))}},return:()=>(s=new Sn,c(),{done:!0}),throw:e=>(c(e),{done:!0}),push:l,end:c,get readableLength(){return s.size},onEmpty:async e=>{const t=e?.signal;if(t?.throwIfAborted(),s.isEmpty())return;let n,r;null!=t&&(n=new Promise(((e,n)=>{r=()=>{n(new Cn)},t.addEventListener("abort",r)})));try{await Promise.race([a.promise,n])}finally{null!=r&&null!=t&&t?.removeEventListener("abort",r)}}},null==i)return n;const f=n;return n={[Symbol.asyncIterator](){return this},next:()=>f.next(),throw:e=>(f.throw(e),null!=i&&(i(e),i=void 0),{done:!0}),return:()=>(f.return(),null!=i&&(i(),i=void 0),{done:!0}),push:l,end:e=>(f.end(e),null!=i&&(i(e),i=void 0),n),get readableLength(){return f.readableLength},onEmpty:e=>f.onEmpty(e)},n}class kn extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=t??"ABORT_ERR"}}async function xn(e,t,n,r){const o=new kn(r?.errorMessage,r?.errorCode);return!0===n?.aborted?Promise.reject(o):new Promise(((i,s)=>{function a(){n?.removeEventListener("abort",c),e.removeEventListener(t,u),null!=r?.errorEvent&&e.removeEventListener(r.errorEvent,l)}const u=e=>{try{if(!1===r?.filter?.(e))return}catch(t){return a(),void s(t)}a(),i(e)},l=e=>{a(),s(e.detail)},c=()=>{a(),s(o)};n?.addEventListener("abort",c),e.addEventListener(t,u),null!=r?.errorEvent&&e.addEventListener(r.errorEvent,l)}))}class In extends Error{type;code;constructor(e,t,n){super(e??"The operation was aborted"),this.type="aborted",this.name=n??"AbortError",this.code=t??"ABORT_ERR"}}class _n{deferred;signal;constructor(e){this.signal=e,this.deferred=En(),this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new wn._L)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}class On{id;fn;options;recipients;status;timeline;controller;constructor(e,t){this.id=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,this.status="queued",this.fn=e,this.options=t,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,mn(1/0,this.controller.signal),this.onAbort=this.onAbort.bind(this)}abort(e){this.controller.abort(e)}onAbort(){this.recipients.reduce(((e,t)=>e&&!0===t.signal?.aborted),!0)&&(this.controller.abort(new wn._L),this.cleanup())}async join(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new _n(e.signal);return this.recipients.push(t),e.signal?.addEventListener("abort",this.onAbort),t.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();const e=await async function(e,t,n){if(null==t)return e;if(t.aborted)return Promise.reject(new In(n?.errorMessage,n?.errorCode,n?.errorName));let r;const o=new In(n?.errorMessage,n?.errorCode,n?.errorName);try{return await Promise.race([e,new Promise(((e,n)=>{r=()=>{n(o)},t.addEventListener("abort",r)}))])}finally{null!=r&&t.removeEventListener("abort",r)}}(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach((t=>{t.deferred.resolve(e)})),this.status="complete"}catch(e){this.recipients.forEach((t=>{t.deferred.reject(e)})),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach((e=>{e.cleanup(),e.signal?.removeEventListener("abort",this.onAbort)}))}}class Nn extends vn{concurrency;queue;pending;sort;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.concurrency=e.concurrency??Number.POSITIVE_INFINITY,this.pending=0,null!=e.metricName&&e.metrics?.registerMetricGroup(e.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.sort=e.sort,this.queue=[]}tryToStartAnother(){if(0===this.size)return queueMicrotask((()=>{this.safeDispatchEvent("empty")})),0===this.running&&queueMicrotask((()=>{this.safeDispatchEvent("idle")})),!1;if(this.pending<this.concurrency){let e;for(const t of this.queue)if("queued"===t.status){e=t;break}return null!=e&&(this.safeDispatchEvent("active"),this.pending++,e.run().finally((()=>{for(let t=0;t<this.queue.length;t++)if(this.queue[t]===e){this.queue.splice(t,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")})),!0)}return!1}enqueue(e){this.queue.push(e),null!=this.sort&&this.queue.sort(this.sort)}async add(e,t){t?.signal?.throwIfAborted();const n=new On(e,t);return this.enqueue(n),this.safeDispatchEvent("add"),this.tryToStartAnother(),n.join(t).then((e=>(this.safeDispatchEvent("completed",{detail:e}),this.safeDispatchEvent("success",{detail:{job:n,result:e}}),e))).catch((e=>{if("queued"===n.status)for(let t=0;t<this.queue.length;t++)if(this.queue[t]===n){this.queue.splice(t,1);break}throw this.safeDispatchEvent("error",{detail:e}),this.safeDispatchEvent("failure",{detail:{job:n,error:e}}),e}))}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach((e=>{e.abort(new wn._L)})),this.clear()}async onEmpty(e){0!==this.size&&await xn(this,"empty",e?.signal)}async onSizeLessThan(e,t){this.size<e||await xn(this,"next",t?.signal,{filter:()=>this.size<e})}async onIdle(e){0===this.pending&&0===this.size||await xn(this,"idle",e?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async*toGenerator(e){e?.signal?.throwIfAborted();const t=function(){return Tn((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({objectMode:!0}),n=e=>{null!=e?this.abort():this.clear(),t.end(e)},r=e=>{null!=e.detail&&t.push(e.detail)},o=e=>{n(e.detail)},i=()=>{n()},s=()=>{n(new wn.sv("Queue aborted","ERR_QUEUE_ABORTED"))};this.addEventListener("completed",r),this.addEventListener("error",o),this.addEventListener("idle",i),e?.signal?.addEventListener("abort",s);try{yield*t}finally{this.removeEventListener("completed",r),this.removeEventListener("error",o),this.removeEventListener("idle",i),e?.signal?.removeEventListener("abort",s),n()}}}var Pn=n(69849);const Dn="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Bn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Rn(e){if(!((t=e)instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(r.length>0&&!r.includes(e.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${e.length}`)}function Ln(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Bn(e.outputLen),Bn(e.blockLen)}function Fn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Mn(e,t){Rn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Un=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),jn=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const zn=async()=>{};async function $n(e,t,n){let r=Date.now();for(let o=0;o<e;o++){n(o);const e=Date.now()-r;e>=0&&e<t||(await zn(),r+=e)}}function Hn(e){return"string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Rn(e),e}class Vn{clone(){return this._cloneInto()}}const Gn={}.toString;function Zn(e){const t=t=>e().update(Hn(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Dn&&"function"===typeof Dn.getRandomValues)return Dn.getRandomValues(new Uint8Array(e));if(Dn&&"function"===typeof Dn.randomBytes)return Dn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function qn(e){if(isNaN(e)||e<=0)throw new wn.sv("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Wn(e)}var Kn=n(12165),Yn=n.n(Kn);function Jn(e=0){return new Uint8Array(e)}function Xn(e=0){return new Uint8Array(e)}function Qn(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const n=Xn(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}function er(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}const tr=Symbol.for("@achingbrain/uint8arraylist");function nr(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");let n=0;for(const r of e){const e=n+r.byteLength;if(t<e)return{buf:r,index:t-n};n=e}throw new RangeError("index is out of bounds")}function rr(e){return Boolean(e?.[tr])}class or{bufs;length;[tr]=!0;constructor(){this.bufs=[],this.length=0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.appendAll(t)}appendAll(e){let t=0;for(const n of e)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else{if(!rr(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");t+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=t}prepend(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.prependAll(t)}prependAll(e){let t=0;for(const n of e.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else{if(!rr(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");t+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=t}get(e){const t=nr(this.bufs,e);return t.buf[t.index]}set(e,t){const n=nr(this.bufs,e);n.buf[n.index]=t}write(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(t+n,e[n]);else{if(!rr(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<e.length;n++)this.set(t+n,e.get(n))}}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(e,t){const{bufs:n,length:r}=this._subList(e,t);return Qn(n,r)}subarray(e,t){const{bufs:n,length:r}=this._subList(e,t);return 1===n.length?n[0]:Qn(n,r)}sublist(e,t){const{bufs:n,length:r}=this._subList(e,t),o=new or;return o.length=r,o.bufs=[...n],o}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let r=0;for(let o=0;o<this.bufs.length;o++){const i=this.bufs[o],s=r,a=s+i.byteLength;if(r=a,e>=a)continue;const u=e>=s&&e<a,l=t>s&&t<=a;if(u&&l){if(e===s&&t===a){n.push(i);break}const r=e-s;n.push(i.subarray(r,r+(t-e)));break}if(u){if(0===e){n.push(i);continue}n.push(i.subarray(e-s))}else{if(l){if(t===a){n.push(i);break}n.push(i.subarray(0,t-s));break}n.push(i)}}return{bufs:n,length:t-e}}indexOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!rr(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=e instanceof Uint8Array?e:e.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const o=new Int32Array(256);for(let l=0;l<256;l++)o[l]=-1;for(let l=0;l<r;l++)o[n[l]]=l;const i=o,s=this.byteLength-n.byteLength,a=n.byteLength-1;let u;for(let l=t;l<=s;l+=u){u=0;for(let e=a;e>=0;e--){const t=this.get(l+e);if(n[e]!==t){u=Math.max(1,e-i[t]);break}}if(0===u)return l}return-1}getInt8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){const n=Xn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,e)}getInt16(e,t){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(e,t,n){const r=Jn(2);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt16(0,t,n),this.write(r,e)}getInt32(e,t){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(e,t,n){const r=Jn(4);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt32(0,t,n),this.write(r,e)}getBigInt64(e,t){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(e,t,n){const r=Jn(8);new DataView(r.buffer,r.byteOffset,r.byteLength).setBigInt64(0,t,n),this.write(r,e)}getUint8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){const n=Xn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,e)}getUint16(e,t){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(e,t,n){const r=Jn(2);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint16(0,t,n),this.write(r,e)}getUint32(e,t){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(e,t,n){const r=Jn(4);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(0,t,n),this.write(r,e)}getBigUint64(e,t){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(e,t,n){const r=Jn(8);new DataView(r.buffer,r.byteOffset,r.byteLength).setBigUint64(0,t,n),this.write(r,e)}getFloat32(e,t){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(e,t,n){const r=Jn(4);new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat32(0,t,n),this.write(r,e)}getFloat64(e,t){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(e,t,n){const r=Jn(8);new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat64(0,t,n),this.write(r,e)}equals(e){if(null==e)return!1;if(!(e instanceof or))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!er(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){const n=new or;return n.bufs=e,null==t&&(t=e.reduce(((e,t)=>e+t.byteLength),0)),n.length=t,n}}function ir(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const sr=ir("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ar=ir("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=function(e=0){return new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),ur={utf8:sr,"utf-8":sr,hex:Ot.gh.base16,latin1:ar,ascii:ar,binary:ar,...Ot.gh};function lr(e,t="utf8"){const n=ur[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}const cr=Math.LN2*Math.LN2;class fr{static create(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.005;const n=Math.round(-1*e*Math.log(t)/cr),r=Math.round(n/e*Math.LN2);return{bits:n,hashes:r}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.005);return new fr(t)}seeds;bits;buffer;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=e.seeds?this.seeds=e.seeds:this.seeds=function(e){let t,n;const r=[];for(let o=0;o<e;o++)for(t=new or(qn(4)),r[o]=t.getUint32(0,!0),n=0;n<o;n++)if(r[o]===r[n]){o--;break}return r}(e.hashes??8),this.bits=e.bits??1024,this.buffer=function(e=0){return new Uint8Array(e)}(Math.ceil(this.bits/8))}add(e){"string"===typeof e&&(e=lr(e));for(let t=0;t<this.seeds.length;t++){const n=Yn().x86.hash32(e,this.seeds[t])%this.bits;this.setbit(n)}}has(e){"string"===typeof e&&(e=lr(e));for(let t=0;t<this.seeds.length;t++){const n=Yn().x86.hash32(e,this.seeds[t])%this.bits;if(!this.getbit(n))return!1}return!0}clear(){this.buffer.fill(0)}setbit(e){let t=0,n=e;for(;n>7;)t++,n-=8;let r=this.buffer[t];r|=1<<n,this.buffer[t]=r}getbit(e){let t=0,n=e;for(;n>7;)t++,n-=8;return 0!==(this.buffer[t]&1<<n)}}class dr extends vn{intialPeerSearchComplete;requests;name;log;logger;minProviders;maxProviders;providers;evictionFilter;constructor(e,t){super(),mn(1/0,this),this.name=t.name,this.logger=e.logger,this.log=e.logger.forComponent(this.name),this.requests=new Map,this.minProviders=t.minProviders??1,this.maxProviders=t.maxProviders??5,this.providers=[],this.evictionFilter=fr.create(this.maxProviders)}async retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Pn.base64.encode(e.multihash.bytes),r=this.requests.get(n);if(null!=r)return this.log("join existing request for %c",e),r;const o=En();if(this.requests.set(n,o.promise),0===this.providers.length){let n=!1;null==this.intialPeerSearchComplete&&(n=!0,this.log=this.logger.forComponent(`${this.name}:${e}`),this.intialPeerSearchComplete=this.findProviders(e,this.minProviders,t)),await this.intialPeerSearchComplete,n&&this.log("found initial session peers for %c",e)}let i=!1;const s=new Nn({concurrency:this.maxProviders});s.addEventListener("error",(()=>{})),s.addEventListener("failure",(e=>{this.log.error("error querying provider %o, evicting from session",e.detail.job.options.provider,e.detail.error),this.evict(e.detail.job.options.provider)})),s.addEventListener("success",(e=>{i=!0,o.resolve(e.detail.result)})),s.addEventListener("idle",(()=>{i||!0===t.signal?.aborted||Promise.resolve().then((async()=>{this.log("no session peers had block for for %c, finding new providers",e);for(let e=0;e<this.minProviders&&0!==this.providers.length;e++){const e=this.providers[Math.floor(Math.random()*this.providers.length)];this.evict(e)}await this.findProviders(e,this.minProviders,t),this.log("found new providers re-retrieving %c",e),this.requests.delete(n),o.resolve(await this.retrieve(e,t))})).catch((t=>{this.log.error("could not find new providers for %c",e,t),o.reject(t)}))}));const a=n=>{s.add((async()=>this.queryProvider(e,n.detail,t)),{provider:n.detail}).catch((n=>{!0!==t.signal?.aborted&&this.log.error("error retrieving session block for %c",e,n)}))};this.addEventListener("provider",a),Promise.all([...this.providers].map((async n=>s.add((async()=>this.queryProvider(e,n,t)),{provider:n})))).catch((n=>{!0!==t.signal?.aborted&&this.log.error("error retrieving session block for %c",e,n)}));try{return await o.promise}finally{this.removeEventListener("provider",a),s.clear(),this.requests.delete(n)}}evict(e){this.evictionFilter.add(this.toEvictionKey(e));const t=this.providers.findIndex((t=>this.equals(t,e)));-1!==t&&this.providers.splice(t,1)}isEvicted(e){return this.evictionFilter.has(this.toEvictionKey(e))}hasProvider(e){return null!=this.providers.find((t=>this.equals(t,e)))||!!this.isEvicted(e)}async findProviders(e,t,n){const r=En();let o=0;return Promise.resolve().then((async()=>{this.log("finding %d-%d new provider(s) for %c",t,this.maxProviders,e);for await(const i of this.findNewProviders(e,n)){if(o===this.maxProviders||!0===n.signal?.aborted)break;if(!this.hasProvider(i)&&(this.log("found %d/%d new providers",o,this.maxProviders),this.providers.push(i),this.safeDispatchEvent("provider",{detail:i}),o++,o===t&&(this.log("session is ready"),r.resolve()),this.providers.length===this.maxProviders)){this.log("found max session peers",o);break}}if(this.log("found %d/%d new session peers",o,this.maxProviders),o<t)throw new wn.sv(`Found ${o} of ${t} ${this.name} providers for ${e}`,"ERR_INSUFFICIENT_PROVIDERS_FOUND")})).catch((t=>{this.log.error("error searching routing for potential session peers for %c",e,t.errors??t),r.reject(t)})),r.promise}}var hr=n(54636),pr=n(27922);const gr=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((e=>new pr.Netmask(e)));function yr(e){for(const t of gr)if(t.contains(e))return!0;return!1}function mr(e){return(0,hr.C)(e)?yr(e):/^::ffff:([0-9a-fA-F]{1,4}):([0-9a-fA-F]{1,4})$/.test(e)?function(e){const t=e.split(":");if(t.length<2)return!1;const n=t[t.length-1].padStart(4,"0"),r=t[t.length-2].padStart(4,"0");return yr(`${parseInt(r.substring(0,2),16)}.${parseInt(r.substring(2),16)}.${parseInt(n.substring(0,2),16)}.${parseInt(n.substring(2),16)}`)}(e):function(e){return/^::ffff:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)}(e)?function(e){const t=e.split(":");return yr(t[t.length-1])}(e):(0,hr.aY)(e)?function(e){return/^::$/.test(e)||/^::1$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}(e):void 0}var vr=n(3962),br=n(73345);const wr=[(0,br.a_)("tcp").code,(0,br.a_)("dns").code,(0,br.a_)("dnsaddr").code,(0,br.a_)("dns4").code,(0,br.a_)("dns6").code];function Er(e){let t;try{t=(0,br.a_)("sni").code}catch(n){return null}for(const[r,o]of e)if(r===t&&void 0!==o)return o;return null}function Ar(e){return e.some((([e,t])=>e===(0,br.a_)("tls").code))}function Sr(e,t,n){const r=Cr[(0,br.a_)(e).name];if(void 0===r)throw new Error(`Can't interpret protocol ${(0,br.a_)(e).name}`);const o=r(t,n);return e===(0,br.a_)("ip6").code?`[${o}]`:o}const Cr={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`tcp://${Sr(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`udp://${Sr(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Sr(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Sr(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=Ar(t),r=Er(t);if(n&&null!==r)return`https://${r}`;const o=n?"https://":"http://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=Sr(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},"http-path":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Sr(n[0],n[1]??"",t)}/${decodeURIComponent(e)}`},tls:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return Sr(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return Sr(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=Sr(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=Ar(t),r=Er(t);if(n&&null!==r)return`wss://${r}`;const o=n?"wss://":"ws://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=Sr(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},wss:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=Sr(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Sr(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Sr(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Sr(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};function Tr(e,t){const n=(0,br.HM)(e).stringTuples(),r=n.pop();if(void 0===r)throw new Error("Unexpected end of multiaddr");const o=(0,br.a_)(r[0]),i=Cr[o.name];if(null==i)throw new Error(`No interpreter found for ${o.name}`);let s=i(r[1]??"",n);return!1!==t?.assumeHttp&&wr.includes(r[0])&&(s=s.replace(/^.*:\/\//,""),s="443"===r[1]?`https://${s}`:`http://${s}`),(s.startsWith("http://")||s.startsWith("https://"))&&(s=new URL(s).toString(),s.endsWith("/")&&(s=s.substring(0,s.length-1))),s}class kr{url;#t=0;#n=0;#r=0;#o=0;#i=new Map;log;constructor(e,t){this.url=e instanceof URL?e:new URL(e),this.log=t.forComponent(`helia:trustless-gateway-block-broker:${this.url.hostname}`)}#s(e){const t=e.multihash.bytes;return Pn.base64.encode(t)}async getRawBlock(e,t){const n=new URL(this.url.toString());if(n.pathname=`/ipfs/${e.toString()}`,n.search="?format=raw",!0===t?.aborted)throw new Error(`Signal to fetch raw block for CID ${e} from gateway ${this.url} was aborted prior to fetch`);const r=this.#s(e),o=new AbortController,i=()=>{o.abort()};t?.addEventListener("abort",i);try{let t=this.#i.get(r);return null==t&&(this.#t++,t=fetch(n.toString(),{signal:o.signal,headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"}).then((async t=>{if(this.log("GET %s %d",n,t.status),!t.ok)throw this.#n++,new Error(`unable to fetch raw block for CID ${e} from gateway ${this.url}`);return this.#o++,new Uint8Array(await t.arrayBuffer())})),this.#i.set(r,t)),await t}catch(s){if(!0===t?.aborted)throw new Error(`fetching raw block for CID ${e} from gateway ${this.url} was aborted`);throw this.#n++,new Error(`unable to fetch raw block for CID ${e}`)}finally{t?.removeEventListener("abort",i),this.#i.delete(r)}}reliability(){return 0===this.#t?1:this.#r>0?-1/0:this.#o/(this.#t+3*this.#n)}incrementInvalidBlocks(){this.#r++}getStats(){return{attempts:this.#t,errors:this.#n,invalidBlocks:this.#r,successes:this.#o,pendingResponses:this.#i.size}}}function xr(e,t,n){return e.filter((e=>{if(vr.vs.matches(e)||t&&vr.tn.matches(e))return!!n||(!!vr.Rk.matches(e)||!1===mr(e.toOptions().host));if(!t&&n){const{host:t}=e.toOptions();if("127.0.0.1"===t||"localhost"===t||t.endsWith(".localhost"))return!0}return!1}))}async function*Ir(e,t,n,r,o,i){for await(const s of t.findProviders(e,i)){const e=xr(s.multiaddrs,r,o);if(0===e.length)continue;const t=Tr(e[0]);yield new kr(t,n)}}class _r extends dr{routing;allowInsecure;allowLocal;constructor(e,t){super(e,{...t,name:"helia:trustless-gateway:session"}),this.routing=e.routing,this.allowInsecure=t.allowInsecure??Nr,this.allowLocal=t.allowLocal??Pr}async queryProvider(e,t,n){this.log("fetching BLOCK for %c from %s",e,t.url);const r=await t.getRawBlock(e,n.signal);return this.log.trace("got block for %c from %s",e,t.url),await(n.validateFn?.(r)),r}findNewProviders(e){try{var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){yield*Ir(e,t.routing,t.logger,t.allowInsecure,t.allowLocal,n)}()}catch(n){return Promise.reject(n)}}toEvictionKey(e){return e.url.toString()}equals(e,t){return e.url.toString()===t.url.toString()}}class Or{allowInsecure;allowLocal;routing;log;logger;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.log=e.logger.forComponent("helia:trustless-gateway-block-broker"),this.logger=e.logger,this.routing=e.routing,this.allowInsecure=t.allowInsecure??Nr,this.allowLocal=t.allowLocal??Pr}async retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];for await(const o of Ir(e,this.routing,this.logger,this.allowInsecure,this.allowLocal,t)){this.log("getting block for %c from %s",e,o.url);try{const n=await o.getRawBlock(e,t.signal);this.log.trace("got block for %c from %s",e,o.url);try{await(t.validateFn?.(n))}catch(r){this.log.error("failed to validate block for %c from %s",e,o.url,r);continue}return n}catch(r){if(this.log.error("failed to get block for %c from %s",e,o.url,r),r instanceof Error?n.push(r):n.push(new Error(`Unable to fetch raw block for CID ${e} from gateway ${o.url}`)),!0===t.signal?.aborted){this.log.trace("request aborted while fetching raw block for CID %c from gateway %s",e,o.url);break}}}throw n.length>0?new AggregateError(n,`Unable to fetch raw block for CID ${e} from any gateway`):new Error(`Unable to fetch raw block for CID ${e} from any gateway`)}createSession(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={logger:this.logger,routing:this.routing},n={...e,allowLocal:this.allowLocal,allowInsecure:this.allowInsecure},new _r(t,n);var t,n}}const Nr=!1,Pr=!1;function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>new Or(t,e)}const Br=Symbol.for("@libp2p/content-routing"),Rr=Symbol.for("@libp2p/peer-routing");var Lr=n(42402),Fr=n(58076);function Mr(e){const t=new globalThis.AbortController;function n(){t.abort();for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)}for(const o of e){if(!0===o?.aborted){n();break}null!=o?.addEventListener&&o.addEventListener("abort",n)}const r=t.signal;return r.clear=function(){for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)},r}var Ur=n(75584),jr=n(55577),zr=n(604),$r=n(53054);function Hr(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}function Vr(e=0){return new Uint8Array(e)}function Gr(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Zr=Gr("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Wr=Gr("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=Vr((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),qr={utf8:Zr,"utf-8":Zr,hex:Ot.gh.base16,latin1:Wr,ascii:Wr,binary:Wr,...Ot.gh};function Kr(e,t="utf8"){const n=qr[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}function Yr(e){return null!=e&&("function"===typeof e.then&&"function"===typeof e.catch&&"function"===typeof e.finally)}const Jr=(e,t,n)=>e&t^e&n^t&n;class Xr extends Vn{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Un(this.buffer)}update(e){Fn(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=Hn(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Un(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fn(this),Mn(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let c=i;c<r;c++)t[c]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),u=r?4:0,l=r?0:4;e.setUint32(t+u,s,r),e.setUint32(t+l,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=Un(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)s.setUint32(4*c,l[c],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Qr=BigInt(2**32-1),eo=BigInt(32);function to(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&Qr),l:Number(e>>eo&Qr)}:{h:0|Number(e>>eo&Qr),l:0|Number(e&Qr)}}const no={fromBig:to,split:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=to(e[o],t);[n[o],r[o]]=[i,s]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<eo|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,add5H:(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,add5L:(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0)},[ro,oo]=(()=>no.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),io=new Uint32Array(80),so=new Uint32Array(80);class ao extends Xr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:u,El:l,Fh:c,Fl:f,Gh:d,Gl:h,Hh:p,Hl:g}=this;return[e,t,n,r,o,i,s,a,u,l,c,f,d,h,p,g]}set(e,t,n,r,o,i,s,a,u,l,c,f,d,h,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|l,this.Fh=0|c,this.Fl=0|f,this.Gh=0|d,this.Gl=0|h,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let v=0;v<16;v++,t+=4)io[v]=e.getUint32(t),so[v]=e.getUint32(t+=4);for(let v=16;v<80;v++){const e=0|io[v-15],t=0|so[v-15],n=no.rotrSH(e,t,1)^no.rotrSH(e,t,8)^no.shrSH(e,t,7),r=no.rotrSL(e,t,1)^no.rotrSL(e,t,8)^no.shrSL(e,t,7),o=0|io[v-2],i=0|so[v-2],s=no.rotrSH(o,i,19)^no.rotrBH(o,i,61)^no.shrSH(o,i,6),a=no.rotrSL(o,i,19)^no.rotrBL(o,i,61)^no.shrSL(o,i,6),u=no.add4L(r,a,so[v-7],so[v-16]),l=no.add4H(u,n,s,io[v-7],io[v-16]);io[v]=0|l,so[v]=0|u}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:u,Dl:l,Eh:c,El:f,Fh:d,Fl:h,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let v=0;v<80;v++){const e=no.rotrSH(c,f,14)^no.rotrSH(c,f,18)^no.rotrBH(c,f,41),t=no.rotrSL(c,f,14)^no.rotrSL(c,f,18)^no.rotrBL(c,f,41),b=c&d^~c&p,w=f&h^~f&g,E=no.add5L(m,t,w,oo[v],so[v]),A=no.add5H(E,y,e,b,ro[v],io[v]),S=0|E,C=no.rotrSH(n,r,28)^no.rotrBH(n,r,34)^no.rotrBH(n,r,39),T=no.rotrSL(n,r,28)^no.rotrBL(n,r,34)^no.rotrBL(n,r,39),k=n&o^n&s^o&s,x=r&i^r&a^i&a;y=0|p,m=0|g,p=0|d,g=0|h,d=0|c,h=0|f,({h:c,l:f}=no.add(0|u,0|l,0|A,0|S)),u=0|s,l=0|a,s=0|o,a=0|i,o=0|n,i=0|r;const I=no.add3L(S,T,x);n=no.add3H(I,A,C,k),r=0|I}({h:n,l:r}=no.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=no.add(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=no.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:l}=no.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:c,l:f}=no.add(0|this.Eh,0|this.El,0|c,0|f)),({h:d,l:h}=no.add(0|this.Fh,0|this.Fl,0|d,0|h)),({h:p,l:g}=no.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=no.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(n,r,o,i,s,a,u,l,c,f,d,h,p,g,y,m)}roundClean(){io.fill(0),so.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const uo=Zn((()=>new ao)),lo=BigInt(0),co=BigInt(1),fo=BigInt(2);function ho(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function po(e){if(!ho(e))throw new Error("Uint8Array expected")}function go(e,t){if("boolean"!==typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const yo=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function mo(e){po(e);let t="";for(let n=0;n<e.length;n++)t+=yo[e[n]];return t}function vo(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function bo(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const wo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Eo(e){return e>=wo._0&&e<=wo._9?e-wo._0:e>=wo._A&&e<=wo._F?e-(wo._A-10):e>=wo._a&&e<=wo._f?e-(wo._a-10):void 0}function Ao(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const t=Eo(e.charCodeAt(i)),n=Eo(e.charCodeAt(i+1));if(void 0===t||void 0===n){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[o]=16*t+n}return r}function So(e){return bo(mo(e))}function Co(e){return po(e),bo(mo(Uint8Array.from(e).reverse()))}function To(e,t){return Ao(e.toString(16).padStart(2*t,"0"))}function ko(e,t){return To(e,t).reverse()}function xo(e,t,n){let r;if("string"===typeof t)try{r=Ao(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else{if(!ho(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"===typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Io(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];po(t),e+=t.length}const t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}const _o=e=>"bigint"===typeof e&&lo<=e;function Oo(e,t,n){return _o(e)&&_o(t)&&_o(n)&&t<=e&&e<n}function No(e,t,n,r){if(!Oo(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function Po(e){let t;for(t=0;e>lo;e>>=co,t+=1);return t}const Do=e=>(fo<<BigInt(e-1))-co,Bo=e=>new Uint8Array(e),Ro=e=>Uint8Array.from(e);function Lo(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=Bo(e),o=Bo(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n(o,r,...t)},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bo();o=a(Ro([0]),e),r=a(),0!==e.length&&(o=a(Ro([1]),e),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return Io(...n)};return(e,t)=>{let n;for(s(),u(e);!(n=t(l()));)u();return s(),n}}const Fo={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||ho(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Mo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const o=Fo[n];if("function"!==typeof o)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if((!r||void 0!==i)&&!o(i,e))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}function Uo(e){const t=new WeakMap;return function(n){const r=t.get(n);if(void 0!==r)return r;for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];const a=e(n,...i);return t.set(n,a),a}}const jo=BigInt(0),zo=BigInt(1),$o=BigInt(2),Ho=BigInt(3),Vo=BigInt(4),Go=BigInt(5),Zo=BigInt(8);BigInt(9),BigInt(16);function Wo(e,t){const n=e%t;return n>=jo?n:t+n}function qo(e,t,n){if(n<=jo||t<jo)throw new Error("Expected power/modulo > 0");if(n===zo)return jo;let r=zo;for(;t>jo;)t&zo&&(r=r*e%n),e=e*e%n,t>>=zo;return r}function Ko(e,t,n){let r=e;for(;t-- >jo;)r*=r,r%=n;return r}function Yo(e,t){if(e===jo||t<=jo)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Wo(e,t),r=t,o=jo,i=zo,s=zo,a=jo;for(;n!==jo;){const e=r/n,t=r%n,u=o-s*e,l=i-a*e;r=n,n=t,o=s,i=a,s=u,a=l}if(r!==zo)throw new Error("invert: does not exist");return Wo(o,t)}function Jo(e){if(e%Vo===Ho){const t=(e+zo)/Vo;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Zo===Go){const t=(e-Go)/Zo;return function(e,n){const r=e.mul(n,$o),o=e.pow(r,t),i=e.mul(n,o),s=e.mul(e.mul(i,$o),o),a=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-zo)/$o;let n,r,o;for(n=e-zo,r=0;n%$o===jo;n/=$o,r++);for(o=$o;o<e&&qo(o,t,e)!==e-zo;o++);if(1===r){const t=(e+zo)/Vo;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+zo)/$o;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,u=e.pow(e.mul(e.ONE,o),n),l=e.pow(s,i),c=e.pow(s,n);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(u,zo<<BigInt(a-t-1));u=e.sqr(n),l=e.mul(l,n),c=e.mul(c,u),a=t}return l}}(e)}const Xo=(e,t)=>(Wo(e,t)&zo)===zo,Qo=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ei(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ti(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=jo)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=ei(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Jo(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:Do(o),ZERO:jo,ONE:zo,create:t=>Wo(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return jo<=t&&t<e},is0:e=>e===jo,isOdd:e=>(e&zo)===zo,neg:t=>Wo(-t,e),eql:(e,t)=>e===t,sqr:t=>Wo(t*t,e),add:(t,n)=>Wo(t+n,e),sub:(t,n)=>Wo(t-n,e),mul:(t,n)=>Wo(t*n,e),pow:(e,t)=>function(e,t,n){if(n<jo)throw new Error("Expected power > 0");if(n===jo)return e.ONE;if(n===zo)return t;let r=e.ONE,o=t;for(;n>jo;)n&zo&&(r=e.mul(r,o)),o=e.sqr(o),n>>=zo;return r}(a,e,t),div:(t,n)=>Wo(t*Yo(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Yo(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?ko(e,i):To(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?Co(e):So(e)}});return Object.freeze(a)}function ni(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ri(e){const t=ni(e);return t+Math.ceil(t/2)}const oi=BigInt(0),ii=BigInt(1),si=new WeakMap,ai=new WeakMap;function ui(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},o=e=>{r(e);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}};return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,o=t;for(;n>oi;)n&ii&&(r=r.add(o)),o=o.double(),n>>=ii;return r},precomputeWindow(e,t){const{windows:n,windowSize:r}=o(t),i=[];let s=e,a=s;for(let o=0;o<n;o++){a=s,i.push(a);for(let e=1;e<r;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(t,r,i){const{windows:s,windowSize:a}=o(t);let u=e.ZERO,l=e.BASE;const c=BigInt(2**t-1),f=2**t,d=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let o=Number(i&c);i>>=d,o>a&&(o-=f,i+=ii);const s=t,h=t+Math.abs(o)-1,p=e%2!==0,g=o<0;0===o?l=l.add(n(p,r[s])):u=u.add(n(g,r[h]))}return{p:u,f:l}},wNAFCached(e,t,n){const r=ai.get(e)||1;let o=si.get(e);return o||(o=this.precomputeWindow(e,r),1!==r&&si.set(e,n(o))),this.wNAF(r,o,t)},setWindowSize(e,t){r(t),ai.set(e,t),si.delete(e)}}}function li(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const o=Po(BigInt(n.length)),i=o>12?o-3:o>4?o-2:o?2:1,s=(1<<i)-1,a=new Array(s+1).fill(e.ZERO),u=Math.floor((t.BITS-1)/i)*i;let l=e.ZERO;for(let c=u;c>=0;c-=i){a.fill(e.ZERO);for(let e=0;e<r.length;e++){const t=r[e],o=Number(t>>BigInt(c)&BigInt(s));a[o]=a[o].add(n[e])}let t=e.ZERO;for(let n=a.length-1,r=e.ZERO;n>0;n--)r=r.add(a[n]),t=t.add(r);if(l=l.add(t),0!==c)for(let e=0;e<i;e++)l=l.double()}return l}function ci(e){return Mo(e.Fp,Qo.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Mo(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ei(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const fi=BigInt(0),di=BigInt(1),hi=BigInt(2),pi=BigInt(8),gi={zip215:!0};function yi(e){const t=function(e){const t=ci(e);return Mo(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:n,n:r,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:u}=t,l=hi<<BigInt(8*a)-di,c=n.create,f=ti(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch(r){return{isValid:!1,value:fi}}}),h=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,n)=>{if(go("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){No("coordinate "+e,t,fi,l)}function y(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const m=Uo(((e,t)=>{const{ex:r,ey:o,ez:i}=e,s=e.is0();null==t&&(t=s?pi:n.inv(i));const a=c(r*t),u=c(o*t),l=c(i*t);if(s)return{x:fi,y:di};if(l!==di)throw new Error("invZ was invalid");return{x:a,y:u}})),v=Uo((e=>{const{a:n,d:r}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:o,ey:i,ez:s,et:a}=e,u=c(o*o),l=c(i*i),f=c(s*s),d=c(f*f),h=c(u*n);if(c(f*c(h+l))!==c(d+c(r*c(u*l))))throw new Error("bad point: equation left != right (1)");if(c(o*i)!==c(s*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r,g("x",e),g("y",t),g("z",n),g("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:n}=e||{};return g("x",t),g("y",n),new b(t,n,di,c(t*n))}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.ez)));return e.map(((e,n)=>e.toAffine(t[n]))).map(b.fromAffine)}static msm(e,t){return li(b,f,e,t)}_setWindowSize(e){A.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){y(e);const{ex:t,ey:n,ez:r}=this,{ex:o,ey:i,ez:s}=e,a=c(t*s),u=c(o*r),l=c(n*s),f=c(i*r);return a===u&&l===f}is0(){return this.equals(b.ZERO)}negate(){return new b(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:e}=t,{ex:n,ey:r,ez:o}=this,i=c(n*n),s=c(r*r),a=c(hi*c(o*o)),u=c(e*i),l=n+r,f=c(c(l*l)-i-s),d=u+s,h=d-a,p=u-s,g=c(f*h),y=c(d*p),m=c(f*p),v=c(h*d);return new b(g,y,v,m)}add(e){y(e);const{a:n,d:r}=t,{ex:o,ey:i,ez:s,et:a}=this,{ex:u,ey:l,ez:f,et:d}=e;if(n===BigInt(-1)){const e=c((i-o)*(l+u)),t=c((i+o)*(l-u)),n=c(t-e);if(n===fi)return this.double();const r=c(s*hi*d),h=c(a*hi*f),p=h+r,g=t+e,y=h-r,m=c(p*n),v=c(g*y),w=c(p*y),E=c(n*g);return new b(m,v,E,w)}const h=c(o*u),p=c(i*l),g=c(a*r*d),m=c(s*f),v=c((o+i)*(u+l)-h-p),w=m-g,E=m+g,A=c(p-n*h),S=c(v*w),C=c(E*A),T=c(v*A),k=c(w*E);return new b(S,C,k,T)}subtract(e){return this.add(e.negate())}wNAF(e){return A.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;No("scalar",t,di,r);const{p:n,f:o}=this.wNAF(t);return b.normalizeZ([n,o])[0]}multiplyUnsafe(e){const t=e;return No("scalar",t,fi,r),t===fi?E:this.equals(E)||t===di?this:this.equals(w)?this.wNAF(t).p:A.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return A.unsafeLadder(this,r).is0()}toAffine(e){return m(this,e)}clearCofactor(){const{h:e}=t;return e===di?this:this.multiplyUnsafe(e)}static fromHex(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{d:o,a:i}=t,s=n.BYTES;e=xo("pointHex",e,s),go("zip215",r);const a=e.slice(),u=e[s-1];a[s-1]=-129&u;const f=Co(a),h=r?l:n.ORDER;No("pointHex.y",f,fi,h);const p=c(f*f),g=c(p-di),y=c(o*p-i);let{isValid:m,value:v}=d(g,y);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const w=(v&di)===di,E=0!==(128&u);if(!r&&v===fi&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==w&&(v=c(-v)),b.fromAffine({x:v,y:f})}static fromPrivateKey(e){return T(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),r=ko(t,n.BYTES);return r[r.length-1]|=e&di?128:0,r}toHex(){return mo(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,di,c(t.Gx*t.Gy)),b.ZERO=new b(fi,di,di,fi);const{BASE:w,ZERO:E}=b,A=ui(b,8*a);function S(e){return Wo(e,r)}function C(e){return S(Co(e))}function T(e){const t=a;e=xo("private key",e,t);const n=xo("hashed private key",i(e),2*t),r=h(n.slice(0,t)),o=n.slice(t,2*t),s=C(r),u=w.multiply(s),l=u.toRawBytes();return{head:r,prefix:o,scalar:s,point:u,pointBytes:l}}function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=Io(...n);return C(i(p(s,xo("context",e),!!o)))}const x=gi;w._setWindowSize(8);const I={getExtendedPublicKey:T,randomPrivateKey:()=>s(n.BYTES),precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};return{CURVE:t,getPublicKey:function(e){return T(e).pointBytes},sign:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=xo("message",e),o&&(e=o(e));const{prefix:s,scalar:u,pointBytes:l}=T(t),c=k(i.context,s,e),f=w.multiply(c).toRawBytes(),d=S(c+k(i.context,f,l,e)*u);return No("signature.s",d,fi,r),xo("result",Io(f,ko(d,n.BYTES)),2*a)},verify:function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;const{context:s,zip215:a}=i,u=n.BYTES;e=xo("signature",e,2*u),t=xo("message",t),void 0!==a&&go("zip215",a),o&&(t=o(t));const l=Co(e.slice(u,2*u));let c,f,d;try{c=b.fromHex(r,a),f=b.fromHex(e.slice(0,u),a),d=w.multiplyUnsafe(l)}catch(p){return!1}if(!a&&c.isSmallOrder())return!1;const h=k(s,f.toRawBytes(),c.toRawBytes(),t);return f.add(c.multiplyUnsafe(h)).subtract(d).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:I}}const mi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),vi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),bi=(BigInt(0),BigInt(1)),wi=BigInt(2),Ei=(BigInt(3),BigInt(5)),Ai=BigInt(8);function Si(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=mi,s=e*e%i*e%i,a=Ko(s,wi,i)*s%i,u=Ko(a,bi,i)*e%i,l=Ko(u,Ei,i)*u%i,c=Ko(l,t,i)*l%i,f=Ko(c,n,i)*c%i,d=Ko(f,r,i)*f%i,h=Ko(d,o,i)*d%i,p=Ko(h,o,i)*d%i,g=Ko(p,t,i)*l%i;return{pow_p_5_8:Ko(g,wi,i)*e%i,b2:s}}function Ci(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Ti(e,t){const n=mi,r=Wo(t*t*t,n),o=Wo(r*r*t,n);let i=Wo(e*r*Si(e*o).pow_p_5_8,n);const s=Wo(t*i*i,n),a=i,u=Wo(i*vi,n),l=s===e,c=s===Wo(-e,n),f=s===Wo(-e*vi,n);return l&&(i=a),(c||f)&&(i=u),Xo(i,n)&&(i=Wo(-i,n)),{isValid:l||c,value:i}}const ki=(()=>ti(mi,void 0,!0))(),xi=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ki,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ai,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:uo,randomBytes:Wn,adjustScalarBytes:Ci,uvRatio:Ti}))(),Ii=(()=>yi(xi))();const _i=32,Oi=64,Ni=32;function Pi(e,t){const n=new Uint8Array(Oi);for(let r=0;r<Ni;r++)n[r]=e[r],n[Ni+r]=t[r];return n}function Di(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const n=Vr(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}const Bi={get(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis).crypto;if(null==e?.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},Ri={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};async function Li(e,t){const n=function(e){const t=e?.algorithm??"AES-GCM";let n=e?.keyLength??16;const r=e?.nonceLength??12,o=e?.digest??"SHA-256",i=e?.saltLength??16,s=e?.iterations??32767,a=Bi.get();return n*=8,{encrypt:async function(e,u){const l=a.getRandomValues(new Uint8Array(i)),c=a.getRandomValues(new Uint8Array(r)),f={name:t,iv:c};let d;if("string"===typeof u&&(u=Kr(u)),0===u.length){d=await a.subtle.importKey("jwk",Ri,{name:"AES-GCM"},!0,["encrypt"]);try{const e={name:"PBKDF2",salt:l,iterations:s,hash:{name:o}},r=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(e,r,{name:t,length:n},!0,["encrypt"])}catch{d=await a.subtle.importKey("jwk",Ri,{name:"AES-GCM"},!0,["encrypt"])}}else{const e={name:"PBKDF2",salt:l,iterations:s,hash:{name:o}},r=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(e,r,{name:t,length:n},!0,["encrypt"])}const h=await a.subtle.encrypt(f,d,e);return Di([l,f.iv,new Uint8Array(h)])},decrypt:async function(e,u){const l=e.subarray(0,i),c=e.subarray(i,i+r),f=e.subarray(i+r),d={name:t,iv:c};let h;if("string"===typeof u&&(u=Kr(u)),0===u.length)try{const e={name:"PBKDF2",salt:l,iterations:s,hash:{name:o}},r=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);h=await a.subtle.deriveKey(e,r,{name:t,length:n},!0,["decrypt"])}catch{h=await a.subtle.importKey("jwk",Ri,{name:"AES-GCM"},!0,["decrypt"])}else{const e={name:"PBKDF2",salt:l,iterations:s,hash:{name:o}},r=await a.subtle.importKey("raw",u,{name:"PBKDF2"},!1,["deriveKey"]);h=await a.subtle.deriveKey(e,r,{name:t,length:n},!0,["decrypt"])}const p=await a.subtle.decrypt(d,h,f);return new Uint8Array(p)}}}(),r=await n.encrypt(e,t);return Pn.base64.encode(r)}var Fi,Mi,Ui,ji;!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(Fi||(Fi={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(Mi||(Mi={})),function(e){e.codec=()=>en(Mi)}(Fi||(Fi={})),function(e){let t;e.codec=()=>(null==t&&(t=tn((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),Fi.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.Type=Fi.codec().decode(e);break;case 2:n.Data=e.bytes();break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>qt(t,e.codec()),e.decode=t=>It(t,e.codec())}(Ui||(Ui={})),function(e){let t;e.codec=()=>(null==t&&(t=tn((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),Fi.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.Type=Fi.codec().decode(e);break;case 2:n.Data=e.bytes();break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>qt(t,e.codec()),e.decode=t=>It(t,e.codec())}(ji||(ji={}));class zi{_key;constructor(e){this._key=Wi(e,_i)}verify(e,t){return function(e,t,n){return Ii.verify(t,n instanceof Uint8Array?n:n.subarray(),e)}(this._key,t,e)}marshal(){return this._key}get bytes(){return Ui.encode({Type:Fi.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Hr(this.bytes,e.bytes)}hash(){const e=$r.sha256.digest(this.bytes);return Yr(e)?e.then((e=>{let{bytes:t}=e;return t})):e.bytes}}class $i{_key;_publicKey;constructor(e,t){this._key=Wi(e,Oi),this._publicKey=Wi(t,_i)}sign(e){return function(e,t){const n=e.subarray(0,Ni);return Ii.sign(t instanceof Uint8Array?t:t.subarray(),n)}(this._key,e)}get public(){return new zi(this._publicKey)}marshal(){return this._key}get bytes(){return ji.encode({Type:Fi.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Hr(this.bytes,e.bytes)}async hash(){const e=$r.sha256.digest(this.bytes);let t;return Yr(e)?({bytes:t}=await e):t=e.bytes,t}async id(){const e=zr.identity.digest(this.public.bytes);return jr.base58btc.encode(e.bytes).substring(1)}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return Li(this.bytes,e);throw new wn.sv(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function Hi(e){if(e.length>Oi){const t=(e=Wi(e,Oi+_i)).subarray(0,Oi),n=e.subarray(Oi,e.length);return new $i(t,n)}const t=(e=Wi(e,Oi)).subarray(0,Oi),n=e.subarray(_i);return new $i(t,n)}function Vi(e){return e=Wi(e,_i),new zi(e)}async function Gi(){const{privateKey:e,publicKey:t}=function(){const e=Ii.utils.randomPrivateKey(),t=Ii.getPublicKey(e);return{privateKey:Pi(e,t),publicKey:t}}();return new $i(e,t)}async function Zi(e){const{privateKey:t,publicKey:n}=function(e){if(e.length!==Ni)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,n=Ii.getPublicKey(t);return{privateKey:Pi(t,n),publicKey:n}}(e);return new $i(t,n)}function Wi(e,t){if((e=Uint8Array.from(e??[])).length!==t)throw new wn.sv(`Key must be a Uint8Array of length ${t}, got ${e.length}`,"ERR_INVALID_KEY_TYPE");return e}function qi(e,t="utf8"){const n=qr[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}async function Ki(e){const t=[await Bi.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Ji(e)],n=await Yi({privateKey:t[0],publicKey:t[1]});return{privateKey:n[0],publicKey:n[1]}}async function Yi(e){if(null==e.privateKey||null==e.publicKey)throw new wn.sv("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([Bi.get().subtle.exportKey("jwk",e.privateKey),Bi.get().subtle.exportKey("jwk",e.publicKey)])}async function Ji(e){return Bi.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Xi(e){if("RSA"!==e.kty)throw new wn.sv("invalid key type","ERR_INVALID_KEY_TYPE");if(null==e.n)throw new wn.sv("invalid key modulus","ERR_INVALID_KEY_MODULUS");return 8*Kr(e.n,"base64url").length}class Qi extends Vn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Ln(e);const n=Hn(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return Fn(this),this.iHash.update(e),this}digestInto(e){Fn(this),Rn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const es=(e,t,n)=>new Qi(e,t).update(n).digest();function ts(e,t,n,r){Ln(e);const o=function(e,t){if(void 0!==t&&"[object Object]"!==Gn.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:i,dkLen:s,asyncTick:a}=o;if(Bn(i),Bn(s),Bn(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=Hn(t),l=Hn(n),c=new Uint8Array(s),f=es.create(e,u),d=f._cloneInto().update(l);return{c:i,dkLen:s,asyncTick:a,DK:c,PRF:f,PRFSalt:d}}function ns(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}es.create=(e,t)=>new Qi(e,t);var rs=n(73351);function os(e,t){let n=0;if(1===e.length)return e[0];for(let r=e.length-1;r>=0;r--)n+=e[e.length-1-r]*Math.pow(2,t*r);return n}function is(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;let r=e,o=0,i=Math.pow(2,t);for(let s=1;s<8;s++){if(e<i){let e;if(n<0)e=new ArrayBuffer(s),o=s;else{if(n<s)return new ArrayBuffer(0);e=new ArrayBuffer(n),o=n}const i=new Uint8Array(e);for(let n=s-1;n>=0;n--){const e=Math.pow(2,n*t);i[o-n-1]=Math.floor(r/e),r-=i[o-n-1]*e}return e}i*=Math.pow(2,t)}return new ArrayBuffer(0)}function ss(){let e=0,t=0;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(const a of r)e+=a.length;const i=new ArrayBuffer(e),s=new Uint8Array(i);for(const a of r)s.set(a,t),t+=a.length;return s}function as(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=255===e[0]&&128&e[1],n=0===e[0]&&0===(128&e[1]);(t||n)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(t);for(let s=0;s<this.valueHex.byteLength;s++)n[s]=0;n[0]=128&e[0];const r=os(n,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let s=0;s<this.valueHex.byteLength;s++)i[s]=e[s];i[0]&=127;return os(i,8)-r}function us(e,t){const n=e.toString(10);if(t<n.length)return"";const r=t-n.length,o=new Array(r);for(let i=0;i<r;i++)o[i]="0";return o.join("").concat(n)}Math.log(2);function ls(){if("undefined"===typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function cs(e){let t=0,n=0;for(let o=0;o<e.length;o++){t+=e[o].byteLength}const r=new Uint8Array(t);for(let o=0;o<e.length;o++){const t=e[o];r.set(new Uint8Array(t),n),n+=t.byteLength}return r.buffer}function fs(e,t,n,r){return t instanceof Uint8Array?t.byteLength?n<0?(e.error="Wrong parameter: inputOffset less than zero",!1):r<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-n-r<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ds{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return cs(this.items)}}const hs=[new Uint8Array([1])],ps="0123456789",gs="",ys=new ArrayBuffer(0),ms=new Uint8Array(0),vs="EndOfContent",bs="OCTET STRING",ws="BIT STRING";function Es(e){var t;return t=class extends e{constructor(){var e;super(...arguments);const t=(arguments.length<=0?void 0:arguments[0])||{};this.isHexOnly=null!==(e=t.isHexOnly)&&void 0!==e&&e,this.valueHexView=t.valueHex?rs.vJ.toUint8Array(t.valueHex):ms}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,n){const r=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!fs(this,r,t,n))return-1;const o=t+n;return this.valueHexView=r.subarray(t,o),this.valueHexView.length?(this.blockLength=n,o):(this.warnings.push("Zero buffer length"),t)}toBER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",ys)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:rs.ep.ToHex(this.valueHexView)}}},t.NAME="hexBlock",t}class As{constructor(){let{blockLength:e=0,error:t=gs,warnings:n=[],valueBeforeDecode:r=ms}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=rs.vJ.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:rs.ep.ToHex(this.valueBeforeDecodeView)}}}As.NAME="baseBlock";class Ss extends As{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Ss.NAME="valueBlock";class Cs extends(Es(As)){constructor(){let{idBlock:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n,r,o;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?rs.vJ.toUint8Array(e.valueHex):ms,this.tagClass=null!==(n=e.tagClass)&&void 0!==n?n:-1,this.tagNumber=null!==(r=e.tagNumber)&&void 0!==r?r:-1,this.isConstructed=null!==(o=e.isConstructed)&&void 0!==o&&o):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",ys}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,n[0]=t}return n.buffer}if(!this.isHexOnly){const n=is(this.tagNumber,7),r=new Uint8Array(n),o=n.byteLength,i=new Uint8Array(o+1);if(i[0]=31|t,!e){for(let e=0;e<o-1;e++)i[e+1]=128|r[e];i[o]=r[o-1]}return i.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=31|t,!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)n[t+1]=128|e[t];n[this.valueHexView.byteLength]=e[e.length-1]}return n.buffer}fromBER(e,t,n){const r=rs.vJ.toUint8Array(e);if(!fs(this,r,t,n))return-1;const o=r.subarray(t,t+n);if(0===o.length)return this.error="Zero buffer length",-1;switch(192&o[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&o[0]),this.isHexOnly=!1;const i=31&o[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),n=255;for(;128&o[e];){if(t[e-1]=127&o[e],e++,e>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(e===n){n+=255;const e=new Uint8Array(n);for(let n=0;n<t.length;n++)e[n]=t[n];t=this.valueHexView=new Uint8Array(n)}}this.blockLength=e+1,t[e-1]=127&o[e];const r=new Uint8Array(e);for(let o=0;o<e;o++)r[o]=t[o];t=this.valueHexView=new Uint8Array(e),t.set(r),this.blockLength<=9?this.tagNumber=os(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}Cs.NAME="identificationBlock";class Ts extends As{constructor(){let{lenBlock:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n,r;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(n=e.longFormUsed)&&void 0!==n&&n,this.length=null!==(r=e.length)&&void 0!==r?r:0}fromBER(e,t,n){const r=rs.vJ.toUint8Array(e);if(!fs(this,r,t,n))return-1;const o=r.subarray(t,t+n);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,t+this.blockLength;const i=127&o[0];if(i>8)return this.error="Too big integer",-1;if(i+1>o.length)return this.error="End of input reached before message was fully decoded",-1;const s=t+1,a=r.subarray(s,s+i);return 0===a[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=os(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=i+1,t+this.blockLength}toBER(){let e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===n&&(t=new Uint8Array(e),t[0]=128),e;if(this.longFormUsed){const r=is(this.length,8);if(r.byteLength>127)return this.error="Too big length",ys;if(e=new ArrayBuffer(r.byteLength+1),n)return e;const o=new Uint8Array(r);t=new Uint8Array(e),t[0]=128|r.byteLength;for(let e=0;e<r.byteLength;e++)t[e+1]=o[e];return e}return e=new ArrayBuffer(1),!1===n&&(t=new Uint8Array(e),t[0]=this.length),e}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}Ts.NAME="lengthBlock";const ks={};class xs extends As{constructor(){let{name:e=gs,optional:t=!1,primitiveSchema:n,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;super(r),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new Cs(r),this.lenBlock=new Ts(r),this.valueBlock=o?new o(r):new Ss(r)}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,t){const n=t||new ds;t||Is(this);const r=this.idBlock.toBER(e);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const r=this.lenBlock.toBER(e);n.write(r),n.write(t)}return t?ys:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(){return"ascii"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ascii")?this.onAsciiEncoding():rs.ep.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${rs.ep.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;return function(e,t){if(e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),r=new Uint8Array(t);for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}(this.toBER(),e.toBER())}}function Is(e){if(e instanceof ks.Constructed)for(const t of e.valueBlock.value)Is(t)&&(e.lenBlock.isIndefiniteForm=!0);return!!e.lenBlock.isIndefiniteForm}xs.NAME="BaseBlock";class _s extends xs{constructor(){let{value:e=gs,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t,arguments.length>1?arguments[1]:void 0),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}_s.NAME="BaseStringBlock";class Os extends(Es(Ss)){constructor(){let{isHexOnly:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.isHexOnly=e}}var Ns,Ps,Ds,Bs,Rs,Ls,Fs,Ms,Us,js,zs,$s,Hs,Vs,Gs,Zs,Ws,qs,Ks,Ys,Js,Xs,Qs,ea,ta,na,ra,oa,ia,sa,aa,ua,la;Os.NAME="PrimitiveValueBlock";class ca extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Os),this.idBlock.isConstructed=!1}}function fa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;const r=t;let o=new xs({},Ss);const i=new As;if(!fs(i,e,t,n))return o.error=i.error,{offset:-1,result:o};if(!e.subarray(t,t+n).length)return o.error="Zero buffer length",{offset:-1,result:o};let s=o.idBlock.fromBER(e,t,n);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),-1===s)return o.error=o.idBlock.error,{offset:-1,result:o};if(t=s,n-=o.idBlock.blockLength,s=o.lenBlock.fromBER(e,t,n),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),-1===s)return o.error=o.lenBlock.error,{offset:-1,result:o};if(t=s,n-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let a=xs;if(1===o.idBlock.tagClass){if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};a=ks.EndOfContent;break;case 1:a=ks.Boolean;break;case 2:a=ks.Integer;break;case 3:a=ks.BitString;break;case 4:a=ks.OctetString;break;case 5:a=ks.Null;break;case 6:a=ks.ObjectIdentifier;break;case 10:a=ks.Enumerated;break;case 12:a=ks.Utf8String;break;case 13:a=ks.RelativeObjectIdentifier;break;case 14:a=ks.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:a=ks.Sequence;break;case 17:a=ks.Set;break;case 18:a=ks.NumericString;break;case 19:a=ks.PrintableString;break;case 20:a=ks.TeletexString;break;case 21:a=ks.VideotexString;break;case 22:a=ks.IA5String;break;case 23:a=ks.UTCTime;break;case 24:a=ks.GeneralizedTime;break;case 25:a=ks.GraphicString;break;case 26:a=ks.VisibleString;break;case 27:a=ks.GeneralString;break;case 28:a=ks.UniversalString;break;case 29:a=ks.CharacterString;break;case 30:a=ks.BmpString;break;case 31:a=ks.DATE;break;case 32:a=ks.TimeOfDay;break;case 33:a=ks.DateTime;break;case 34:a=ks.Duration;break;default:{const e=o.idBlock.isConstructed?new ks.Constructed:new ks.Primitive;e.idBlock=o.idBlock,e.lenBlock=o.lenBlock,e.warnings=o.warnings,o=e}}}else a=o.idBlock.isConstructed?ks.Constructed:ks.Primitive;return o=function(e,t){if(e instanceof t)return e;const n=new t;return n.idBlock=e.idBlock,n.lenBlock=e.lenBlock,n.warnings=e.warnings,n.valueBeforeDecodeView=e.valueBeforeDecodeView,n}(o,a),s=o.fromBER(e,t,o.lenBlock.isIndefiniteForm?n:o.lenBlock.length),o.valueBeforeDecodeView=e.subarray(r,r+o.blockLength),{offset:s,result:o}}function da(e){if(!e.byteLength){const e=new xs({},Ss);return e.error="Input buffer has zero length",{offset:-1,result:e}}return fa(rs.vJ.toUint8Array(e).slice(),0,e.byteLength)}Ns=ca,ks.Primitive=Ns,ca.NAME="PRIMITIVE";class ha extends Ss{constructor(){let{value:e=[],isIndefiniteForm:t=!1,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){const r=rs.vJ.toUint8Array(e);if(!fs(this,r,t,n))return-1;if(this.valueBeforeDecodeView=r.subarray(t,t+n),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let o=t;for(;i=this.isIndefiniteForm,s=n,(i?1:s)>0;){const e=fa(r,o,n);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(o=e.offset,this.blockLength+=e.result.blockLength,n-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===vs)break}var i,s;return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===vs?this.value.pop():this.warnings.push("No EndOfContent block encoded")),o}toBER(e,t){const n=t||new ds;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,n);return t?ys:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}ha.NAME="ConstructedValueBlock";class pa extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ha),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"));const t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}Ps=pa,ks.Constructed=Ps,pa.NAME="CONSTRUCTED";class ga extends Ss{fromBER(e,t,n){return t}toBER(e){return ys}}ga.override="EndOfContentValueBlock";class ya extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ga),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}Ds=ya,ks.EndOfContent=Ds,ya.NAME=vs;class ma extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Ss),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){const n=new ArrayBuffer(2);if(!e){const e=new Uint8Array(n);e[0]=5,e[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}Bs=ma,ks.Null=Bs,ma.NAME="NULL";class va extends(Es(Ss)){constructor(){let{value:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),t.valueHex?this.valueHexView=rs.vJ.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){const r=rs.vJ.toUint8Array(e);return fs(this,r,t,n)?(this.valueHexView=r.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,as.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}va.NAME="BooleanValueBlock";class ba extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},va),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}Rs=ba,ks.Boolean=Rs,ba.NAME="BOOLEAN";class wa extends(Es(ha)){constructor(){let{isConstructed:e=!1,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.isConstructed=e}fromBER(e,t,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=ha.prototype.fromBER.call(this,e,t,n),-1===r)return r;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===vs){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==bs)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,t,n),this.blockLength=n;return r}toBER(e,t){return this.isConstructed?ha.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}wa.NAME="OctetStringValueBlock";class Ea extends xs{constructor(){let{idBlock:e={},lenBlock:t={},...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r,o;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(o=n.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},wa),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const o=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(o.byteLength){const e=fa(o,0,o.byteLength);-1!==e.offset&&e.offset===n&&(this.valueBlock.value=[e.result])}}catch(r){}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?pa.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${rs.ep.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof Ea&&e.push(t.valueBlock.valueHexView);return rs.vJ.concat(e)}}Ls=Ea,ks.OctetString=Ls,Ea.NAME=bs;class Aa extends(Es(ha)){constructor(){let{unusedBits:e=0,isConstructed:t=!1,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let r=-1;if(this.isConstructed){if(r=ha.prototype.fromBER.call(this,e,t,n),-1===r)return r;for(const e of this.value){const t=e.constructor.NAME;if(t===vs){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==ws)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const n=e.valueBlock;if(this.unusedBits>0&&n.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=n.unusedBits}return r}const o=rs.vJ.toUint8Array(e);if(!fs(this,o,t,n))return-1;const i=o.subarray(t,t+n);if(this.unusedBits=i[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const e=i.subarray(1);try{if(e.byteLength){const t=fa(e,0,e.byteLength);-1!==t.offset&&t.offset===n-1&&(this.value=[t.result])}}catch(s){}}return this.valueHexView=i.subarray(1),this.blockLength=i.length,t+n}toBER(e,t){if(this.isConstructed)return ha.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return ys;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Aa.NAME="BitStringValueBlock";class Sa extends xs{constructor(){let{idBlock:e={},lenBlock:t={},...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r,o;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(o=n.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},Aa),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return pa.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const r of t)e.push(r.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}function Ca(e,t){const n=new Uint8Array([0]),r=new Uint8Array(e),o=new Uint8Array(t);let i=r.slice(0);const s=i.length-1,a=o.slice(0),u=a.length-1;let l=0;let c=0;for(let f=u<s?s:u;f>=0;f--,c++){if(!0===c<a.length)l=i[s-c]+a[u-c]+n[0];else l=i[s-c]+n[0];if(n[0]=l/10,!0===c>=i.length)i=ss(new Uint8Array([l%10]),i);else i[s-c]=l%10}return n[0]>0&&(i=ss(n,i)),i}function Ta(e){if(e>=hs.length)for(let t=hs.length;t<=e;t++){const e=new Uint8Array([0]);let n=hs[t-1].slice(0);for(let t=n.length-1;t>=0;t--){const r=new Uint8Array([(n[t]<<1)+e[0]]);e[0]=r[0]/10,n[t]=r[0]%10}e[0]>0&&(n=ss(e,n)),hs.push(n)}return hs[e]}function ka(e,t){let n=0;const r=new Uint8Array(e),o=new Uint8Array(t),i=r.slice(0),s=i.length-1,a=o.slice(0),u=a.length-1;let l,c=0;for(let f=u;f>=0;f--,c++)if(l=i[s-c]-a[u-c]-n,!0===l<0)n=1,i[s-c]=l+10;else n=0,i[s-c]=l;if(n>0)for(let f=s-u+1;f>=0;f--,c++){if(l=i[s-c]-n,!(l<0)){n=0,i[s-c]=l;break}n=1,i[s-c]=l+10}return i.slice()}Fs=Sa,ks.BitString=Fs,Sa.NAME=ws;class xa extends(Es(Ss)){constructor(){let{value:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=as.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(e){const t=e<0?-1*e:e;let n=128;for(let r=1;r<8;r++){if(t<=n){if(e<0){const e=is(n-t,8,r);return new Uint8Array(e)[0]|=128,e}let o=is(t,8,r),i=new Uint8Array(o);if(128&i[0]){const e=o.slice(0),t=new Uint8Array(e);o=new ArrayBuffer(o.byteLength+1),i=new Uint8Array(o);for(let n=0;n<e.byteLength;n++)i[n+1]=t[n];i[0]=0}return o}n*=Math.pow(2,8)}return new ArrayBuffer(0)}(e))}get valueDec(){return this._valueDec}fromDER(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=this.fromBER(e,t,n);if(-1===o)return o;const i=this.valueHexView;return 0===i[0]&&0!==(128&i[1])?this.valueHexView=i.subarray(1):0!==r&&i.length<r&&(r-i.length>1&&(r=i.length+1),this.valueHexView=i.subarray(r-i.length)),o}toDER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.valueHexView;switch(!0){case 0!==(128&t[0]):{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&0===(128&t[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,n){const r=super.fromBER(e,t,n);return-1===r||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=8*this.valueHexView.length-1;let t,n=new Uint8Array(8*this.valueHexView.length/3),r=0;const o=this.valueHexView;let i="",s=!1;for(let a=o.byteLength-1;a>=0;a--){t=o[a];for(let o=0;o<8;o++){if(1===(1&t))if(r===e)n=ka(Ta(r),n),i="-";else n=Ca(n,Ta(r));r++,t>>=1}}for(let a=0;a<n.length;a++)n[a]&&(s=!0),s&&(i+=ps.charAt(n[a]));return!1===s&&(i+=ps.charAt(0)),i}}Ms=xa,xa.NAME="IntegerValueBlock",Object.defineProperty(Ms.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class Ia extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},xa),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return ls(),BigInt(this.valueBlock.toString())}static fromBigInt(e){ls();const t=BigInt(e),n=new ds,r=t.toString(16).replace(/^-/,""),o=new Uint8Array(rs.ep.FromHex(r));if(t<0){const e=new Uint8Array(o.length+(128&o[0]?1:0));e[0]|=128;const r=BigInt(`0x${rs.ep.ToHex(e)}`)+t,i=rs.vJ.toUint8Array(rs.ep.FromHex(r.toString(16)));i[0]|=128,n.write(i)}else 128&o[0]&&n.write(new Uint8Array([0])),n.write(o);return new Ia({valueHex:n.final()})}convertToDER(){const e=new Ia({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Ia({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Us=Ia,ks.Integer=Us,Ia.NAME="INTEGER";class _a extends Ia{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}js=_a,ks.Enumerated=js,_a.NAME="ENUMERATED";class Oa extends(Es(Ss)){constructor(){let{valueDec:e=-1,isFirstSid:t=!1,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(n),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,n){if(!n)return t;const r=rs.vJ.toUint8Array(e);if(!fs(this,r,t,n))return-1;const o=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let s=0;s<n&&(this.valueHexView[s]=127&o[s],this.blockLength++,0!==(128&o[s]));s++);const i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength;s++)i[s]=this.valueHexView[s];return this.valueHexView=i,0!==(128&o[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=os(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){ls();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const n=new Uint8Array(t.length/7);for(let r=0;r<n.length;r++)n[r]=parseInt(t.slice(7*r,7*r+7),2)+(r+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,n=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)n[e]=128|t[e];return n[this.blockLength-1]=t[this.blockLength-1],n.buffer}const t=is(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",ys;const n=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),r=t.byteLength-1;for(let t=0;t<r;t++)n[t]=128|e[t];n[r]=e[r]}return n}toString(){let e="";if(this.isHexOnly)e=rs.ep.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Oa.NAME="sidBlock";class Na extends Ss{constructor(){let{value:e=gs,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const t=new Oa;if(r=t.fromBER(e,r,n),-1===r)return this.blockLength=0,this.error=t.error,r;0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,n-=t.blockLength,this.value.push(t)}return r}toBER(e){const t=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(e);if(0===r.byteLength)return this.error=this.value[n].error,ys;t.push(r)}return cs(t)}fromString(e){this.value=[];let t=0,n=0,r="",o=!1;do{if(n=e.indexOf(".",t),r=-1===n?e.substring(t):e.substring(t,n),t=n+1,o){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:return void(this.value=[])}const n=parseInt(r,10);if(isNaN(n))return;e.valueDec=n+t,o=!1}else{const e=new Oa;if(r>Number.MAX_SAFE_INTEGER){ls();const t=BigInt(r);e.valueBigInt=t}else if(e.valueDec=parseInt(r,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,o=!0),this.value.push(e)}}while(-1!==n)}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(e=`${e}.`),t?(r=`{${r}}`,this.value[n].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}Na.NAME="ObjectIdentifierValueBlock";class Pa extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Na),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}zs=Pa,ks.ObjectIdentifier=zs,Pa.NAME="OBJECT IDENTIFIER";class Da extends(Es(As)){constructor(){let{valueDec:e=0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.valueDec=e}fromBER(e,t,n){if(0===n)return t;const r=rs.vJ.toUint8Array(e);if(!fs(this,r,t,n))return-1;const o=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let s=0;s<n&&(this.valueHexView[s]=127&o[s],this.blockLength++,0!==(128&o[s]));s++);const i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength;s++)i[s]=this.valueHexView[s];return this.valueHexView=i,0!==(128&o[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=os(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,n=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)n[e]=128|t[e];return n[this.blockLength-1]=t[this.blockLength-1],n.buffer}const t=is(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",ys;const n=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),r=t.byteLength-1;for(let t=0;t<r;t++)n[t]=128|e[t];n[r]=e[r]}return n.buffer}toString(){let e="";return e=this.isHexOnly?rs.ep.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Da.NAME="relativeSidBlock";class Ba extends Ss{constructor(){let{value:e=gs,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const t=new Da;if(r=t.fromBER(e,r,n),-1===r)return this.blockLength=0,this.error=t.error,r;this.blockLength+=t.blockLength,n-=t.blockLength,this.value.push(t)}return r}toBER(e,t){const n=[];for(let r=0;r<this.value.length;r++){const t=this.value[r].toBER(e);if(0===t.byteLength)return this.error=this.value[r].error,ys;n.push(t)}return cs(n)}fromString(e){this.value=[];let t=0,n=0,r="";do{n=e.indexOf(".",t),r=-1===n?e.substring(t):e.substring(t,n),t=n+1;const o=new Da;if(o.valueDec=parseInt(r,10),isNaN(o.valueDec))return!0;this.value.push(o)}while(-1!==n);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(e=`${e}.`),t?(r=`{${r}}`,e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}Ba.NAME="RelativeObjectIdentifierValueBlock";class Ra extends xs{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Ba),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}$s=Ra,ks.RelativeObjectIdentifier=$s,Ra.NAME="RelativeObjectIdentifier";class La extends pa{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}Hs=La,ks.Sequence=Hs,La.NAME="SEQUENCE";class Fa extends pa{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}Vs=Fa,ks.Set=Vs,Fa.NAME="SET";class Ma extends(Es(Ss)){constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.isHexOnly=!0,this.value=gs}toJSON(){return{...super.toJSON(),value:this.value}}}Ma.NAME="StringValueBlock";class Ua extends Ma{}Ua.NAME="SimpleStringValueBlock";class ja extends _s{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e,Ua)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,rs.vJ.toUint8Array(e))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);this.valueBlock.value=e}}ja.NAME="SIMPLE STRING";class za extends ja{fromBuffer(e){this.valueBlock.valueHexView=rs.vJ.toUint8Array(e);try{this.valueBlock.value=rs.ep.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=rs.ep.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(rs.ep.FromUtf8String(e)),this.valueBlock.value=e}}za.NAME="Utf8StringValueBlock";class $a extends za{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}Gs=$a,ks.Utf8String=Gs,$a.NAME="UTF8String";class Ha extends ja{fromBuffer(e){this.valueBlock.value=rs.ep.ToUtf16String(e),this.valueBlock.valueHexView=rs.vJ.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(rs.ep.FromUtf16String(e))}}Ha.NAME="BmpStringValueBlock";class Va extends Ha{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}Zs=Va,ks.BmpString=Zs,Va.NAME="BMPString";class Ga extends ja{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(t);for(let r=0;r<n.length;r+=4)n[r]=n[r+3],n[r+1]=n[r+2],n[r+2]=0,n[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let r=0;r<t;r++){const t=is(e.charCodeAt(r),8),o=new Uint8Array(t);if(o.length>4)continue;const i=4-o.length;for(let e=o.length-1;e>=0;e--)n[4*r+e+i]=o[e]}this.valueBlock.value=e}}Ga.NAME="UniversalStringValueBlock";class Za extends Ga{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}Ws=Za,ks.UniversalString=Ws,Za.NAME="UniversalString";class Wa extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}qs=Wa,ks.NumericString=qs,Wa.NAME="NumericString";class qa extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}Ks=qa,ks.PrintableString=Ks,qa.NAME="PrintableString";class Ka extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}Ys=Ka,ks.TeletexString=Ys,Ka.NAME="TeletexString";class Ya extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}Js=Ya,ks.VideotexString=Js,Ya.NAME="VideotexString";class Ja extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}Xs=Ja,ks.IA5String=Xs,Ja.NAME="IA5String";class Xa extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}Qs=Xa,ks.GraphicString=Qs,Xa.NAME="GraphicString";class Qa extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}ea=Qa,ks.VisibleString=ea,Qa.NAME="VisibleString";class eu extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}ta=eu,ks.GeneralString=ta,eu.NAME="GeneralString";class tu extends ja{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}na=tu,ks.CharacterString=na,tu.NAME="CharacterString";class nu extends Qa{constructor(){let{value:e,valueDate:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,rs.vJ.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null===t)return void(this.error="Wrong input string for conversion");const n=parseInt(t[1],10);this.year=n>=50?1900+n:2e3+n,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===e){const e=new Array(7);return e[0]=us(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=us(this.month,2),e[2]=us(this.day,2),e[3]=us(this.hour,2),e[4]=us(this.minute,2),e[5]=us(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}ra=nu,ks.UTCTime=ra,nu.NAME="UTCTime";class ru extends nu{constructor(){var e;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),null!==(e=this.millisecond)&&void 0!==e||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,n=!1,r="",o="",i=0,s=0,a=0;if("Z"===e[e.length-1])r=e.substring(0,e.length-1),n=!0;else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(n){if(-1!==r.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==r.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let e=1,t=r.indexOf("+"),n="";if(-1===t&&(t=r.indexOf("-"),e=-1),-1!==t){if(n=r.substring(t+1),r=r.substring(0,t),2!==n.length&&4!==n.length)throw new Error("Wrong input string for conversion");let o=parseInt(n.substring(0,2),10);if(isNaN(o.valueOf()))throw new Error("Wrong input string for conversion");if(s=e*o,4===n.length){if(o=parseInt(n.substring(2,4),10),isNaN(o.valueOf()))throw new Error("Wrong input string for conversion");a=e*o}}}let u=r.indexOf(".");if(-1===u&&(u=r.indexOf(",")),-1!==u){const e=new Number(`0${r.substring(u)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");i=e.valueOf(),o=r.substring(0,u)}else o=r;switch(!0){case 8===o.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==u)throw new Error("Wrong input string for conversion");break;case 10===o.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==u){let e=60*i;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===o.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u){let e=60*i;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===o.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u){const e=1e3*i;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const l=t.exec(o);if(null===l)throw new Error("Wrong input string for conversion");for(let c=1;c<l.length;c++)switch(c){case 1:this.year=parseInt(l[c],10);break;case 2:this.month=parseInt(l[c],10);break;case 3:this.day=parseInt(l[c],10);break;case 4:this.hour=parseInt(l[c],10)+s;break;case 5:this.minute=parseInt(l[c],10)+a;break;case 6:this.second=parseInt(l[c],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===n){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===e){const e=[];return e.push(us(this.year,4)),e.push(us(this.month,2)),e.push(us(this.day,2)),e.push(us(this.hour,2)),e.push(us(this.minute,2)),e.push(us(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(us(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}oa=ru,ks.GeneralizedTime=oa,ru.NAME="GeneralizedTime";class ou extends $a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}ia=ou,ks.DATE=ia,ou.NAME="DATE";class iu extends $a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}sa=iu,ks.TimeOfDay=sa,iu.NAME="TimeOfDay";class su extends $a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}aa=su,ks.DateTime=aa,su.NAME="DateTime";class au extends $a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}ua=au,ks.Duration=ua,au.NAME="Duration";class uu extends $a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}la=uu,ks.TIME=la,uu.NAME="TIME";function lu(e){if(isNaN(e)||e<=0)throw new wn.sv("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Wn(e)}function cu(e){let t=e.toString(16);t.length%2>0&&(t=`0${t}`);const n=t.length/2,r=new Uint8Array(n);let o=0,i=0;for(;o<n;)r[o]=parseInt(t.slice(i,i+2),16),o+=1,i+=2;return r}function fu(e){const t=[];return e.forEach((function(e){let n=e.toString(16);n.length%2>0&&(n=`0${n}`),t.push(n)})),BigInt("0x"+t.join(""))}const du=32,hu=1e4;async function pu(e,t){const n=Bi.get(),r=new La({value:[new Ia({value:0}),new La({value:[new Pa({value:"1.2.840.113549.1.1.1"}),new ma]}),new Ea({valueHex:e.marshal()})]}).toBER(),o=new Uint8Array(r,0,r.byteLength),i=lu(16),s=await async function(e,t,n,r){const{c:o,dkLen:i,asyncTick:s,DK:a,PRF:u,PRFSalt:l}=ts(e,t,n,r);let c;const f=new Uint8Array(4),d=Un(f),h=new Uint8Array(u.outputLen);for(let p=1,g=0;g<i;p++,g+=u.outputLen){const e=a.subarray(g,g+u.outputLen);d.setInt32(0,p,!1),(c=l._cloneInto(c)).update(f).digestInto(h),e.set(h.subarray(0,e.length)),await $n(o-1,s,(()=>{u._cloneInto(c).update(h).digestInto(h);for(let t=0;t<e.length;t++)e[t]^=h[t]}))}return ns(u,l,a,c,h)}(uo,t,i,{c:hu,dkLen:du}),a=lu(16),u=await n.subtle.importKey("raw",s,"AES-CBC",!1,["encrypt"]),l=await n.subtle.encrypt({name:"AES-CBC",iv:a},u,o),c=new La({value:[new Ea({valueHex:i}),new Ia({value:hu}),new Ia({value:du}),new La({value:[new Pa({value:"1.2.840.113549.2.11"}),new ma]})]}),f=new La({value:[new Pa({value:"1.2.840.113549.1.5.13"}),new La({value:[new La({value:[new Pa({value:"1.2.840.113549.1.5.12"}),c]}),new La({value:[new Pa({value:"2.16.840.1.101.3.4.1.42"}),new Ea({valueHex:a})]})]})]}),d=new La({value:[f,new Ea({valueHex:l})]}).toBER();return["-----BEGIN ENCRYPTED PRIVATE KEY-----",...qi(new Uint8Array(d,0,d.byteLength),"base64pad").split(/(.{64})/).filter(Boolean),"-----END ENCRYPTED PRIVATE KEY-----"].join("\n")}const gu=8192;class yu{_key;constructor(e){this._key=e}verify(e,t){return async function(e,t,n){const r=await Bi.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Bi.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},r,t,n instanceof Uint8Array?n:n.subarray())}(this._key,t,e)}marshal(){return function(e){if(null==e.n||null==e.e)throw new wn.sv("JWK was missing components","ERR_INVALID_PARAMETERS");const t=new La({value:[new La({value:[new Pa({value:"1.2.840.113549.1.1.1"}),new ma]}),new Sa({valueHex:new La({value:[Ia.fromBigInt(fu(Kr(e.n,"base64url"))),Ia.fromBigInt(fu(Kr(e.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(t,0,t.byteLength)}(this._key)}get bytes(){return Ui.encode({Type:Fi.RSA,Data:this.marshal()}).subarray()}equals(e){return Hr(this.bytes,e.bytes)}hash(){const e=$r.sha256.digest(this.bytes);return Yr(e)?e.then((e=>{let{bytes:t}=e;return t})):e.bytes}}class mu{_key;_publicKey;constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return lu(16)}sign(e){return async function(e,t){const n=await Bi.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),r=await Bi.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,t instanceof Uint8Array?t:t.subarray());return new Uint8Array(r,0,r.byteLength)}(this._key,e)}get public(){if(null==this._publicKey)throw new wn.sv("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new yu(this._publicKey)}marshal(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new wn.sv("JWK was missing components","ERR_INVALID_PARAMETERS");const t=new La({value:[new Ia({value:0}),Ia.fromBigInt(fu(Kr(e.n,"base64url"))),Ia.fromBigInt(fu(Kr(e.e,"base64url"))),Ia.fromBigInt(fu(Kr(e.d,"base64url"))),Ia.fromBigInt(fu(Kr(e.p,"base64url"))),Ia.fromBigInt(fu(Kr(e.q,"base64url"))),Ia.fromBigInt(fu(Kr(e.dp,"base64url"))),Ia.fromBigInt(fu(Kr(e.dq,"base64url"))),Ia.fromBigInt(fu(Kr(e.qi,"base64url")))]}).toBER();return new Uint8Array(t,0,t.byteLength)}(this._key)}get bytes(){return ji.encode({Type:Fi.RSA,Data:this.marshal()}).subarray()}equals(e){return Hr(this.bytes,e.bytes)}hash(){const e=$r.sha256.digest(this.bytes);return Yr(e)?e.then((e=>{let{bytes:t}=e;return t})):e.bytes}async id(){return qi(await this.public.hash(),"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pkcs-8";if("pkcs-8"===t)return pu(this,e);if("libp2p-key"===t)return Li(this.bytes,e);throw new wn.sv(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}async function vu(e){const t=function(e){const{result:t}=da(e),n=t.valueBlock.value;return{n:qi(cu(n[1].toBigInt()),"base64url"),e:qi(cu(n[2].toBigInt()),"base64url"),d:qi(cu(n[3].toBigInt()),"base64url"),p:qi(cu(n[4].toBigInt()),"base64url"),q:qi(cu(n[5].toBigInt()),"base64url"),dp:qi(cu(n[6].toBigInt()),"base64url"),dq:qi(cu(n[7].toBigInt()),"base64url"),qi:qi(cu(n[8].toBigInt()),"base64url"),kty:"RSA",alg:"RS256"}}(e);if(Xi(t)>gu)throw new wn.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const n=await Ki(t);return new mu(n.privateKey,n.publicKey)}function bu(e){const t=function(e){const{result:t}=da(e),n=t.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:qi(cu(n[0].toBigInt()),"base64url"),e:qi(cu(n[1].toBigInt()),"base64url")}}(e);if(Xi(t)>gu)throw new wn.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new yu(t)}async function wu(e){if(Xi(e)>gu)throw new wn.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await Ki(e);return new mu(t.privateKey,t.publicKey)}async function Eu(e){if(e>gu)throw new wn.sv("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await async function(e){const t=await Bi.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),n=await Yi(t);return{privateKey:n[0],publicKey:n[1]}}(e);return new mu(t.privateKey,t.publicKey)}const Au=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Su=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cu=new Uint32Array(64);class Tu extends Xr{constructor(){super(64,32,8,!1),this.A=0|Su[0],this.B=0|Su[1],this.C=0|Su[2],this.D=0|Su[3],this.E=0|Su[4],this.F=0|Su[5],this.G=0|Su[6],this.H=0|Su[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let f=0;f<16;f++,t+=4)Cu[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const e=Cu[f-15],t=Cu[f-2],n=jn(e,7)^jn(e,18)^e>>>3,r=jn(t,17)^jn(t,19)^t>>>10;Cu[f]=r+Cu[f-7]+n+Cu[f-16]|0}let{A:n,B:r,C:o,D:i,E:s,F:a,G:u,H:l}=this;for(let f=0;f<64;f++){const e=l+(jn(s,6)^jn(s,11)^jn(s,25))+((c=s)&a^~c&u)+Au[f]+Cu[f]|0,t=(jn(n,2)^jn(n,13)^jn(n,22))+Jr(n,r,o)|0;l=u,u=a,a=s,s=i+e|0,i=o,o=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,r,o,i,s,a,u,l)}roundClean(){Cu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ku=Zn((()=>new Tu));function xu(e){void 0!==e.lowS&&go("lowS",e.lowS),void 0!==e.prehash&&go("prehash",e.prehash)}const{bytesToNumberBE:Iu,hexToBytes:_u}=r,Ou={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_tlv:{encode:(e,t)=>{const{Err:n}=Ou;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,o=vo(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?vo(o.length/2|128):"";return`${vo(e)}${i}${o}${t}`},decode(e,t){const{Err:n}=Ou;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const o=t[r++];let i=0;if(!!(128&o)){const e=127&o;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const s=t.subarray(r,r+e);if(s.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of s)i=i<<8|t;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=o;const s=t.subarray(r,r+i);if(s.length!==i)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=Ou;if(e<Nu)throw new t("integer: negative integers are not allowed");let n=vo(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=Ou;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return Iu(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Ou,o="string"===typeof e?_u(e):e;po(o);const{v:i,l:s}=r.decode(48,o);if(s.length)throw new t("Invalid signature: left bytes after parsing");const{v:a,l:u}=r.decode(2,i),{v:l,l:c}=r.decode(2,u);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(e){const{_tlv:t,_int:n}=Ou,r=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,r)}},Nu=BigInt(0),Pu=BigInt(1),Du=(BigInt(2),BigInt(3));BigInt(4);function Bu(e){const t=function(e){const t=ci(e);Mo(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=ti(t.n,t.nBitLength),o=t.toBytes||((e,t,r)=>{const o=t.toAffine();return Io(Uint8Array.from([4]),n.toBytes(o.x),n.toBytes(o.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function s(e){const{a:r,b:o}=t,i=n.sqr(e),s=n.mul(i,e);return n.add(n.add(s,n.mul(e,r)),o)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:i}=t;if(n&&"bigint"!==typeof e){if(ho(e)&&(e=mo(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let s;try{s="bigint"===typeof e?e:So(xo("private key",e,r))}catch(a){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return o&&(s=Wo(s,i)),No("private key",s,Pu,i),s}function u(e){if(!(e instanceof f))throw new Error("ProjectivePoint expected")}const l=Uo(((e,t)=>{const{px:r,py:o,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:o};const s=e.is0();null==t&&(t=s?n.ONE:n.inv(i));const a=n.mul(r,t),u=n.mul(o,t),l=n.mul(i,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:a,y:u}})),c=Uo((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:o}=e.toAffine();if(!n.isValid(r)||!n.isValid(o))throw new Error("bad point: x or y not FE");const i=n.sqr(o),a=s(r);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class f{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof f)throw new Error("projective point not allowed");const o=e=>n.eql(e,n.ZERO);return o(t)&&o(r)?f.ZERO:new f(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(f.fromAffine)}static fromHex(e){const t=f.fromAffine(i(xo("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(a(e))}static msm(e,t){return li(f,r,e,t)}_setWindowSize(e){h.setWindowSize(this,e)}assertValidity(){c(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:o}=this,{px:i,py:s,pz:a}=e,l=n.eql(n.mul(t,a),n.mul(i,o)),c=n.eql(n.mul(r,a),n.mul(s,o));return l&&c}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,Du),{px:i,py:s,pz:a}=this;let u=n.ZERO,l=n.ZERO,c=n.ZERO,d=n.mul(i,i),h=n.mul(s,s),p=n.mul(a,a),g=n.mul(i,s);return g=n.add(g,g),c=n.mul(i,a),c=n.add(c,c),u=n.mul(e,c),l=n.mul(o,p),l=n.add(u,l),u=n.sub(h,l),l=n.add(h,l),l=n.mul(u,l),u=n.mul(g,u),c=n.mul(o,c),p=n.mul(e,p),g=n.sub(d,p),g=n.mul(e,g),g=n.add(g,c),c=n.add(d,d),d=n.add(c,d),d=n.add(d,p),d=n.mul(d,g),l=n.add(l,d),p=n.mul(s,a),p=n.add(p,p),d=n.mul(p,g),u=n.sub(u,d),c=n.mul(p,h),c=n.add(c,c),c=n.add(c,c),new f(u,l,c)}add(e){u(e);const{px:r,py:o,pz:i}=this,{px:s,py:a,pz:l}=e;let c=n.ZERO,d=n.ZERO,h=n.ZERO;const p=t.a,g=n.mul(t.b,Du);let y=n.mul(r,s),m=n.mul(o,a),v=n.mul(i,l),b=n.add(r,o),w=n.add(s,a);b=n.mul(b,w),w=n.add(y,m),b=n.sub(b,w),w=n.add(r,i);let E=n.add(s,l);return w=n.mul(w,E),E=n.add(y,v),w=n.sub(w,E),E=n.add(o,i),c=n.add(a,l),E=n.mul(E,c),c=n.add(m,v),E=n.sub(E,c),h=n.mul(p,w),c=n.mul(g,v),h=n.add(c,h),c=n.sub(m,h),h=n.add(m,h),d=n.mul(c,h),m=n.add(y,y),m=n.add(m,y),v=n.mul(p,v),w=n.mul(g,w),m=n.add(m,v),v=n.sub(y,v),v=n.mul(p,v),w=n.add(w,v),y=n.mul(m,w),d=n.add(d,y),y=n.mul(E,w),c=n.mul(b,c),c=n.sub(c,y),y=n.mul(b,m),h=n.mul(E,h),h=n.add(h,y),new f(c,d,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return h.wNAFCached(this,e,f.normalizeZ)}multiplyUnsafe(e){No("scalar",e,Nu,t.n);const r=f.ZERO;if(e===Nu)return r;if(e===Pu)return this;const{endo:o}=t;if(!o)return h.unsafeLadder(this,e);let{k1neg:i,k1:s,k2neg:a,k2:u}=o.splitScalar(e),l=r,c=r,d=this;for(;s>Nu||u>Nu;)s&Pu&&(l=l.add(d)),u&Pu&&(c=c.add(d)),d=d.double(),s>>=Pu,u>>=Pu;return i&&(l=l.negate()),a&&(c=c.negate()),c=new f(n.mul(c.px,o.beta),c.py,c.pz),l.add(c)}multiply(e){const{endo:r,n:o}=t;let i,s;if(No("scalar",e,Pu,o),r){const{k1neg:t,k1:o,k2neg:a,k2:u}=r.splitScalar(e);let{p:l,f:c}=this.wNAF(o),{p:d,f:p}=this.wNAF(u);l=h.constTimeNegate(t,l),d=h.constTimeNegate(a,d),d=new f(n.mul(d.px,r.beta),d.py,d.pz),i=l.add(d),s=c.add(p)}else{const{p:t,f:n}=this.wNAF(e);i=t,s=n}return f.normalizeZ([i,s])[0]}multiplyAndAddUnsafe(e,t,n){const r=f.BASE,o=(e,t)=>t!==Nu&&t!==Pu&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,n));return i.is0()?void 0:i}toAffine(e){return l(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Pu)return!0;if(n)return n(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Pu?this:n?n(f,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return go("isCompressed",e),this.assertValidity(),o(f,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return go("isCompressed",e),mo(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,h=ui(f,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(e){return Oo(e,Pu,t.n)}}}function Ru(e){const t=function(e){const t=ci(e);return Mo(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(e){return Wo(e,r)}function a(e){return Yo(e,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:f}=Bu({...t,toBytes(e,t,r){const o=t.toAffine(),i=n.toBytes(o.x),s=Io;return go("isCompressed",r),r?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,n.toBytes(o.y))},fromBytes(e){const t=e.length,r=e[0],s=e.subarray(1);if(t!==o||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}{const e=So(s);if(!Oo(e,Pu,n.ORDER))throw new Error("Point is not on curve");const t=c(e);let o;try{o=n.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("Point is not on curve"+e)}return 1===(1&r)!==((o&Pu)===Pu)&&(o=n.neg(o)),{x:e,y:o}}}}),d=e=>mo(To(e,t.nByteLength));function h(e){return e>r>>Pu}const p=(e,t,n)=>So(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=xo("compactSignature",e,2*n),new g(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Ou.toSig(xo("DER",e));return new g(t,n)}assertValidity(){No("r",this.r,Pu,r),No("s",this.s,Pu,r)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:o,recovery:i}=this,l=b(xo("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const c=2===i||3===i?r+t.n:r;if(c>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=0===(1&i)?"02":"03",h=u.fromHex(f+d(c)),p=a(c),g=s(-l*p),y=s(o*p),m=u.BASE.multiplyAndAddUnsafe(h,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Ao(this.toDERHex())}toDERHex(){return Ou.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ao(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const y={isValidPrivateKey(e){try{return l(e),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=ri(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.length,o=ni(t),i=ri(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=Wo(n?So(e):Co(e),t-zo)+zo;return n?ko(s,o):To(s,o)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function m(e){const t=ho(e),n="string"===typeof e,r=(t||n)&&e.length;retu