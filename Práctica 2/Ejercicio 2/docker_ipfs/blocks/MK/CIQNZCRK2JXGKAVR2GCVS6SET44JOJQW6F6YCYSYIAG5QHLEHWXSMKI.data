(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[61],{82193:(e,t,n)=>{var r=n(1426);e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof r||"object"!==typeof r.versions||!r.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},96061:(e,t,n)=>{"use strict";n.d(t,{create:()=>xa});var r={};n.r(r),n.d(r,{base64:()=>T,base64pad:()=>D,base64url:()=>B,base64urlpad:()=>k});var s={};n.r(s),n.d(s,{base32:()=>L,base32hex:()=>z,base32hexpad:()=>G,base32hexpadupper:()=>q,base32hexupper:()=>F,base32pad:()=>H,base32padupper:()=>V,base32upper:()=>M,base32z:()=>J});var a={};n.r(a),n.d(a,{base58btc:()=>K,base58flickr:()=>X});var o={};n.r(o),n.d(o,{code:()=>Te,decode:()=>Oe,encode:()=>$e,name:()=>_e,toGeneral:()=>ke});var i={};n.r(i),n.d(i,{base10:()=>Le});var c={};n.r(c),n.d(c,{base16:()=>Me,base16upper:()=>He});var l={};n.r(l),n.d(l,{base2:()=>Ve});var u={};n.r(u),n.d(u,{base256emoji:()=>qe});var d={};n.r(d),n.d(d,{base36:()=>Je,base36upper:()=>Ke});var h={};n.r(h),n.d(h,{base8:()=>Xe});var f={};n.r(f),n.d(f,{identity:()=>We});var p={};n.r(p),n.d(p,{code:()=>et,decode:()=>nt,encode:()=>tt,name:()=>Ye});var g={};n.r(g),n.d(g,{code:()=>st,decode:()=>ot,encode:()=>at,name:()=>rt});var y={};n.r(y),n.d(y,{identity:()=>ct});var m={};n.r(m),n.d(m,{sha256:()=>ht,sha512:()=>ft});var w=n(73345),b=n(5025),v=n(56161),E=n(20099);new Uint8Array(0);function P(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var x=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var a=e.charAt(s),o=a.charCodeAt(0);if(255!==n[o])throw new TypeError(a+" is ambiguous");n[o]=s}var i=e.length,c=e.charAt(0),l=Math.log(i)/Math.log(256),u=Math.log(256)/Math.log(i);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var a=(e.length-t)*l+1>>>0,o=new Uint8Array(a);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=a-1;(0!==u||d<s)&&-1!==h;h--,d++)u+=i*o[h]>>>0,o[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");s=d,t++}if(" "!==e[t]){for(var f=a-s;f!==a&&0===o[f];)f++;for(var p=new Uint8Array(r+(a-f)),g=r;f!==a;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,s=0,a=t.length;s!==a&&0===t[s];)s++,n++;for(var o=(a-s)*u+1>>>0,l=new Uint8Array(o);s!==a;){for(var d=t[s],h=0,f=o-1;(0!==d||h<r)&&-1!==f;f--,h++)d+=256*l[f]>>>0,l[f]=d%i>>>0,d=d/i>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,s++}for(var p=o-r;p!==o&&0===l[p];)p++;for(var g=c.repeat(n);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}};const j=x;class S{name;prefix;baseEncode;constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class A{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return C(this,e)}}class U{decoders;constructor(e){this.decoders=e}or(e){return C(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(null!=n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function C(e,t){return new U({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class I{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new S(e,t,n),this.decoder=new A(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function N(e){let{name:t,prefix:n,encode:r,decode:s}=e;return new I(t,n,r,s)}function R(e){let{name:t,prefix:n,alphabet:r}=e;const{encode:s,decode:a}=j(r,t);return N({prefix:n,name:t,encode:s,decode:e=>P(a(e))})}function _(e){let{name:t,prefix:n,bitsPerChar:r,alphabet:s}=e;return N({prefix:n,name:t,encode:e=>function(e,t,n){const r="="===t[t.length-1],s=(1<<n)-1;let a="",o=0,i=0;for(let c=0;c<e.length;++c)for(i=i<<8|e[c],o+=8;o>n;)o-=n,a+=t[s&i>>o];if(0!==o&&(a+=t[s&i<<n-o]),r)for(;0!==(a.length*n&7);)a+="=";return a}(e,s,r),decode:e=>function(e,t,n,r){const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let a=e.length;for(;"="===e[a-1];)--a;const o=new Uint8Array(a*n/8|0);let i=0,c=0,l=0;for(let u=0;u<a;++u){const t=s[e[u]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);c=c<<n|t,i+=n,i>=8&&(i-=8,o[l++]=255&c>>i)}if(i>=n||0!==(255&c<<8-i))throw new SyntaxError("Unexpected end of data");return o}(e,s,r,t)})}const T=_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),D=_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),B=_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),k=_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function $(e){return B.encode(e).slice(1)}function O(e){return B.decode(`u${e}`)}const L=_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),M=_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),H=_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),V=_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),z=_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),F=_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),G=_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),q=_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),J=_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),K=R({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),X=R({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var W=function e(t,n,r){n=n||[];var s=r=r||0;for(;t>=Y;)n[r++]=255&t|Q,t/=128;for(;t&Z;)n[r++]=255&t|Q,t>>>=7;return n[r]=0|t,e.bytes=r-s+1,n},Q=128,Z=-128,Y=Math.pow(2,31);var ee=function e(t,n){var r,s=0,a=0,o=n=n||0,i=t.length;do{if(o>=i)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],s+=a<28?(r&ne)<<a:(r&ne)*Math.pow(2,a),a+=7}while(r>=te);return e.bytes=o-n,s},te=128,ne=127;var re=Math.pow(2,7),se=Math.pow(2,14),ae=Math.pow(2,21),oe=Math.pow(2,28),ie=Math.pow(2,35),ce=Math.pow(2,42),le=Math.pow(2,49),ue=Math.pow(2,56),de=Math.pow(2,63);const he={encode:W,decode:ee,encodingLength:function(e){return e<re?1:e<se?2:e<ae?3:e<oe?4:e<ie?5:e<ce?6:e<le?7:e<ue?8:e<de?9:10}};function fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[he.decode(e,t),he.decode.bytes]}function pe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return he.encode(e,t,n),t}function ge(e){return he.encodingLength(e)}function ye(e,t){const n=t.byteLength,r=ge(e),s=r+ge(n),a=new Uint8Array(s+n);return pe(e,a,0),pe(n,a,r),a.set(t,s),new me(e,n,t,a)}class me{code;size;digest;bytes;constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}function we(e,t){const{bytes:n,version:r}=e;return 0===r?function(e,t,n){const{prefix:r}=n;if(r!==K.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const s=t.get(r);if(null==s){const s=n.encode(e).slice(1);return t.set(r,s),s}return s}(n,ve(e),t??K.encoder):function(e,t,n){const{prefix:r}=n,s=t.get(r);if(null==s){const s=n.encode(e);return t.set(r,s),s}return s}(n,ve(e),t??L.encoder)}const be=new WeakMap;function ve(e){const t=be.get(e);if(null==t){const t=new Map;return be.set(e,t),t}return t}class Ee{code;version;multihash;bytes;"/";constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Pe)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==xe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ee.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=ye(e,t);return Ee.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Ee.equals(this,e)}static equals(e,t){const n=t;return null!=n&&e.code===n.code&&e.version===n.version&&function(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e.bytes,n.bytes)}}(e.multihash,n.multihash)}toString(e){return we(this,e)}toJSON(){return{"/":we(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof Ee)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:s}=t;return new Ee(e,n,r,s??je(e,n,r.bytes))}if(!0===t[Se]){const{version:e,multihash:n,code:r}=t,s=function(e){const t=P(e),[n,r]=fe(t),[s,a]=fe(t.subarray(r)),o=t.subarray(r+a);if(o.byteLength!==s)throw new Error("Incorrect length");return new me(n,s,o,t)}(n);return Ee.create(e,r,s)}return null}static create(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Pe)throw new Error(`Version 0 CID must use dag-pb (code: ${Pe}) block encoding`);return new Ee(e,t,n,n.bytes);case 1:{const r=je(e,t,n.bytes);return new Ee(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Ee.create(0,Pe,e)}static createV1(e,t){return Ee.create(1,e,t)}static decode(e){const[t,n]=Ee.decodeFirst(e);if(0!==n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Ee.inspectBytes(e),n=t.size-t.multihashSize,r=P(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=r.subarray(t.multihashSize-t.digestSize),a=new me(t.multihashCode,t.digestSize,s,r);return[0===t.version?Ee.createV0(a):Ee.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=fe(e.subarray(t));return t+=r,n};let r=n(),s=Pe;if(18===r?(r=0,t=0):s=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const a=t,o=n(),i=n(),c=t+i;return{version:r,codec:s,multihashCode:o,digestSize:i,multihashSize:c-a,size:c}}static parse(e,t){const[n,r]=function(e,t){switch(e[0]){case"Q":{const n=t??K;return[K.prefix,n.decode(`${K.prefix}${e}`)]}case K.prefix:{const n=t??K;return[K.prefix,n.decode(e)]}case L.prefix:{const n=t??L;return[L.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}(e,t),s=Ee.decode(r);if(0===s.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return ve(s).set(n,e),s}}const Pe=112,xe=18;function je(e,t,n){const r=ge(e),s=r+ge(t),a=new Uint8Array(s+n.byteLength);return pe(e,a,0),pe(t,a,r),a.set(n,s),a}const Se=Symbol.for("@ipld/js-cid/CID");function Ae(e){const t={signature:O(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=O(e.protected)),t}function Ue(e){const t={signature:$(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=$(e.protected)),t}function Ce(e){const t={payload:$(e.payload),signatures:e.signatures.map(Ue)};try{return t.pld=Ie((n=e.payload,JSON.parse((new TextDecoder).decode(n)))),t}catch(r){try{return t.link=Ee.decode(new Uint8Array(e.payload)),t}catch(r){throw new Error("Invalid payload, must be either JSON or CID")}}var n}function Ie(e){if("string"===typeof e){if(e.startsWith("ipfs://"))return Ee.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Ie);if(function(e){return"object"===typeof e&&null!==e}(e)){const t={};for(const n in e)t[n]=Ie(e[n]);return t}}return e}function Ne(e){const t={};return e.encrypted_key&&(t.encrypted_key=O(e.encrypted_key)),e.header&&(t.header=e.header),t}function Re(e){const t={};return e.encrypted_key&&(t.encrypted_key=$(e.encrypted_key)),e.header&&(t.header=e.header),t}const _e="dag-jose",Te=133;function De(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function Be(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function ke(e){if("string"===typeof e){const t=e.split(".");if(3===t.length)return function(e){const[t,n,r]=e;return{payload:n,signatures:[{protected:t,signature:r}],link:Ee.decode(O(n))}}(t);if(5===t.length)return function(e){const[t,n,r,s,a]=e,o={ciphertext:s,iv:r,protected:t,tag:a};return n&&(o.recipients=[{encrypted_key:n}]),o}(t);throw new Error("Not a valid JOSE string")}if(De(e)||Be(e))return e;throw new Error("Not a valid unencoded JOSE object")}function $e(e){let t;if("string"===typeof e&&(e=ke(e)),De(e))t={payload:O((n=e).payload),signatures:n.signatures.map(Ae)};else{if(!Be(e))throw new Error("Not a valid JOSE object");t=function(e){const t={ciphertext:O(e.ciphertext),protected:O(e.protected),iv:O(e.iv),tag:O(e.tag)};return e.aad&&(t.aad=O(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Ne)),e.unprotected&&(t.unprotected=e.unprotected),t}(e)}var n;return new Uint8Array(b.encode(t))}function Oe(e){let t;try{t=b.decode(e)}catch(r){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(n=t)&&n.payload instanceof Uint8Array&&"signatures"in n&&Array.isArray(n.signatures))return Ce(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return function(e){const t={ciphertext:$(e.ciphertext),protected:$(e.protected),iv:$(e.iv),tag:$(e.tag)};return e.aad&&(t.aad=$(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Re)),e.unprotected&&(t.unprotected=e.unprotected),t}(t);throw new Error("Not a valid DAG-JOSE object");var n}const Le=R({prefix:"9",name:"base10",alphabet:"0123456789"}),Me=_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),He=_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ve=_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ze=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Fe=ze.reduce(((e,t,n)=>(e[n]=t,e)),[]),Ge=ze.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const qe=N({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Fe[t]),"")},decode:function(e){const t=[];for(const n of e){const e=Ge[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}}),Je=R({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ke=R({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Xe=_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),We=N({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>function(e){return(new TextEncoder).encode(e)}(e)}),Qe=new TextEncoder,Ze=new TextDecoder,Ye="json",et=512;function tt(e){return Qe.encode(JSON.stringify(e))}function nt(e){return JSON.parse(Ze.decode(e))}const rt="raw",st=85;function at(e){return P(e)}function ot(e){return P(e)}const it=P;const ct={code:0,name:"identity",encode:it,digest:function(e){return ye(0,it(e))}};function lt(e){let{name:t,code:n,encode:r}=e;return new ut(t,n,r)}class ut{name;code;encode;constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ye(this.code,t):t.then((e=>ye(this.code,e)))}throw Error("Unknown type, must be binary type")}}function dt(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const ht=lt({name:"sha2-256",code:18,encode:dt("SHA-256")}),ft=lt({name:"sha2-512",code:19,encode:dt("SHA-512")}),pt={...f,...l,...h,...i,...c,...s,...d,...a,...r,...u},gt={...m,...y},yt={raw:g,json:p};function mt(e){const t=new globalThis.AbortController;function n(){t.abort();for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)}for(const s of e){if(!0===s?.aborted){n();break}null!=s?.addEventListener&&s.addEventListener("abort",n)}const r=t.signal;return r.clear=function(){for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)},r}let wt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};var bt=n(82193),vt=n.n(bt);const Et="object"===typeof window&&"object"===typeof document&&9===document.nodeType,Pt=vt()(),xt=Et&&!Pt,jt=Pt&&Et,St="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!Pt,At="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;"undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env.NODE_ENV,"undefined"!==typeof navigator&&navigator.product;var Ut=n(75584),Ct=n(67963),It=n.n(Ct);const Nt=function(e){const[t,n]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:e=>{r.push(e)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}};const Rt=function(e,t){let n=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)yield t(r,n++)}();const r=Nt(e),{value:s,done:a}=r.next();if(!0===a)return function*(){}();const o=t(s,n++);if("function"===typeof o.then)return async function*(){yield await o;for await(const e of r)yield t(e,n++)}();const i=t;return function*(){yield o;for(const e of r)yield i(e,n++)}()};var _t=n(9963);function Tt(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Dt(e){return null!=e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function Bt(e){return"object"===typeof e&&(null!=e.path||null!=e.content)}function kt(e){return"function"===typeof e?.getReader}function $t(e){if(null!=e)return"string"===typeof e&&(e=parseInt(e,8)),4095&e}function Ot(e){if(null!=e){var t;if(t=e,Object.prototype.hasOwnProperty.call(t,"secs")&&(e={secs:e.secs,nsecs:e.nsecs}),function(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),function(e){return Array.isArray(e)}(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const t=e.getTime(),n=Math.floor(t/1e3);e={secs:BigInt(n),nsecs:1e3*(t-1e3*n)}}if("bigint"===typeof e){const t=e/BigInt(1e9),n=e-t*BigInt(1e9);e={secs:t,nsecs:Number(n)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(null!=e.nsecs&&(e.nsecs<0||e.nsecs>999999999))throw new _t.sv("mtime-nsecs must be within the range [0,999999999]","ERR_INVALID_MTIME_NSECS");return e}}}async function Lt(e,t){const{path:n,mode:r,mtime:s,content:a}=e,o={path:n??"",mode:$t(r),mtime:Ot(s)};return null!=a?o.content=await t(a):null==n&&(o.content=await t(e)),o}const Mt=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const t=[];for(const n of e)t.push(n);return t};async function Ht(e){if(Tt(e))return new Blob([e]);if("string"===typeof e||e instanceof String)return new Blob([e.toString()]);if(Dt(e))return e;if(kt(e)&&(e=(0,Ut.Z)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Nt(e),{value:n,done:r}=await t.peek();if(!0===r)return Vt(t);if(t.push(n),Number.isInteger(n))return new Blob([Uint8Array.from(await Mt(t))]);if(Tt(n)||"string"===typeof n||n instanceof String)return Vt(t)}throw new _t.sv(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT")}async function Vt(e){const t=[];for await(const n of e)t.push(n);return new Blob(t)}function zt(e){return async function*(e,t){if("string"===typeof e||e instanceof String||Tt(e)||Dt(e)||null!=e._readableState)throw It()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(kt(e)&&(e=(0,Ut.Z)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Nt(e),{value:r,done:s}=await n.peek();if(!0===s)return void(yield*[]);if(n.push(r),Number.isInteger(r))throw It()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(null!=r._readableState)return void(yield*Rt(n,(async e=>Lt({content:e},t))));if(Tt(r))return void(yield Lt({content:n},t));if(Bt(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||kt(r)||Dt(r))return void(yield*Rt(n,(async e=>Lt(e,t))))}if(Bt(e))throw It()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw It()(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}(e,Ht)}function Ft(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}async function Gt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[],s=new FormData;let a=0,o=0;for await(const{content:i,path:c,mode:l,mtime:u}of zt(e)){let e="";a>0&&(e=`-${a}`);let t=(null!=i?"file":"dir")+e;const n=[];if(null!==l&&void 0!==l&&n.push(`mode=${Ft(l)}`),null!=u){const{secs:e,nsecs:t}=u;n.push(`mtime=${e}`),null!=t&&n.push(`mtime-nsecs=${t}`)}if(n.length>0&&(t=`${t}?${n.join("&")}`),null!=i){s.set(t,i,null!=c?encodeURIComponent(c):void 0);const e=o+i.size;r.push({name:c,start:o,end:e}),o=e}else{if(null==c)throw new Error("path or content or both must be set");s.set(t,new File([""],encodeURIComponent(c),{type:"application/x-directory"}))}a++}return{total:o,parts:r,headers:n,body:s}}async function qt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:`-----------------------------${wt()}`,s=Gt;return jt&&(s=Gt),s(e,t,n,r)}function Jt(e){if(null==e)return e;const t=/^[A-Z]+$/;return Object.keys(e).reduce(((n,r)=>(t.test(r)?n[r.toLowerCase()]=e[r]:t.test(r[0])?n[r[0].toLowerCase()+r.slice(1)]=e[r]:n[r]=e[r],n)),{})}function Kt(){let{arg:e,searchParams:t,hashAlg:n,mtime:r,mode:s,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=t&&(a={...a,...t}),null!=n&&(a.hash=n),null!=r&&(r=Ot(r),a.mtime=r.secs,a.mtimeNsecs=r.nsecs),null!=s&&(a.mode=Ft(s)),isNaN(a.timeout)||(a.timeout=`${a.timeout}ms`),void 0===e||null===e?e=[]:Array.isArray(e)||(e=[e]);const o=new URLSearchParams(a);return e.forEach((e=>{o.append("arg",e)})),o}function Xt(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=new AbortController,s=mt([r.signal,n.signal]);try{const{headers:a,body:o,total:i,parts:c}=await qt(t,r,n.headers),[l,u]="function"===typeof n.progress?Wt(i,n.progress,c):[void 0,void 0],d=await e.post("add",{searchParams:Kt({"stream-channels":!0,...n,progress:Boolean(l)}),onUploadProgress:u,signal:s,headers:a,body:o});for await(let e of d.ndjson())e=Jt(e),void 0!==e.hash?yield Zt(e):null!=l&&l(e.bytes??0,e.name)}finally{s.clear()}}()}catch(n){return Promise.reject(n)}}}const Wt=(e,t,n)=>null!=n?[void 0,Qt(e,n,t)]:[t,void 0],Qt=(e,t,n)=>{let r=0;const s=t.length;return a=>{let{loaded:o,total:i}=a;const c=Math.floor(o/i*e);for(;r<s;){const{start:e,end:s,name:a}=t[r];if(c<s){n(c-e,a);break}n(s-e,a),r+=1}}};function Zt(e){let{name:t,hash:n,size:r,mode:s,mtime:a,mtimeNsecs:o}=e;const i={path:t,cid:Ee.parse(n),size:parseInt(r)};return null!=s&&(i.mode=parseInt(s,8)),null!=a&&(i.mtime={secs:a,nsecs:o??0}),i}const Yt=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{let t;for await(const n of e)t=n;return t})();let t;for(const n of e)t=n;return t};async function en(e,t){const{path:n,mode:r,mtime:s,content:a}=e,o={path:n??"",mode:$t(r),mtime:Ot(s)};return null!=a?o.content=await t(a):null==n&&(o.content=await t(e)),o}function tn(e){return async function*(e,t){if(null===e||void 0===e)throw It()(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if("string"===typeof e||e instanceof String)yield en(e.toString(),t);else if(Tt(e)||Dt(e))yield en(e,t);else{if(kt(e)&&(e=(0,Ut.Z)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Nt(e),{value:r,done:s}=await n.peek();if(!0===s)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||Tt(r)||"string"===typeof r||r instanceof String)return void(yield en(n,t));throw It()(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!Bt(e))throw It()(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield en(e,t)}}(e,Ht)}var nn=n(58076);function rn(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("bitswap/stat",{searchParams:Kt(t),signal:t.signal,headers:t.headers});return function(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map((e=>Ee.parse(e["/"]))),peers:(e.Peers??[]).map((e=>(0,nn.jE)(e))),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}(await n.json())}}function sn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:Kt({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map((e=>Ee.parse(e["/"])))}}function an(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:Kt(t),headers:t.headers})).json()).Keys??[]).map((e=>Ee.parse(e["/"])))}}function on(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("block/get",{signal:n.signal,searchParams:Kt({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await r.arrayBuffer())}}function cn(e){return async function t(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new AbortController,a=mt([s.signal,r.signal]);let o;try{const t=await e.post("block/put",{signal:a,searchParams:Kt(r),...await qt([n],s,r.headers)});o=await t.json()}catch(i){if("dag-pb"===r.format)return await t(n,{...r,format:"protobuf"});if("dag-cbor"===r.format)return await t(n,{...r,format:"cbor"});throw i}finally{a.clear()}return Ee.parse(o.Key)}}function ln(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){Array.isArray(t)||(t=[t]);const r=await e.post("block/rm",{signal:n.signal,searchParams:Kt({arg:t.map((e=>e.toString())),"stream-channels":!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield un(e)}()}catch(n){return Promise.reject(n)}}}function un(e){const t={cid:Ee.parse(e.Hash)};return null!=e.Error&&(t.error=new Error(e.Error)),t}function dn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("block/stat",{signal:n.signal,searchParams:Kt({arg:t.toString(),...n}),headers:n.headers}),s=await r.json();return{cid:Ee.parse(s.Key),size:s.Size}}}function hn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("bootstrap/add",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),{Peers:s}=await r.json();return{Peers:s.map((e=>(0,w.HM)(e)))}}}function fn(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:Kt(t),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>(0,w.HM)(e)))}}}function pn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("bootstrap/rm",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),{Peers:s}=await r.json();return{Peers:s.map((e=>(0,w.HM)(e)))}}}function gn(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("config/show",{signal:t.signal,searchParams:Kt({...t}),headers:t.headers});return await n.json()}}function yn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==t)throw new Error("key argument is required");const r=await e.post("config",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers});return(await r.json()).Value}}function mn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("config/profile/apply",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),s=await r.json();return{original:s.OldCfg,updated:s.NewCfg}}}function wn(e){return{apply:mn(e)}}function bn(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const vn=bn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),En=bn("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=function(e=0){return new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Pn={utf8:vn,"utf-8":vn,hex:pt.base16,latin1:En,ascii:En,binary:En,...pt};function xn(e,t="utf8"){const n=Pn[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}function jn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new AbortController,s=mt([r.signal,n.signal]);try{const a=await e.post("config/replace",{signal:s,searchParams:Kt(n),...await qt([xn(JSON.stringify(t))],r,n.headers)});await a.text()}finally{s.clear()}}}function Sn(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof t)throw new Error("Invalid key type");const s={...r,...An(t,n)},a=await e.post("config",{signal:r.signal,searchParams:Kt(s),headers:r.headers});await a.text()}}function An(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}}function Un(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("dag/export",{signal:n.signal,searchParams:Kt({arg:t.toString()}),headers:n.headers});yield*r.iterator()}()}catch(n){return Promise.reject(n)}}}const Cn=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(const t of e)return t})();for(const t of e)return t};async function*In(e,t,n,r,s){const a=async e=>{const t=await n.getCodec(e.code),a=await r(e,s);return t.decode(a)},o=t.split("/").filter(Boolean);let i=await a(e),c=e;for(;o.length>0;){const e=o.shift();if(null==e)throw It()(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(i,e))throw It()(new Error(`no link named "${e}" under ${c}`),"ERR_NO_LINK");i=i[e],yield{value:i,remainderPath:o.join("/")};const n=Ee.asCID(i);null!=n&&(c=n,i=await a(i))}yield{value:i,remainderPath:""}}function Nn(e,t){const n=on(e);return async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=r.path){const s=!0===r.localResolve?await Cn(In(e,r.path,t,n,r)):await Yt(In(e,r.path,t,n,r));if(null==s)throw It()(new Error("Not found"),"ERR_NOT_FOUND");return s}const s=await t.getCodec(e.code),a=await n(e,r);return{value:s.decode(a),remainderPath:""}}}function Rn(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=new AbortController,s=mt([r.signal,n.signal]);try{const{headers:a,body:o}=await qt(t,r,n.headers),i=await e.post("dag/import",{signal:s,headers:a,body:o,searchParams:Kt({"pin-roots":n.pinRoots})});for await(const{Root:e}of i.ndjson())if(void 0!==e){const{Cid:{"/":t},PinErrorMsg:n}=e;yield{root:{cid:Ee.parse(t),pinErrorMsg:n}}}}finally{s.clear()}}()}catch(n){return Promise.reject(n)}}}function _n(e,t){return async function(n){const r={storeCodec:"dag-cbor",hashAlg:"sha2-256",...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};let s;if(null!=r.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");s=n}else{s=(await t.getCodec(r.storeCodec??"dag-cbor")).encode(n),r.inputCodec=r.storeCodec}const a=new AbortController,o=mt([a.signal,r.signal]);try{const t=await e.post("dag/put",{timeout:r.timeout,signal:o,searchParams:Kt(r),...await qt([s],a,r.headers)}),n=await t.json();return Ee.parse(n.Cid["/"])}finally{o.clear()}}}function Tn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("dag/resolve",{signal:n.signal,searchParams:Kt({arg:`${t}${null!=n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers}),s=await r.json();return{cid:Ee.parse(s.Cid["/"]),remainderPath:s.RemPath}}}const Dn=0,Bn=1,kn=2,$n=3,On=4,Ln=5,Mn=6,Hn=7;function Vn(e){if(e.Type===Dn)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===Bn)return{from:(0,nn.jE)(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map((e=>{let{ID:t,Addrs:n}=e;return{id:(0,nn.jE)(t),multiaddrs:n.map((e=>(0,w.HM)(e))),protocols:[]}})),providers:(e.Responses??[]).map((e=>{let{ID:t,Addrs:n}=e;return{id:(0,nn.jE)(t),multiaddrs:n.map((e=>(0,w.HM)(e))),protocols:[]}}))};if(e.Type===kn){let t={id:e.ID??(0,nn.jE)(e.ID),multiaddrs:[],protocols:[]};return e.Responses?.length>0&&(t={id:(0,nn.jE)(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((e=>(0,w.HM)(e))),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===$n)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===On)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((e=>{let{ID:t,Addrs:n}=e;return{id:(0,nn.jE)(t),multiaddrs:n.map((e=>(0,w.HM)(e))),protocols:[]}}))};if(e.Type===Ln)return{name:"VALUE",type:e.Type,value:xn(e.Extra,"base64pad")};if(e.Type===Mn){const t=e.Responses.map((e=>{let{ID:t}=e;return(0,nn.jE)(t)}));if(0===t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===Hn)return{name:"DIALING_PEER",type:e.Type,peer:(0,nn.jE)(e.ID)};throw new Error("Unknown DHT event type")}function zn(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("dht/query",{signal:n.signal,searchParams:Kt({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield Vn(e)}()}catch(n){return Promise.reject(n)}}}var Fn,Gn;function qn(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/cmds",{signal:t.signal,searchParams:Kt(t),headers:t.headers})).json()}}function Jn(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/net",{signal:t.signal,searchParams:Kt(t),headers:t.headers})).json()}}function Kn(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/sys",{signal:t.signal,searchParams:Kt(t),headers:t.headers})).json()}}function Xn(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Array.isArray(t)?t:[t],a=await e.post("files/cp",{signal:r.signal,searchParams:Kt({arg:s.concat(n).map((e=>null!=Ee.asCID(e)?`/ipfs/${e}`:e)),...r}),headers:r.headers});await a.text()}}function Wn(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof t)throw new Error("ipfs.files.flush requires a path");const r=await e.post("files/flush",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),s=await r.json();return Ee.parse(s.Cid)}}function Qn(e){const t=Jt(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs??0},delete t.mtimeNsecs),t}function Zn(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){if(null==t)throw new Error("ipfs.files.ls requires a path");const r=await e.post("files/ls",{signal:n.signal,searchParams:Kt({arg:null!=Ee.asCID(t)?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const e of r.ndjson())if("Entries"in e)for(const t of e.Entries??[])yield Yn(Qn(t));else yield Yn(Qn(e))}()}catch(n){return Promise.reject(n)}}}function Yn(e){return null!=e.hash&&(e.cid=Ee.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}function er(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/mkdir",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers});await r.text()}}function tr(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);const s=await e.post("files/mv",{signal:r.signal,searchParams:Kt({arg:t.concat(n),...r}),headers:r.headers});await s.text()}}function nr(e){if(t=e,"function"===typeof t?.getReader)return async function*(){const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)return;yield n}}finally{t.releaseLock()}}();var t;if(function(e){return null!=e[Symbol.asyncIterator]}(e))return e;throw new Error("unknown stream")}function rr(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("files/read",{signal:n.signal,searchParams:Kt({arg:t,count:n.length,...n}),headers:n.headers});if(null==r.body)throw new Error("Invalid response body");yield*nr(r.body)}()}catch(n){return Promise.reject(n)}}}!function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"}(Fn||(Fn={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(Gn||(Gn={}));class sr extends Error{response;constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}function ar(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/rm",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),s=await r.text();if(""!==s){const e=new sr(r);throw e.message=s,e}}}function or(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/stat",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),s=await r.json();return s.WithLocality=s.WithLocality??!1,(a=Qn(s)).cid=Ee.parse(a.hash),delete a.hash,a;var a}}function ir(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new AbortController,a=mt([s.signal,r.signal]);try{const o=await e.post("files/write",{signal:a,searchParams:Kt({arg:t,streamChannels:!0,count:r.length,...r}),...await qt([{content:n,path:"arg",mode:Ft(r.mode),mtime:Ot(r.mtime)}],s,r.headers)});await o.text()}finally{a.clear()}}}function cr(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("id",{signal:t.signal,searchParams:Kt({arg:null!=t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),r={...Jt(await n.json())};return r.id=(0,nn.jE)(r.id),null!=r.addresses&&(r.addresses=r.addresses.map((e=>(0,w.HM)(e)))),r}}const lr={type:"ed25519"};function ur(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lr;const r=await e.post("key/gen",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers});return Jt(await r.json())}}function dr(e){return async function(t,n,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=await e.post("key/import",{signal:s.signal,searchParams:Kt({arg:t,pem:n,password:r,...s}),headers:s.headers});return Jt(await a.json())}}function hr(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("key/list",{signal:t.signal,searchParams:Kt(t),headers:t.headers});return((await n.json()).Keys??[]).map((e=>Jt(e)))}}function fr(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("key/rename",{signal:r.signal,searchParams:Kt({arg:[t,n],...r}),headers:r.headers});return Jt(await s.json())}}function pr(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("key/rm",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers});return Jt((await r.json()).Keys[0])}}var gr=n(42402),yr=n(89842);const mr=n.n(yr)();let wr=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms";var n=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(wr,(function(e,t,r){(r=vr(r))&&(n=(n||0)+parseFloat(t,10)*r)})),n&&n/(vr(t)||1)}function vr(e){return br[e]||br[e.toLowerCase().replace(/s$/,"")]}br.nanosecond=br.ns=1e-6,br["\xb5s"]=br["\u03bcs"]=br.us=br.microsecond=.001,br.millisecond=br.ms=br[""]=1,br.second=br.sec=br.s=1e3*br.ms,br.minute=br.min=br.m=60*br.s,br.hour=br.hr=br.h=60*br.m,br.day=br.d=24*br.h,br.week=br.wk=br.w=7*br.d,br.month=br.b=30.4375*br.d,br.year=br.yr=br.y=365.25*br.d;const Er=br;var Pr=n(16791);class xr extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out"),this.name="TimeoutError"}}class jr extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted."),this.name="AbortError"}}class Sr extends Error{response;constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}const Ar=globalThis.fetch,Ur=globalThis.Headers,Cr=globalThis.Request,Ir=globalThis.Response,Nr=Ar,Rr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new XMLHttpRequest;n.open(t.method??"GET",e.toString(),!0);const{timeout:r,headers:s}=t,a=Number(r);if(!isNaN(a)&&a>0&&a<1/0&&(n.timeout=a),null!=t.overrideMimeType&&n.overrideMimeType(t.overrideMimeType),null!=s)for(const[o,i]of new Ur(s))n.setRequestHeader(o,i);return null!=t.signal&&(t.signal.onabort=()=>{n.abort()}),null!=t.onUploadProgress&&(n.upload.onprogress=t.onUploadProgress),n.responseType="arraybuffer",new Promise(((e,r)=>{const s=t=>{switch(t.type){case"error":e(Ir.error());break;case"load":e(new Tr(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:_r(n.getAllResponseHeaders())}));break;case"timeout":r(new xr);break;case"abort":r(new jr)}};n.onerror=s,n.onload=s,n.ontimeout=s,n.onabort=s,n.send(t.body)}))}(e,t):Nr(e,t)},_r=e=>{const t=new Ur;for(const n of e.trim().split(/[\r\n]+/)){const e=n.indexOf(": ");e>0&&t.set(n.slice(0,e),n.slice(e+1))}return t};class Tr extends Ir{constructor(e,t,n){super(t,n),Object.defineProperty(this,"url",{value:e})}}const Dr=mr.bind({ignoreUndefined:!0}),Br=(0,gr.kg)("kubo-rpc-client:fetch"),kr={throwHttpErrors:!0,credentials:"same-origin"};class $r{static HTTPError=Sr;static TimeoutError=xr;static post=async(e,t)=>new $r(t).post(e,t);static get=async(e,t)=>new $r(t).get(e,t);static put=async(e,t)=>new $r(t).put(e,t);static delete=async(e,t)=>new $r(t).delete(e,t);static options=async(e,t)=>new $r(t).options(e,t);opts;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Dr({},kr,e)}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Dr({},this.opts,t),r=new Ur(n.headers);if("string"!==typeof e&&!(e instanceof Pr.URL||e instanceof Cr))throw new TypeError("`resource` must be a string, URL, or Request");const s=new Pr.URL(e.toString(),n.base),{searchParams:a,transformSearchParams:o,json:i}=n;null!=a&&(s.search="function"===typeof o?o(new Pr.URLSearchParams(n.searchParams)):new Pr.URLSearchParams(n.searchParams).toString()),null!=i&&(n.body=JSON.stringify(n.json),r.set("content-type","application/json"));const c=[n.signal];null!=n.timeout&&isNaN(n.timeout)&&n.timeout>0&&c.push(AbortSignal.timeout(n.timeout));const l=mt(c);try{null!=globalThis.ReadableStream&&n.body instanceof globalThis.ReadableStream&&(xt||At)&&(n.body=new Blob(await Mt((0,Ut.Z)(n.body)))),Br.trace("outgoing headers",n.headers),Br.trace("%s %s",n.method,s);const e=await Rr(s.toString(),{...n,signal:n.signal,timeout:void 0,headers:r,duplex:"half"});if(Br("%s %s %d",n.method,s,e.status),Br.trace("incoming headers",e.headers),!e.ok&&!0===n.throwHttpErrors)throw null!=n.handleError&&await n.handleError(e),new Sr(e);return e.iterator=async function*(){yield*Lr(e.body)},e.ndjson=async function*(){for await(const n of Or(e.iterator()))null!=t.transform?yield t.transform(n):yield n},e}finally{l.clear()}}async post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"POST"})}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"GET"})}async put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"PUT"})}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"DELETE"})}async options(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"OPTIONS"})}}const Or=async function*(e){const t=new TextDecoder;let n="";for await(const r of e){n+=t.decode(r,{stream:!0});const e=n.split(/\r?\n/);for(let t=0;t<e.length-1;t++){const n=e[t].trim();n.length>0&&(yield JSON.parse(n))}n=e[e.length-1]}n+=t.decode(),n=n.trim(),0!==n.length&&(yield JSON.parse(n))},Lr=e=>{if(Mr(e))return e;if(Vr(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:t.next.bind(t),return:n=>(e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:n}))})}}if(Hr(e)){const t=e.getReader();return async function*(){try{for(;;){const{done:e,value:n}=await t.read();if(e)return;null!=n&&(yield n)}}finally{t.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},Mr=e=>null!==e&&"function"===typeof e[Symbol.asyncIterator],Hr=e=>null!=e&&"function"===typeof e.getReader,Vr=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),zr=[(0,w.a_)("tcp").code,(0,w.a_)("dns").code,(0,w.a_)("dnsaddr").code,(0,w.a_)("dns4").code,(0,w.a_)("dns6").code];function Fr(e){let t;try{t=(0,w.a_)("sni").code}catch(n){return null}for(const[r,s]of e)if(r===t&&void 0!==s)return s;return null}function Gr(e){return e.some((([e,t])=>e===(0,w.a_)("tls").code))}function qr(e,t,n){const r=Jr[(0,w.a_)(e).name];if(void 0===r)throw new Error(`Can't interpret protocol ${(0,w.a_)(e).name}`);const s=r(t,n);return e===(0,w.a_)("ip6").code?`[${s}]`:s}const Jr={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`tcp://${qr(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`udp://${qr(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qr(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qr(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=Gr(t),r=Fr(t);if(n&&null!==r)return`https://${r}`;const s=n?"https://":"http://",a=t.pop();if(void 0===a)throw new Error("Unexpected end of multiaddr");let o=qr(a[0],a[1]??"",t);return o=o.replace("tcp://",""),`${s}${o}`},"http-path":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qr(n[0],n[1]??"",t)}/${decodeURIComponent(e)}`},tls:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return qr(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return qr(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=qr(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=Gr(t),r=Fr(t);if(n&&null!==r)return`wss://${r}`;const s=n?"wss://":"ws://",a=t.pop();if(void 0===a)throw new Error("Unexpected end of multiaddr");let o=qr(a[0],a[1]??"",t);return o=o.replace("tcp://",""),`${s}${o}`},wss:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=qr(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qr(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qr(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qr(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};function Kr(e){try{e=function(e,t){const n=(0,w.HM)(e).stringTuples(),r=n.pop();if(void 0===r)throw new Error("Unexpected end of multiaddr");const s=(0,w.a_)(r[0]),a=Jr[s.name];if(null==a)throw new Error(`No interpreter found for ${s.name}`);let o=a(r[1]??"",n);return!1!==t?.assumeHttp&&zr.includes(r[0])&&(o=o.replace(/^.*:\/\//,""),o="443"===r[1]?`https://${o}`:`http://${o}`),(o.startsWith("http://")||o.startsWith("https://"))&&(o=new URL(o).toString(),o.endsWith("/")&&(o=o.substring(0,o.length-1))),o}((0,w.HM)(e))}catch{}return e=e.toString()}const Xr=(0,gr.kg)("js-kubo-rpc-client:lib:error-handler"),Wr=mr.bind({ignoreUndefined:!0}),Qr=xt||At?location.protocol:"http",Zr=xt||At?location.hostname:"localhost",Yr=xt||At?location.port:"5001",es=async e=>{let t;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();Xr(n),t=n.Message??n.message}else t=await e.text()}catch(r){Xr("Failed to parse error response",r),t=r.message}let n=new $r.HTTPError(e);throw null!=t&&(t.includes("deadline has elapsed")&&(n=new $r.TimeoutError),t.includes("context deadline exceeded")&&(n=new $r.TimeoutError),t.includes("request timed out")&&(n=new $r.TimeoutError),n.message=t),n},ts=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,ns=e=>e.replace(ts,(function(e){return"-"+e.toLowerCase()}));class rs extends $r{constructor(){var e;const t=function(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if("string"===typeof n||(0,w.h2)(n))e=new URL(Kr(n));else if(n instanceof URL)e=n;else if("string"===typeof n.url||(0,w.h2)(n.url))e=new URL(Kr(n.url)),r=n;else if(n.url instanceof URL)e=n.url,r=n;else{r=n??{};const t=(r.protocol??Qr).replace(":",""),s=(r.host??Zr).split(":")[0],a=r.port??Yr;e=new URL(`${t}://${s}:${a}`)}if(null!=r.apiPath?e.pathname=r.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),St){const e=void 0;t=r.agent??new e({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});var n;super({timeout:null!=t.timeout?(n=t.timeout,"string"===typeof n?Er(n)??0:n):void 0,headers:t.headers,base:`${t.url}`,handleError:es,transformSearchParams:e=>{const t=new URLSearchParams;for(const[n,r]of e)"undefined"!==r&&"null"!==r&&"signal"!==n&&"timeout"!==n&&t.append(ns(n),r),"timeout"!==n||isNaN(parseInt(r))||t.append(ns(n),r);return t},agent:t.agent}),e=this,delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=async function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof n||n.startsWith("/")||(n=`${t.url}/${n}`),r.call(e,n,Wr(s,{method:"POST"}))}}}$r.HTTPError;const ss=async e=>Promise.reject(new Error(`No base found for "${e}"`));class as{_basesByName;_basesByPrefix;_loadBase;constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase??ss;for(const t of e.bases)this.addBase(t)}addBase(e){if(null!=this._basesByName[e.name]&&null!=this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(null!=this._basesByName[e])return this._basesByName[e];if(null!=this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const os=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class is{_codecsByName;_codecsByCode;_loadCodec;constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec??os;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(null!=this._codecsByName[e.name]||null!=this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t="string"===typeof e?this._codecsByName:this._codecsByCode;if(null!=t[e])return t[e];const n=await this._loadCodec(e);return null==t[e]&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const cs=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class ls{_hashersByName;_hashersByCode;_loadHasher;constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher??cs;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(null!=this._hashersByName[e.name]||null!=this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t="string"===typeof e?this._hashersByName:this._hashersByCode;if(null!=t[e])return t[e];const n=await this._loadHasher(e);return null==t[e]&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function us(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("log/level",{signal:r.signal,searchParams:Kt({arg:[t,n],...r}),headers:r.headers});return Jt(await s.json())}}function ds(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("log/ls",{signal:t.signal,searchParams:Kt(t),headers:t.headers});return(await n.json()).Strings}}function hs(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("log/tail",{signal:t.signal,searchParams:Kt(t),headers:t.headers});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function fs(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}function ps(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("name/publish",{signal:n.signal,searchParams:Kt({arg:`${t}`,...n}),headers:n.headers});return Jt(await r.json())}}function gs(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers});return Jt(await r.json())}}function ys(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:Kt(t),headers:t.headers});return Jt(await n.json())}}function ms(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:Kt(t),headers:t.headers});return(await n.json()).Strings??[]}}function ws(e){return{cancel:gs(e),state:ys(e),subs:ms(e)}}function bs(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("name/resolve",{signal:n.signal,searchParams:Kt({arg:t,stream:!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield e.Path}()}catch(n){return Promise.reject(n)}}}function vs(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("object/patch/add-link",{signal:r.signal,searchParams:Kt({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...r}),headers:r.headers}),{Hash:a}=await s.json();return Ee.parse(a)}}function Es(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("object/patch/rm-link",{signal:r.signal,searchParams:Kt({arg:[`${t}`,n.Name??n.name??null],...r}),headers:r.headers}),{Hash:a}=await s.json();return Ee.parse(a)}}function Ps(e){return{addLink:vs(e),rmLink:Es(e)}}function xs(e){return null!=Ee.asCID(e)}async function*js(e){if(null===e||void 0===e)throw new _t.sv(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT");const t=Ee.asCID(e);if(null==t){if("string"!==typeof e){if(null!=e.cid||null!=e.path)return yield Ss(e);if(n=e,Symbol.iterator in n){const t=e[Symbol.iterator](),n=t.next();if(!0===n.done)return t;if(xs(n.value)){yield Ss({cid:n.value});for(const e of t)yield Ss({cid:e});return}if("string"===typeof n.value){yield Ss({path:n.value});for(const e of t)yield Ss({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield Ss(n.value);for(const e of t)yield Ss(e);return}throw new _t.sv("Unexpected input: "+typeof e,"ERR_UNEXPECTED_INPUT")}var n;if(function(e){return Symbol.asyncIterator in e}(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(!0===n.done)return t;if(xs(n.value)){yield Ss({cid:n.value});for await(const e of t)yield Ss({cid:e});return}if("string"===typeof n.value){yield Ss({path:n.value});for await(const e of t)yield Ss({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield Ss(n.value);for await(const e of t)yield Ss(e);return}throw new _t.sv("Unexpected input: "+typeof e,"ERR_UNEXPECTED_INPUT")}throw new _t.sv("Unexpected input: "+typeof e,"ERR_UNEXPECTED_INPUT")}yield Ss({path:e})}else yield Ss({cid:t})}function Ss(e){const t=e.cid??`${e.path}`;if(null==t)throw new _t.sv("Unexpected input: Please path either a CID or an IPFS path","ERR_UNEXPECTED_INPUT");const n={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(n.metadata=e.metadata),n}function As(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:s,metadata:a}of js(t)){const t=await e.post("pin/add",{signal:n.signal,searchParams:Kt({...n,arg:r,recursive:s,metadata:null!=a?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const e of t.ndjson())if(null==e.Pins)yield Ee.parse(e);else for(const t of e.Pins)yield Ee.parse(t)}}()}catch(n){return Promise.reject(n)}}}function Us(e){const t=As(e);return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await Yt(t([{path:e.toString(),...n}],n));if(null==r)throw new Error("No response received");return r}}function Cs(e,t,n){const r={type:e,cid:Ee.parse(t)};return null!=n&&(r.metadata=n),r}function Is(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let n=[];null!=t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const r=await e.post("pin/ls",{signal:t.signal,searchParams:Kt({...t,arg:n.map((e=>`${e}`)),stream:!0}),headers:t.headers});for await(const e of r.ndjson()){if(null!=e.Keys){for(const t of Object.keys(e.Keys))yield Cs(e.Keys[t].Type,t,e.Keys[t].Metadata);return}yield Cs(e.Type,e.Cid,e.Metadata)}}()}catch(t){return Promise.reject(t)}}}const Ns=e=>{let{Name:t,Status:n,Cid:r}=e;return{cid:Ee.parse(r),name:t,status:n}},Rs=e=>{if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},_s=e=>{if(null!=Ee.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of "+typeof e)},Ts=e=>{let{service:t,cid:n,name:r,status:s,all:a}=e;const o=Kt({service:Rs(t),name:r,force:!0===a||void 0});if(null!=n)for(const i of n)o.append("cid",_s(i));if(null!=s)for(const i of s)o.append("status",i);return o},Ds=(e,t)=>{let{service:n,background:r,name:s,origins:a}=t;const o=Kt({arg:_s(e),service:Rs(n),name:s,background:!0===r||void 0});if(null!=a)for(const i of a)o.append("origin",i.toString());return o};function Bs(e){return async function(t,n){let{timeout:r,signal:s,headers:a,...o}=n;const i=await e.post("pin/remote/add",{timeout:r,signal:s,headers:a,searchParams:Ds(t,o)});return Ns(await i.json())}}function ks(e){return function(t){try{let{timeout:n,signal:r,headers:s,...a}=t;return async function*(){const t=await e.post("pin/remote/ls",{timeout:n,signal:r,headers:s,searchParams:Ts(a)});for await(const e of t.ndjson())yield Ns(e)}()}catch(n){return Promise.reject(n)}}}function $s(e){return async function(t){let{timeout:n,signal:r,headers:s,...a}=t;await e.post("pin/remote/rm",{timeout:n,signal:r,headers:s,searchParams:Ts({...a,all:!0})})}}function Os(e){return async function(t){let{timeout:n,signal:r,headers:s,...a}=t;await e.post("pin/remote/rm",{timeout:n,signal:r,headers:s,searchParams:Ts({...a,all:!1})})}}function Ls(e){const t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function Ms(e){const t={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return null!=e.Stat&&(t.stat=function(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:n,Queued:r,Failed:s}=e.PinCount;return{status:"valid",pinCount:{queued:r,pinning:t,pinned:n,failed:s}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}(e.Stat)),t}function Hs(e){return async function(t,n){const{endpoint:r,key:s,headers:a,timeout:o,signal:i}=n;await e.post("pin/remote/service/add",{timeout:o,signal:i,searchParams:Kt({arg:[t,Ls(r),s]}),headers:a})}}function Vs(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stat:n,headers:r,timeout:s,signal:a}=t,o=await e.post("pin/remote/service/ls",{timeout:s,signal:a,headers:r,searchParams:!0===n?Kt({stat:n}):void 0});return(await o.json()).RemoteServices.map(Ms)}}function zs(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:Kt({arg:t})})}}function Fs(e){return{add:Hs(e),ls:Vs(e),rm:zs(e)}}function Gs(e){return{add:Bs(e),ls:ks(e),rm:Os(e),rmAll:$s(e),service:Fs(e)}}function qs(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:s}of js(t)){const t=new URLSearchParams(n.searchParams);t.append("arg",`${r}`),null!=s&&t.set("recursive",String(s));const a=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:Kt({...n,arg:`${r}`,recursive:s})});for await(const e of a.ndjson())null==e.Pins?yield Ee.parse(e):yield*e.Pins.map((e=>Ee.parse(e)))}}()}catch(n){return Promise.reject(n)}}}function Js(e){const t=qs(e);return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await Yt(t([{path:e.toString(),...n}],n));if(null==r)throw new Error("No response received");return r}}function Ks(e,t="utf8"){const n=Pn[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}const Xs=e=>Array.isArray(e)?e.map(Ws):e,Ws=e=>Ks(Qs(e)),Qs=e=>B.decode(e),Zs=e=>BigInt(`0x${Ks(B.decode(e),"base16")}`),Ys=e=>B.encode(xn(e));function ea(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:Kt(t),headers:t.headers})).json();return Xs(n)??[]}}function ta(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("pubsub/peers",{signal:n.signal,searchParams:Kt({arg:Ys(t),...n}),headers:n.headers}),{Strings:s}=await r.json();return s??[]}}function na(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Kt({arg:Ys(t),...r}),a=new AbortController,o=mt([a.signal,r.signal]);try{const t=await e.post("pubsub/pub",{signal:o,searchParams:s,...await qt([n],a,r.headers)});await t.text()}finally{o.clear()}}}const ra=(0,gr.kg)("js-kubo-rpc-client:pubsub:subscribe");function sa(e,t){return async function(n,r){let s,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o.signal=t.subscribe(n,r,o.signal);const i=new Promise(((e,t)=>{s=e,a=t})),c=setTimeout((()=>{s()}),1e3);return e.post("pubsub/sub",{signal:o.signal,searchParams:Kt({arg:Ys(n),...o}),headers:o.headers}).catch((e=>{t.unsubscribe(n,r),a(e)})).then((e=>{clearTimeout(c),null!=e&&(!async function(e,t){let{onMessage:n,onEnd:r,onError:s}=t;s=s??ra;try{for await(const t of e.ndjson())try{if(null==t.from)continue;null!=t.from&&null!=t.seqno?n({type:"signed",from:(0,nn.jE)(t.from),data:Qs(t.data),sequenceNumber:Zs(t.seqno),topic:Ws(t.topicIDs[0]),key:Qs(t.key??"u"),signature:Qs(t.signature??"u")}):n({type:"unsigned",data:Qs(t.data),topic:Ws(t.topicIDs[0])})}catch(a){a.message=`Failed to parse pubsub message: ${a.message}`,s(a,!1,t)}}catch(a){aa(a)||s(a,!0)}finally{r()}}(e,{onMessage:e=>{null!=r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(e):r(e))},onEnd:()=>{t.unsubscribe(n,r)},onError:o.onError}),s())})),i}}const aa=e=>{switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}};class oa{_subs;constructor(){this._subs=new Map}subscribe(e,t,n){const r=this._subs.get(e)??[];if(null!=r.find((e=>e.handler===t)))throw new Error(`Already subscribed to ${e} with this handler`);const s=new AbortController;return this._subs.set(e,[{handler:t,controller:s}].concat(r)),null!=n&&n.addEventListener("abort",(()=>{this.unsubscribe(e,t)})),s.signal}unsubscribe(e,t){const n=this._subs.get(e)??[];let r;null!=t?(this._subs.set(e,n.filter((e=>e.handler!==t))),r=n.filter((e=>e.handler===t))):(this._subs.set(e,[]),r=n),0===(this._subs.get(e)??[]).length&&this._subs.delete(e),r.forEach((e=>{e.controller.abort()}))}}function ia(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("refs/local",{signal:t.signal,transform:Jt,searchParams:Kt(t),headers:t.headers});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function ca(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("repo/gc",{signal:t.signal,searchParams:Kt(t),headers:t.headers,transform:e=>({err:null!=e.Error?new Error(e.Error):null,cid:null!=e.Key?.["/"]?Ee.parse(e.Key["/"]):null})});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function la(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("repo/stat",{signal:t.signal,searchParams:Kt(t),headers:t.headers}),r=await n.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}}}function ua(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await(await e.post("repo/version",{signal:t.signal,searchParams:Kt(t),headers:t.headers})).json()).Version}}function da(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/findpeer",{signal:n.signal,searchParams:Kt({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield Vn(e)}()}catch(n){return Promise.reject(n)}}}function ha(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/findprovs",{signal:n.signal,searchParams:Kt({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield Vn(e)}()}catch(n){return Promise.reject(n)}}}function fa(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/get",{signal:n.signal,searchParams:Kt({arg:t instanceof Uint8Array?Ks(t):t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield Vn(e)}()}catch(n){return Promise.reject(n)}}}function pa(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return async function*(){const r=Array.isArray(t)?t:[t],s=await e.post("routing/provide",{signal:n.signal,searchParams:Kt({arg:r.map((e=>e.toString())),...n}),headers:n.headers});for await(const e of s.ndjson())yield Vn(e)}()}catch(n){return Promise.reject(n)}}}function ga(e){return function(t,n){try{let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async function*(){const s=new AbortController,a=mt([s.signal,r.signal]);try{const o=await e.post("routing/put",{signal:a,searchParams:Kt({arg:t instanceof Uint8Array?Ks(t):t.toString(),stream:!0,...r}),...await qt([n],s,r.headers)});for await(const e of o.ndjson())yield Vn(e)}finally{a.clear()}}()}catch(r){return Promise.reject(r)}}}function ya(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("stats/bw",{signal:t.signal,searchParams:Kt(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function ma(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:Kt(t),headers:t.headers}),{Addrs:r}=await n.json();return Object.keys(r).map((e=>({id:(0,nn.jE)(e),addrs:(r[e]??[]).map((e=>(0,w.HM)(e)))})))}}function wa(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("swarm/connect",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),{Strings:s}=await r.json();return s??[]}}function ba(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("swarm/disconnect",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),{Strings:s}=await r.json();return s??[]}}function va(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:Kt(t),headers:t.headers}),{Strings:r}=await n.json();return(r??[]).map((e=>(0,w.HM)(e)))}}function Ea(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/peers",{signal:t.signal,searchParams:Kt(t),headers:t.headers});return((await n.json()).Peers??[]).map((e=>({addr:(0,w.HM)(e.Addr),peer:(0,nn.jE)(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"})))}}class Pa{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(e){const t=new rs(e),n={name:ct.name,code:ct.code,encode:e=>e,decode:e=>e},r=Object.values(pt);(e.ipld?.bases??[]).forEach((e=>r.push(e))),this.bases=new as({bases:r,loadBase:e.ipld?.loadBase});const s=Object.values(yt);[E,b,v,o,n].concat(e.ipld?.codecs??[]).forEach((e=>{s.push(e)})),this.codecs=new is({codecs:s,loadCodec:e.ipld?.loadCodec});const a=Object.values(gt);(e.ipld?.hashers??[]).forEach((e=>a.push(e))),this.hashers=new ls({hashers:a,loadHasher:e.ipld?.loadHasher}),this.bitswap=function(e){return{wantlist:an(e),wantlistForPeer:sn(e),stat:rn(e)}}(t),this.block=function(e){return{get:on(e),put:cn(e),rm:ln(e),stat:dn(e)}}(t),this.bootstrap=function(e){return{add:hn(e),list:fn(e),rm:pn(e)}}(t),this.config=function(e){return{getAll:gn(e),get:yn(e),set:Sn(e),replace:jn(e),profiles:wn(e)}}(t),this.dag=function(e,t){return{export:Un(e),get:Nn(e,t),import:Rn(e),put:_n(e,t),resolve:Tn(e)}}(t,this.codecs),this.dht=function(e){return{query:zn(e)}}(t),this.diag=function(e){return{cmds:qn(e),net:Jn(e),sys:Kn(e)}}(t),this.files=function(e){return{cp:Xn(e),flush:Wn(e),ls:Zn(e),mkdir:er(e),mv:tr(e),read:rr(e),rm:ar(e),stat:or(e),write:ir(e)}}(t),this.key=function(e){return{gen:ur(e),import:dr(e),list:hr(e),rename:fr(e),rm:pr(e)}}(t),this.log=function(e){return{level:us(e),ls:ds(e),tail:hs(e)}}(t),this.name=function(e){return{publish:ps(e),resolve:bs(e),pubsub:ws(e)}}(t),this.object=function(e,t){return{patch:Ps(e)}}(t,this.codecs),this.pin=function(e){return{addAll:As(e),add:Us(e),ls:Is(e),rmAll:qs(e),rm:Js(e),remote:Gs(e)}}(t),this.pubsub=function(e){const t=new oa;return{ls:ea(e),peers:ta(e),publish:na(e),subscribe:sa(e,t),unsubscribe:(n=t,async function(e,t){n.unsubscribe(e,t)})};var n}(t),this.refs=function(e){return Object.assign((function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=Array.isArray(t)?t:[t],s=await e.post("refs",{signal:n.signal,searchParams:Kt({arg:r.map((e=>`${e instanceof Uint8Array?Ee.decode(e):e}`)),...n}),headers:n.headers,transform:Jt});yield*s.ndjson()}()}catch(n){return Promise.reject(n)}}),{local:ia(e)})}(t),this.repo=function(e){return{gc:ca(e),stat:la(e),version:ua(e)}}(t),this.routing=function(e){return{findPeer:da(e),findProvs:ha(e),get:fa(e),provide:pa(e),put:ga(e)}}(t),this.stats=function(e){return{bitswap:rn(e),repo:la(e),bw:ya(e)}}(t),this.swarm=function(e){return{addrs:ma(e),connect:wa(e),disconnect:ba(e),localAddrs:va(e),peers:Ea(e)}}(t),this.add=function(e){const t=Xt(e);return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=tn(e),s=t(r,n),a=await Yt(s);if(null==a)throw new Error("Invalid body");return a}}(t),this.addAll=Xt(t),this.cat=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("cat",{signal:n.signal,searchParams:Kt({arg:t.toString(),...n}),headers:n.headers});yield*r.iterator()}()}catch(n){return Promise.reject(n)}}}(t),this.get=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r={arg:`${t instanceof Uint8Array?Ee.decode(t):t}`,...n},s=await e.post("get",{signal:n.signal,searchParams:Kt(r),headers:n.headers});yield*s.iterator()}()}catch(n){return Promise.reject(n)}}}(t),this.ls=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=`${t instanceof Uint8Array?Ee.decode(t):t}`;async function s(t){let n=t.Hash;if(!0===n.includes("/")){const t=!0===n.startsWith("/ipfs/")?n:`/ipfs/${n}`;n=(await or(e)(t)).cid}else n=Ee.parse(n);return{name:t.Name,path:r+(null!=t.Name?`/${t.Name}`:""),size:t.Size,cid:n,type:fs(t)}}const a=await e.post("ls",{signal:n.signal,searchParams:Kt({arg:r,...n}),headers:n.headers});for await(let e of a.ndjson()){if(e=e.Objects,null==e)throw new Error("expected .Objects in results");if(e=e[0],null==e)throw new Error("expected one array in results.Objects");const t=e.Links;if(!Array.isArray(t))throw new Error("expected one array in results.Objects[0].Links");if(0===t.length)return void(yield s(e));yield*t.map(s)}}()}catch(n){return Promise.reject(n)}}}(t),this.id=cr(t),this.version=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("version",{signal:t.signal,searchParams:Kt(t),headers:t.headers});return{...Jt(await n.json()),"ipfs-http-client":"1.0.0"}}}(t),this.stop=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("shutdown",{signal:t.signal,searchParams:Kt(t),headers:t.headers});await n.text()}}(t),this.ping=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("ping",{signal:n.signal,searchParams:Kt({arg:`${t}`,...n}),headers:n.headers,transform:Jt});yield*r.ndjson()}()}catch(n){return Promise.reject(n)}}}(t),this.resolve=function(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("resolve",{signal:n.signal,searchParams:Kt({arg:t,...n}),headers:n.headers}),{Path:s}=await r.json();return s}}(t),this.commands=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("commands",{signal:t.signal,searchParams:Kt(t),headers:t.headers})).json()}}(t),this.mount=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("dns",{signal:t.signal,searchParams:Kt(t),headers:t.headers});return Jt(await n.json())}}(t),this.isOnline=function(e){const t=cr(e);return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=await t(e);return Boolean(n?.addresses?.length)}catch{return!1}}}(t),this.getEndpointConfig=function(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}(t)}}n(81350);function xa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return("string"===typeof e||(0,w.h2)(e)||e instanceof URL)&&(e={url:e}),function(e){return new Pa(e)}(e)}}}]);
//# sourceMappingURL=61.10e471bc.chunk.js.map