sName:`input-reset bn pa2 mb2 db w-100 f6 br-0 placeholder-light ${this.inputClass}`,style:{borderRadius:"3px 0 0 3px"},type:"text",placeholder:"QmHash/bafyHash","aria-describedby":"ipfs-path-desc",onChange:this.onChange,onKeyDown:this.onKeyDown,value:this.state.path}),e.createElement("small",{id:"ipfs-path-desc",className:"o-0 absolute f6 black-60 db mb2"},"Paste in a CID or IPFS path"))),e.createElement("div",{className:"flex flex-row-reverse mb2"},e.createElement(R.Z,{minWidth:0,disabled:!this.isValid,title:t("app:actions.inspect"),style:{borderRadius:"0 3px 3px 0"},onClick:this.onInspect,bg:"bg-teal",className:"ExploreFormButton button-reset pv1 ph2 ba f7 fw4 white overflow-hidden tc"},e.createElement(C.Z,{style:{height:"2em"},className:"dib fill-current-color v-mid"}),e.createElement("span",{className:"ml2"},t("app:actions.inspect"))),e.createElement(R.Z,{minWidth:0,disabled:!this.isValid,style:{borderRadius:"0"},title:t("app:actions.browse"),onClick:this.onBrowse,className:"ExploreFormButton button-reset pv1 ph2 ba f7 fw4 white bg-gray overflow-hidden tc"},e.createElement(B.Z,{style:{height:"2em"},className:"dib fill-current-color v-mid"}),e.createElement("span",{className:"ml2"},t("app:actions.browse")))))}}const F=(0,a.Zh)("files")(L);class M extends e.Component{constructor(e){super(e),this.addFiles=async e=>{const{doFilesWrite:t,doUpdateHash:n,routeInfo:r,filesPathInfo:o}=this.props,i="/files*"===r.pattern,s=i?(null===o||void 0===o?void 0:o.realPath)||r.params.path:"/",a=await e;t((0,u.dw)(a),s),i||n("/files")},this.handleJoyrideCb=e=>{"close"===e.action&&this.props.doDisableTooltip()},e.doSetupLocalStorage()}componentDidMount(){this.props.doTryInitIpfs(),this.props.doInitHelia()}render(){const{t:t,route:n,ipfsReady:r,doFilesNavigateTo:o,doExploreUserProvidedPath:a,routeInfo:{url:u},connectDropTarget:l,canDrop:c,isOver:h,showTooltip:p}=this.props;return l(e.createElement("div",{className:"sans-serif h-100 relative",onClick:i(this.props.doUpdateUrl)},c&&h&&e.createElement("div",{className:"h-100 top-0 right-0 fixed appOverlay",style:{background:"rgba(99, 202, 210, 0.2)"}}),e.createElement("div",{className:"flex flex-row-reverse-l flex-column-reverse justify-end justify-start-l",style:{minHeight:"100vh"}},e.createElement("div",{className:"flex-auto-l"},e.createElement("div",{className:"flex items-center ph3 ph4-l",style:{WebkitAppRegion:"drag",height:75,background:"#F0F6FA",paddingTop:"20px",paddingBottom:"15px"}},e.createElement("div",{className:"joyride-app-explore",style:{width:560}},e.createElement(F,{onBrowse:o,onInspect:a})),e.createElement("div",{className:"dn flex-ns flex-auto items-center justify-end"},e.createElement(P,null),e.createElement(N,{className:"joyride-app-status"}))),e.createElement("main",{className:"bg-white pv3 pa3 pa4-l"},r||"/welcome"===u||u.startsWith("/settings")?e.createElement(n,null):e.createElement(x.Z,null))),e.createElement("div",{className:"navbar-container flex-none-l bg-navy"},e.createElement(k,null))),e.createElement(s.ZP,{run:p,steps:f.us.getSteps({t:t}),styles:f.us.styles,callback:this.handleJoyrideCb,scrollToFirstStep:!0,disableOverlay:!0,locale:(0,d._)(t)}),e.createElement(O,null)))}}const U=(0,l.DropTarget)(c.FILE,{drop:(e,t,n)=>{if(t.didDrop())return;const{filesPromise:r}=t.getItem();n.addFiles(r)},canDrop:e=>!e.filesPathInfo||e.filesPathInfo.isMfs},((e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()})))(M),j=(0,r.$)("selectRoute","selectRouteInfo","selectIpfsReady","selectShowTooltip","doFilesNavigateTo","doExploreUserProvidedPath","doUpdateUrl","doUpdateHash","doSetupLocalStorage","doTryInitIpfs","doInitHelia","doFilesWrite","doDisableTooltip","selectFilesPathInfo",(0,a.Zh)("app")(U));var z=n(99491),$=n(4046),H=n(70876);const V={idleTimeout:2e3,idleAction:"APP_IDLE",stopWhenTabInactive:!1},G={timeout:500},Z=e=>({name:"appIdle",init:t=>{const n=Object.assign({},V,e),{idleAction:r,idleTimeout:o}=n;let i;o&&(i=((e,t,n)=>(0,z.Ds)((()=>{e?(0,z.Wn)((()=>(0,z.dV)(n,G))):(0,z.dV)(n,G)}),t))(n.stopWhenTabInactive,o,(()=>t.dispatch({type:r}))));const s=()=>{i&&i()};t.subscribe(s),s()}});const W=function(e){return(e=e||{}).windowSize=e.windowSize||864e5,{name:"nodeBandwidthChart",reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{in:[],out:[]}},t=arguments.length>1?arguments[1]:void 0;return"NODE_BANDWIDTH_CHART_DATA_UPDATED"===t.type?{...e,data:t.payload.chartData}:e},selectNodeBandwidthChartData:e=>e.nodeBandwidthChart.data,doUpdateNodeBandwidthChartData:(t,n,r)=>o=>{let{dispatch:i}=o;const s=(r={in:r.in.concat({x:n,y:parseInt(t.rateIn.toFixed(0),10)}),out:r.out.concat({x:n,y:parseInt(-1*t.rateOut.toFixed(0),10)})}).in.findIndex((t=>t.x>=n-e.windowSize));s>0&&(r.in=r.in.slice(s),r.out=r.out.slice(s)),i({type:"NODE_BANDWIDTH_CHART_DATA_UPDATED",payload:{chartData:r}})},reactUpdateNodeBandwidthChartData:(0,z.P1)("selectNodeBandwidth","selectNodeBandwidthLastSuccess","selectNodeBandwidthEnabled","selectNodeBandwidthChartData",((e,t,n,r)=>{if(e&&n)return!r.in.length||t>r.in[r.in.length-1].x?{actionCreator:"doUpdateNodeBandwidthChartData",args:[e,t,r]}:void 0}))}};var q=n(26034),K=n.n(q),Y=n(26723),J=n.n(Y);const X=(0,z.Jc)({name:"nodeBandwidth",actionBaseType:"NODE_BANDWIDTH",getPromise:async e=>{let{getIpfs:t}=e;try{return await J()(t().stats.bw())}catch(n){if(/bandwidth reporter disabled in config/.test(n))return{disabled:!0};throw n}},staleAfter:K().seconds(3),retryAfter:K().seconds(3),persist:!1,checkIfOnline:!1});X.selectNodeBandwidthEnabled=e=>!!e.nodeBandwidth.data&&!e.nodeBandwidth.data.disabled,X.selectNodeBandwidthLastSuccess=e=>e.nodeBandwidth.lastSuccess,X.reactNodeBandwidthFetchWhenIdle=(0,z.P1)("selectNodeBandwidthShouldUpdate","selectIpfsReady",((e,t)=>{if(e&&t)return{actionCreator:"doFetchNodeBandwidth"}}));const Q=X;var ee=n(73345);const te=K().seconds(10),ne=(0,z.Jc)({name:"peers",actionBaseType:"PEERS",getPromise:e=>{let{getIpfs:t}=e;return t().swarm.peers({verbose:!0,timeout:te})},staleAfter:te,persist:!1,checkIfOnline:!1}),re=ne.reducer;ne.reducer=(e,t)=>{const n=re(e,t);return"SET_SELECTED_PEER"===t.type?{...n,selectedPeers:t.payload}:n},ne.selectPeersCount=(0,z.P1)("selectPeers",(e=>Array.isArray(e)?e.length:0)),ne.doConnectSwarm=(e,t)=>async n=>{let{dispatch:r,getIpfs:o,store:i}=n;r({type:"SWARM_CONNECT_STARTED",payload:{addr:e}});const s=o();try{if(await s.swarm.connect(e),t){const t=(0,ee.HM)(e),n=t.getPeerId(),r=t.decapsulateCode(421).toString();let o=await s.config.get("Peering.Peers")||[];const a=o.find((e=>e.ID===n));a?a.Addrs.find((e=>e===r))||a.Addrs.push(r):o=[...o,{ID:n,Addrs:[r]}],await s.config.set("Peering.Peers",o),await i.doMarkConfigAsOutdated()}}catch(a){return r({type:"SWARM_CONNECT_FAILED",payload:{addr:e,error:a}})}return r({type:"SWARM_CONNECT_FINISHED",payload:{addr:e}})},ne.reactPeersFetchWhenIdle=(0,z.P1)("selectPeersShouldUpdate","selectIpfsConnected",((e,t)=>{if(e&&t)return{actionCreator:"doFetchPeers"}})),ne.reactPeersFetchWhenActive=(0,z.P1)("selectAppTime","selectRouteInfo","selectPeersRaw","selectIpfsConnected",((e,t,n,r,o)=>{const i=n.lastSuccess||0;if("/peers"===t.url&&o&&!n.isLoading&&e-i>K().seconds(5))return{actionCreator:"doFetchPeers"}})),ne.selectSelectedPeers=e=>e.peers.selectedPeers,ne.doSetSelectedPeers=e=>t=>{let{dispatch:n}=t;n({type:"SET_SELECTED_PEER",payload:e})};const oe=ne;function ie(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function se(e,t){const n=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise((t=>{const n=()=>indexedDB.databases().finally(t);e=setInterval(n,100),n()})).finally((()=>clearInterval(e)))}().then((()=>{const n=indexedDB.open(e);return n.onupgradeneeded=()=>n.result.createObjectStore(t),ie(n)}));return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let ae;function ue(){return ae||(ae=se("keyval-store","keyval")),ae}function le(e,t){return e("readonly",(e=>(e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},ie(e.transaction))))}var ce={__proto__:null,clear:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue())("readwrite",(e=>(e.clear(),ie(e.transaction))))},createStore:se,del:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue())("readwrite",(t=>(t.delete(e),ie(t.transaction))))},entries:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue();const t=[];return le(e,(e=>t.push([e.key,e.value]))).then((()=>t))},get:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue())("readonly",(t=>ie(t.get(e))))},getMany:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue())("readonly",(t=>Promise.all(e.map((e=>ie(t.get(e)))))))},keys:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue();const t=[];return le(e,(e=>t.push(e.key))).then((()=>t))},promisifyRequest:ie,set:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue())("readwrite",(n=>(n.put(t,e),ie(n.transaction))))},setMany:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue())("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),ie(t.transaction))))},update:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue())("readwrite",(n=>new Promise(((r,o)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),r(ie(n.transaction))}catch(i){o(i)}}}))))},values:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue();const t=[];return le(e,(e=>t.push(e.value))).then((()=>t))}},fe={maxAge:1/0,version:0,lib:ce},de=function(e){return Object.assign({},fe,e)},he=function(e,t,n){var r=de(t),o=r.maxAge,i=r.version,s=r.lib;return s.get(e,n).then(JSON.parse).then((function(t){return Date.now()-t.time>o||i!==t.version?(s.del(e,n),null):t.data})).catch((function(){return null}))},pe=function(e){var t,n=de(e);return n.name&&(t=se(n.name,n.name)),{get:function(e){return he(e,n,t)},set:function(e,r){return function(e,t,n,r){var o=de(n),i=o.lib,s=o.version;return i.set(e,JSON.stringify({version:s,time:Date.now(),data:t}),r).catch((function(){return null}))}(e,r,n,t)},getAll:function(){return function(e,t){var n,r=de(e);return r.lib.keys(t).then((function(e){return n=e,Promise.all(n.map((function(e){return he(e,r,t)})))})).then((function(e){return e.reduce((function(e,t,r){return t&&(e[n[r]]=t),e}),{})})).catch((function(){}))}(n,t)},del:function(e){return n.lib.del(e,t)},clear:function(){return n.lib.clear(t)},keys:function(){return n.lib.keys(t)}}},ge=Object.create,ye=Object.defineProperty,me=Object.getOwnPropertyDescriptor,ve=Object.getOwnPropertyNames,be=Object.getPrototypeOf,we=Object.prototype.hasOwnProperty,Ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ae=(e,t,n)=>(n=null!=e?ge(be(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of ve(t))!we.call(e,o)&&o!==n&&ye(e,o,{get:()=>t[o],enumerable:!(r=me(t,o))||r.enumerable});return e})(!t&&e&&e.__esModule?n:ye(n,"default",{value:e,enumerable:!0}),e)),Se=Ee((e=>{e.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},e.toByteArray=function(e){var t,n,i=s(e),a=i[0],u=i[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,u)),c=0,f=u>0?a-4:a;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},e.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,l=r-o;a<l;a+=s)i.push(u(e,a,a+s>l?l:a+s));return 1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};var t,n=[],r=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,64;t<64;++t)n[t]=i[t],r[i.charCodeAt(t)]=t;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function u(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(a(r));return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63})),Ce=Ee((e=>{e.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,f=n?o-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-c)-1,h>>=-c,c+=a;c>0;i=256*i+e[t+f],f+=d,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+e[t+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=l}return(h?-1:1)*s*Math.pow(2,i-r)},e.write=function(e,t,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*u-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[n+h]=255&s,h+=p,s/=256,l-=8);e[n+h-p]|=128*g}})),Te=Ee((e=>{var t=Se(),n=Ce(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=0|h(e,t),r=i(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){let t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);let o=function(e){if(s.isBuffer(e)){let t=0|d(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||q(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(o)return o;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),i(e<0?0:0|d(e))}function c(e){let t=e.length<0?0:0|d(e.length),n=i(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,s.prototype),r}function d(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(o)return r?-1:V(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){let i,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let r=-1;for(i=n;i<a;i++)if(l(e,i)===l(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===u)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+u>a&&(n=a-u),i=n;i>=0;i--){let n=!0;for(let r=0;r<u;r++)if(l(e,i+r)!==l(t,r)){n=!1;break}if(n)return i}return-1}function v(e,t,n,r){n=Number(n)||0;let o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;let i,s=t.length;for(r>s/2&&(r=s/2),i=0;i<r;++i){let r=parseInt(t.substr(2*i,2),16);if(q(r))return i;e[n+i]=r}return i}function b(e,t,n,r){return Z(V(t,e.length-n),e,n,r)}function w(e,t,n,r){return Z(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return Z(G(t),e,n,r)}function A(e,t,n,r){return Z(function(e,t){let n,r,o,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function C(e,t,n){n=Math.min(e.length,n);let r=[],o=t;for(;o<n;){let t=e[o],i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=n){let n,r,a,u;switch(s){case 1:t<128&&(i=t);break;case 2:n=e[o+1],128===(192&n)&&(u=(31&t)<<6|63&n,u>127&&(i=u));break;case 3:n=e[o+1],r=e[o+2],128===(192&n)&&128===(192&r)&&(u=(15&t)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=e[o+1],r=e[o+2],a=e[o+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(e){let t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return a(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(W(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let t=e[n];if(W(t,Uint8Array))o+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!s.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,o){if(W(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),u=Math.min(i,a),l=this.slice(r,o),c=e.slice(t,n);for(let s=0;s<u;++s)if(l[s]!==c[s]){i=l[s],a=c[s];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}let o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function k(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function x(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function I(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let i=t;i<n;++i)o+=K[e[i]];return o}function _(e,t,n){let r=e.slice(t,n),o="";for(let i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function O(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,o){j(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function D(e,t,n,r,o){j(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function B(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,r,o,i){return t=+t,r>>>=0,i||B(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function L(e,t,r,o,i){return t=+t,r>>>=0,i||B(e,0,r,8),n.write(e,t,r,o,52,8),r+8}s.prototype.slice=function(e,t){let n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=Y((function(e){z(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),s.prototype.readBigUInt64BE=Y((function(e){z(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=Y((function(e){z(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),s.prototype.readBigInt64BE=Y((function(e){z(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&$(e,this.length-8);let r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=Y((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=Y((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=Y((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=Y((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{let i=s.isBuffer(e)?e:s.from(e,r),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%a]}return this};var F={};function M(e,t,n){F[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",n=e.length,r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function j(e,t,n,r,o,i){if(e>n||e<t){let r,o="bigint"==typeof t?"n":"";throw r=i>3?0===t||t===BigInt(0)?`>= 0${o} and < 2${o} ** ${8*(i+1)}${o}`:`>= -(2${o} ** ${8*(i+1)-1}${o}) and < 2 ** ${8*(i+1)-1}${o}`:`>= ${t}${o} and <= ${n}${o}`,new F.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){z(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&$(t,e.length-(n+1))}(r,o,i)}function z(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,n){throw Math.floor(e)!==e?(z(e,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=U(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=U(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);var H=/[^+/0-9A-Za-z-_]/g;function V(e,t){t=t||1/0;let n,r=e.length,o=null,i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Z(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!==e}var K=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function Y(e){return typeof BigInt>"u"?J:e}function J(){throw new Error("BigInt not supported")}})),ke=Ee((()=>{})),xe=Ee((e=>{var t=e,{Buffer:n}=Te(),r=ke();t.toBuffer=function(e,t,r){let o;if(r=~~r,this.isV4Format(e))o=t||n.alloc(r+4),e.split(/\./g).map((e=>{o[r++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){let i,s=e.split(":",8);for(i=0;i<s.length;i++){let e;this.isV4Format(s[i])&&(e=this.toBuffer(s[i]),s[i]=e.slice(0,2).toString("hex")),e&&++i<8&&s.splice(i,0,e.slice(2,4).toString("hex"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(i=0;i<s.length&&""!==s[i];i++);let e=[i,1];for(i=9-s.length;i>0;i--)e.push("0");s.splice(...e)}for(o=t||n.alloc(r+16),i=0;i<s.length;i++){let e=parseInt(s[i],16);o[r++]=e>>8&255,o[r++]=255&e}}if(!o)throw Error(`Invalid ip address: ${e}`);return o},t.toString=function(e,t,n){t=~~t;let r=[];if(4===(n=n||e.length-t)){for(let o=0;o<n;o++)r.push(e[t+o]);r=r.join(".")}else if(16===n){for(let o=0;o<n;o+=2)r.push(e.readUInt16BE(t+o).toString(16));r=r.join(":"),r=r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),r=r.replace(/:{3,4}/,"::")}return r};var o=/^(\d{1,3}\.){3,3}\d{1,3}$/,i=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function s(e){return 4===e?"ipv4":6===e?"ipv6":e?e.toLowerCase():"ipv4"}t.isV4Format=function(e){return o.test(e)},t.isV6Format=function(e){return i.test(e)},t.fromPrefixLen=function(e,r){let o=4;"ipv6"===(r=e>32?"ipv6":s(r))&&(o=16);let i=n.alloc(o);for(let t=0,n=i.length;t<n;++t){let n=8;e<8&&(n=e),e-=n,i[t]=255&~(255>>n)}return t.toString(i)},t.mask=function(e,r){e=t.toBuffer(e),r=t.toBuffer(r);let o,i=n.alloc(Math.max(e.length,r.length));if(e.length===r.length)for(o=0;o<e.length;o++)i[o]=e[o]&r[o];else if(4===r.length)for(o=0;o<r.length;o++)i[o]=e[e.length-4+o]&r[o];else{for(o=0;o<i.length-6;o++)i[o]=0;for(i[10]=255,i[11]=255,o=0;o<e.length;o++)i[o+12]=e[o]&r[o+12];o+=12}for(;o<i.length;o++)i[o]=0;return t.toString(i)},t.cidr=function(e){let n=e.split("/"),r=n[0];if(2!==n.length)throw new Error(`invalid CIDR subnet: ${r}`);let o=t.fromPrefixLen(parseInt(n[1],10));return t.mask(r,o)},t.subnet=function(e,n){let r=t.toLong(t.mask(e,n)),o=t.toBuffer(n),i=0;for(let t=0;t<o.length;t++)if(255===o[t])i+=8;else{let e=255&o[t];for(;e;)e=e<<1&255,i++}let s=2**(32-i);return{networkAddress:t.fromLong(r),firstAddress:s<=2?t.fromLong(r):t.fromLong(r+1),lastAddress:s<=2?t.fromLong(r+s-1):t.fromLong(r+s-2),broadcastAddress:t.fromLong(r+s-1),subnetMask:n,subnetMaskLength:i,numHosts:s<=2?s:s-2,length:s,contains:e=>r===t.toLong(t.mask(e,n))}},t.cidrSubnet=function(e){let n=e.split("/"),r=n[0];if(2!==n.length)throw new Error(`invalid CIDR subnet: ${r}`);let o=t.fromPrefixLen(parseInt(n[1],10));return t.subnet(r,o)},t.not=function(e){let n=t.toBuffer(e);for(let t=0;t<n.length;t++)n[t]=255^n[t];return t.toString(n)},t.or=function(e,n){if(e=t.toBuffer(e),n=t.toBuffer(n),e.length===n.length){for(let t=0;t<e.length;++t)e[t]|=n[t];return t.toString(e)}let r=e,o=n;n.length>e.length&&(r=n,o=e);let i=r.length-o.length;for(let t=i;t<r.length;++t)r[t]|=o[t-i];return t.toString(r)},t.isEqual=function(e,n){if(e=t.toBuffer(e),n=t.toBuffer(n),e.length===n.length){for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}if(4===n.length){let t=n;n=e,e=t}for(let t=0;t<10;t++)if(0!==n[t])return!1;let r=n.readUInt16BE(10);if(0!==r&&65535!==r)return!1;for(let t=0;t<4;t++)if(e[t]!==n[t+12])return!1;return!0},t.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},t.isPublic=function(e){return!t.isPrivate(e)},t.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},t.loopback=function(e){if("ipv4"!==(e=s(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},t.address=function(e,n){let o=r.networkInterfaces();if(n=s(n),e&&"private"!==e&&"public"!==e){let t=o[e].filter((e=>s(e.family)===n));return 0===t.length?void 0:t[0].address}let i=Object.keys(o).map((r=>{let i=o[r].filter((r=>(r.family=s(r.family),r.family===n&&!t.isLoopback(r.address)&&(!e||("public"===e?t.isPrivate(r.address):t.isPublic(r.address))))));return i.length?i[0].address:void 0})).filter(Boolean);return i.length?i[0]:t.loopback(n)},t.toLong=function(e){let t=0;return e.split(".").forEach((e=>{t<<=8,t+=parseInt(e)})),t>>>0},t.fromLong=function(e){return`${e>>>24}.${e>>16&255}.${e>>8&255}.${255&e}`}})),Ie=Ee(((e,t)=>{var n,r=typeof self<"u"?self:e,o=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();n=o,function(e){var t="URLSearchParams"in n,r="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),i="FormData"in n,s="ArrayBuffer"in n;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=p(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=c(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!n&&null!=e._bodyInit&&(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function E(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t}function A(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];A.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch{e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(t,n){return new Promise((function(r,i){var s=new b(t,n);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:E(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;r(new A(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(typeof s._bodyInit>"u"?null:s._bodyInit)}))}C.polyfill=!0,n.fetch||(n.fetch=C,n.Headers=d,n.Request=b,n.Response=A),e.Headers=d,e.Request=b,e.Response=A,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})}({}),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=o;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})),_e=(e,t,n,r)=>{if("length"===n||"prototype"===n||"arguments"===n||"caller"===n)return;let o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!Oe(o,i)&&r||Object.defineProperty(e,n,i)},Oe=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Ne=(e,t)=>{let n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},Pe=(e,t)=>`/* Wrapped ${e}*/\n${t}`,De=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Be=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Re=(e,t,n)=>{let r=""===n?"":`with ${n.trim()}() `,o=Pe.bind(null,r,t.toString());Object.defineProperty(o,"name",Be),Object.defineProperty(e,"toString",{...De,value:o})};var Le=new WeakMap;var Fe=Ae(xe(),1),Me=null,Ue=null;function je(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";let t=typeof e;if(Me.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";let n=function(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Ue.includes(t))return t}(e);return n||"Object"}var ze=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};ze.uint=new ze(0,"uint",!0),ze.negint=new ze(1,"negint",!0),ze.bytes=new ze(2,"bytes",!0),ze.string=new ze(3,"string",!0),ze.array=new ze(4,"array",!1),ze.map=new ze(5,"map",!1),ze.tag=new ze(6,"tag",!1),ze.float=new ze(7,"float",!0),ze.false=new ze(7,"false",!0),ze.true=new ze(7,"true",!0),ze.null=new ze(7,"null",!0),ze.undefined=new ze(7,"undefined",!0),ze.break=new ze(7,"break",!0);var $e=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}},He=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,Ve=new TextDecoder,Ge=new TextEncoder;function Ze(e){return He&&globalThis.Buffer.isBuffer(e)}var We=He?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):Qe(e,t,n):(e,t,n)=>n-t>64?Ve.decode(e.subarray(t,n)):Qe(e,t,n),qe=He?e=>e.length>64?globalThis.Buffer.from(e):Xe(e):e=>e.length>64?Ge.encode(e):Xe(e),Ke=He?(e,t,n)=>Ze(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),Ye=He?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),function(e){return e instanceof Uint8Array?Ze(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}(globalThis.Buffer.concat(e,t))):(e,t)=>{let n=new Uint8Array(t),r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},Je=He?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Xe(e,t=1/0){let n,r=e.length,o=null,i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Qe(e,t,n){let r=[];for(;t<n;){let o=e[t],i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=n){let n,r,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:n=e[t+1],128===(192&n)&&(u=(31&o)<<6|63&n,u>127&&(i=u));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(u=(15&o)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),t+=s}return function(e){let t=e.length;if(t<=et)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=et));return n}(r)}var et=4096;var tt="CBOR decode error:",nt="CBOR encode error:",rt=[];function ot(e,t,n){if(e.length-t<n)throw new Error(`${tt} not enough data for type`)}rt[23]=1,rt[24]=2,rt[25]=3,rt[26]=5,rt[27]=9;var it=[24,256,65536,4294967296,BigInt("18446744073709551616")];function st(e,t,n){ot(e,t,1);let r=e[t];if(!0===n.strict&&r<it[0])throw new Error(`${tt} integer encoded in more bytes than necessary (strict decode)`);return r}function at(e,t,n){ot(e,t,2);let r=e[t]<<8|e[t+1];if(!0===n.strict&&r<it[1])throw new Error(`${tt} integer encoded in more bytes than necessary (strict decode)`);return r}function ut(e,t,n){ot(e,t,4);let r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<it[2])throw new Error(`${tt} integer encoded in more bytes than necessary (strict decode)`);return r}function lt(e,t,n){ot(e,t,8);let r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<it[3])throw new Error(`${tt} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error(`${tt} integers outside of the safe integer range are not supported`)}function ct(e,t){return ft(e,0,t.value)}function ft(e,t,n){if(n<it[0]){let r=Number(n);e.push([t|r])}else if(n<it[1]){let r=Number(n);e.push([24|t,r])}else if(n<it[2]){let r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<it[3]){let r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{let r=BigInt(n);if(!(r<it[4]))throw new Error(`${tt} encountered BigInt larger than allowable range`);{let n=[27|t,0,0,0,0,0,0,0],o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,e.push(n)}}}ct.encodedSize=function(e){return ft.encodedSize(e.value)},ft.encodedSize=function(e){return e<it[0]?1:e<it[1]?2:e<it[2]?3:e<it[3]?5:9},ct.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};var dt=BigInt(-1),ht=BigInt(1);function pt(e,t){let n=t.value,r="bigint"==typeof n?n*dt-ht:-1*n-1;ft(e,t.type.majorEncoded,r)}function gt(e,t,n,r){ot(e,t,n+r);let o=Ke(e,t+n,t+n+r);return new $e(ze.bytes,o,n+r)}function yt(e,t,n,r){return gt(e,t,1,n)}function mt(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===ze.string?qe(e.value):e.value),e.encodedBytes}function vt(e,t){let n=mt(t);ft(e,t.type.majorEncoded,n.length),e.push(n)}function bt(e,t,n,r,o){let i=n+r;ot(e,t,i);let s=new $e(ze.string,We(e,t+n,t+i),i);return!0===o.retainStringBytes&&(s.byteValue=Ke(e,t+n,t+i)),s}function wt(e,t,n,r){return bt(e,t,1,n,r)}pt.encodedSize=function(e){let t=e.value,n="bigint"==typeof t?t*dt-ht:-1*t-1;return n<it[0]?1:n<it[1]?2:n<it[2]?3:n<it[3]?5:9},pt.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},vt.encodedSize=function(e){let t=mt(e);return ft.encodedSize(t.length)+t.length},vt.compareTokens=function(e,t){return function(e,t){return e.length<t.length?-1:e.length>t.length?1:function(e,t){if(Ze(e)&&Ze(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(e,t)}(mt(e),mt(t))};var Et=vt;function At(e,t,n,r){return new $e(ze.array,r,n)}function St(e,t,n,r){return At(0,0,1,n)}function Ct(e,t){ft(e,ze.array.majorEncoded,t.value)}function Tt(e,t,n,r){return new $e(ze.map,r,n)}function kt(e,t,n,r){return Tt(0,0,1,n)}function xt(e,t){ft(e,ze.map.majorEncoded,t.value)}function It(e,t,n,r){return new $e(ze.tag,n,1)}function _t(e,t){ft(e,ze.tag.majorEncoded,t.value)}Ct.compareTokens=ct.compareTokens,Ct.encodedSize=function(e){return ft.encodedSize(e.value)},xt.compareTokens=ct.compareTokens,xt.encodedSize=function(e){return ft.encodedSize(e.value)},_t.compareTokens=ct.compareTokens,_t.encodedSize=function(e){return ft.encodedSize(e.value)};var Ot=20,Nt=21,Pt=22,Dt=23;function Bt(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${tt} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${tt} Infinity values are not supported`)}return new $e(ze.float,e,t)}function Rt(e,t,n){let r=t.value;if(!1===r)e.push([ze.float.majorEncoded|Ot]);else if(!0===r)e.push([ze.float.majorEncoded|Nt]);else if(null===r)e.push([ze.float.majorEncoded|Pt]);else if(void 0===r)e.push([ze.float.majorEncoded|Dt]);else{let t,o=!1;(!n||!0!==n.float64)&&(Ut(r),t=jt(Mt,1),r===t||Number.isNaN(r)?(Mt[0]=249,e.push(Mt.slice(0,3)),o=!0):(zt(r),t=$t(Mt,1),r===t&&(Mt[0]=250,e.push(Mt.slice(0,5)),o=!0))),o||(function(e){Ft.setFloat64(0,e,!1)}(r),t=Ht(Mt,1),Mt[0]=251,e.push(Mt.slice(0,9)))}}Rt.encodedSize=function(e,t){let n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){Ut(n);let e=jt(Mt,1);if(n===e||Number.isNaN(n))return 3;if(zt(n),e=$t(Mt,1),n===e)return 5}return 9};var Lt=new ArrayBuffer(9),Ft=new DataView(Lt,1),Mt=new Uint8Array(Lt,0);function Ut(e){if(e===1/0)Ft.setUint16(0,31744,!1);else if(e===-1/0)Ft.setUint16(0,64512,!1);else if(Number.isNaN(e))Ft.setUint16(0,32256,!1);else{Ft.setFloat32(0,e);let t=Ft.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Ft.setUint16(0,31744,!1);else if(0===n)Ft.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{let e=n-127;e<-24?Ft.setUint16(0,0):e<-14?Ft.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Ft.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function jt(e,t){if(e.length-t<2)throw new Error(`${tt} not enough data for float16`);let n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;let r,o=n>>10&31,i=1023&n;return r=0===o?i*2**-24:31!==o?(i+1024)*2**(o-25):0===i?1/0:NaN,32768&n?-r:r}function zt(e){Ft.setFloat32(0,e,!1)}function $t(e,t){if(e.length-t<4)throw new Error(`${tt} not enough data for float32`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function Ht(e,t){if(e.length-t<8)throw new Error(`${tt} not enough data for float64`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function Vt(e,t,n){throw new Error(`${tt} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Gt(e){return()=>{throw new Error(`${tt} ${e}`)}}Rt.compareTokens=ct.compareTokens;var Zt=[];for(let n=0;n<=23;n++)Zt[n]=Vt;Zt[24]=function(e,t,n,r){return new $e(ze.uint,st(e,t+1,r),2)},Zt[25]=function(e,t,n,r){return new $e(ze.uint,at(e,t+1,r),3)},Zt[26]=function(e,t,n,r){return new $e(ze.uint,ut(e,t+1,r),5)},Zt[27]=function(e,t,n,r){return new $e(ze.uint,lt(e,t+1,r),9)},Zt[28]=Vt,Zt[29]=Vt,Zt[30]=Vt,Zt[31]=Vt;for(let n=32;n<=55;n++)Zt[n]=Vt;Zt[56]=function(e,t,n,r){return new $e(ze.negint,-1-st(e,t+1,r),2)},Zt[57]=function(e,t,n,r){return new $e(ze.negint,-1-at(e,t+1,r),3)},Zt[58]=function(e,t,n,r){return new $e(ze.negint,-1-ut(e,t+1,r),5)},Zt[59]=function(e,t,n,r){let o=lt(e,t+1,r);if("bigint"!=typeof o){let e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new $e(ze.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${tt} integers outside of the safe integer range are not supported`);return new $e(ze.negint,dt-BigInt(o),9)},Zt[60]=Vt,Zt[61]=Vt,Zt[62]=Vt,Zt[63]=Vt;for(let n=64;n<=87;n++)Zt[n]=yt;Zt[88]=function(e,t,n,r){return gt(e,t,2,st(e,t+1,r))},Zt[89]=function(e,t,n,r){return gt(e,t,3,at(e,t+1,r))},Zt[90]=function(e,t,n,r){return gt(e,t,5,ut(e,t+1,r))},Zt[91]=function(e,t,n,r){let o=lt(e,t+1,r);if("bigint"==typeof o)throw new Error(`${tt} 64-bit integer bytes lengths not supported`);return gt(e,t,9,o)},Zt[92]=Vt,Zt[93]=Vt,Zt[94]=Vt,Zt[95]=Gt("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)Zt[n]=wt;Zt[120]=function(e,t,n,r){return bt(e,t,2,st(e,t+1,r),r)},Zt[121]=function(e,t,n,r){return bt(e,t,3,at(e,t+1,r),r)},Zt[122]=function(e,t,n,r){return bt(e,t,5,ut(e,t+1,r),r)},Zt[123]=function(e,t,n,r){let o=lt(e,t+1,r);if("bigint"==typeof o)throw new Error(`${tt} 64-bit integer string lengths not supported`);return bt(e,t,9,o,r)},Zt[124]=Vt,Zt[125]=Vt,Zt[126]=Vt,Zt[127]=Gt("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)Zt[n]=St;Zt[152]=function(e,t,n,r){return At(0,0,2,st(e,t+1,r))},Zt[153]=function(e,t,n,r){return At(0,0,3,at(e,t+1,r))},Zt[154]=function(e,t,n,r){return At(0,0,5,ut(e,t+1,r))},Zt[155]=function(e,t,n,r){let o=lt(e,t+1,r);if("bigint"==typeof o)throw new Error(`${tt} 64-bit integer array lengths not supported`);return At(0,0,9,o)},Zt[156]=Vt,Zt[157]=Vt,Zt[158]=Vt,Zt[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${tt} indefinite length items not allowed`);return At(0,0,1,1/0)};for(let n=160;n<=183;n++)Zt[n]=kt;Zt[184]=function(e,t,n,r){return Tt(0,0,2,st(e,t+1,r))},Zt[185]=function(e,t,n,r){return Tt(0,0,3,at(e,t+1,r))},Zt[186]=function(e,t,n,r){return Tt(0,0,5,ut(e,t+1,r))},Zt[187]=function(e,t,n,r){let o=lt(e,t+1,r);if("bigint"==typeof o)throw new Error(`${tt} 64-bit integer map lengths not supported`);return Tt(0,0,9,o)},Zt[188]=Vt,Zt[189]=Vt,Zt[190]=Vt,Zt[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${tt} indefinite length items not allowed`);return Tt(0,0,1,1/0)};for(let n=192;n<=215;n++)Zt[n]=It;Zt[216]=function(e,t,n,r){return new $e(ze.tag,st(e,t+1,r),2)},Zt[217]=function(e,t,n,r){return new $e(ze.tag,at(e,t+1,r),3)},Zt[218]=function(e,t,n,r){return new $e(ze.tag,ut(e,t+1,r),5)},Zt[219]=function(e,t,n,r){return new $e(ze.tag,lt(e,t+1,r),9)},Zt[220]=Vt,Zt[221]=Vt,Zt[222]=Vt,Zt[223]=Vt;for(let n=224;n<=243;n++)Zt[n]=Gt("simple values are not supported");Zt[244]=Vt,Zt[245]=Vt,Zt[246]=Vt,Zt[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${tt} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new $e(ze.null,null,1):new $e(ze.undefined,void 0,1)},Zt[248]=Gt("simple values are not supported"),Zt[249]=function(e,t,n,r){return Bt(jt(e,t+1),3,r)},Zt[250]=function(e,t,n,r){return Bt($t(e,t+1),5,r)},Zt[251]=function(e,t,n,r){return Bt(Ht(e,t+1),9,r)},Zt[252]=Vt,Zt[253]=Vt,Zt[254]=Vt,Zt[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${tt} indefinite length items not allowed`);return new $e(ze.break,void 0,1)};var Wt=[];for(let n=0;n<24;n++)Wt[n]=new $e(ze.uint,n,1);for(let n=-1;n>=-24;n--)Wt[31-n]=new $e(ze.negint,n,1);Wt[64]=new $e(ze.bytes,new Uint8Array(0),1),Wt[96]=new $e(ze.string,"",1),Wt[128]=new $e(ze.array,0,1),Wt[160]=new $e(ze.map,0,1),Wt[244]=new $e(ze.false,!1,1),Wt[245]=new $e(ze.true,!0,1),Wt[246]=new $e(ze.null,null,1);(function(){let e=[];e[ze.uint.major]=ct,e[ze.negint.major]=pt,e[ze.bytes.major]=vt,e[ze.string.major]=Et,e[ze.array.major]=Ct,e[ze.map.major]=xt,e[ze.tag.major]=_t,e[ze.float.major]=Rt})(),new class{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){let e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Je(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Ke(n,0,this.cursor)}else t=Ye(this.chunks,this.cursor);return e&&this.reset(),t}};var qt=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${nt} object contains circular references`);return new qt(t,e)}},Kt={null:new $e(ze.null,null),undefined:new $e(ze.undefined,void 0),true:new $e(ze.true,!0),false:new $e(ze.false,!1),emptyArray:new $e(ze.array,0),emptyMap:new $e(ze.map,0)},Yt={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new $e(e>=0?ze.uint:ze.negint,e):new $e(ze.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new $e(ze.uint,e):new $e(ze.negint,e),Uint8Array:(e,t,n,r)=>new $e(ze.bytes,e),string:(e,t,n,r)=>new $e(ze.string,e),boolean:(e,t,n,r)=>e?Kt.true:Kt.false,null:(e,t,n,r)=>Kt.null,undefined:(e,t,n,r)=>Kt.undefined,ArrayBuffer:(e,t,n,r)=>new $e(ze.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new $e(ze.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[Kt.emptyArray,new $e(ze.break)]:Kt.emptyArray;r=qt.createCheck(r,e);let o=[],i=0;for(let s of e)o[i++]=Jt(s,n,r);return n.addBreakTokens?[new $e(ze.array,e.length),o,new $e(ze.break)]:[new $e(ze.array,e.length),o]},Object(e,t,n,r){let o="Object"!==t,i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return!0===n.addBreakTokens?[Kt.emptyMap,new $e(ze.break)]:Kt.emptyMap;r=qt.createCheck(r,e);let a=[],u=0;for(let l of i)a[u++]=[Jt(l,n,r),Jt(o?e.get(l):e[l],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new $e(ze.map,s),a,new $e(ze.break)]:[new $e(ze.map,s),a]}};Yt.Map=Yt.Object,Yt.Buffer=Yt.Uint8Array;for(let n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Yt[`${n}Array`]=Yt.DataView;function Jt(e,t={},n){let r=je(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||Yt[r];if("function"==typeof o){let i=o(e,r,t,n);if(null!=i)return i}let i=Yt[r];if(!i)throw new Error(`${nt} unsupported type: ${r}`);return i(e,r,t,n)}var Xt={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Qt=Symbol.for("DONE"),en=Symbol.for("BREAK");function tn(e,t){if(e.done())return Qt;let n=e.next();if(n.type===ze.break)return en;if(n.type.terminal)return n.value;if(n.type===ze.array)return function(e,t,n){let r=[];for(let o=0;o<e.value;o++){let i=tn(t,n);if(i===en){if(e.value===1/0)break;throw new Error(`${tt} got unexpected break to lengthed array`)}if(i===Qt)throw new Error(`${tt} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=i}return r}(n,e,t);if(n.type===ze.map)return function(e,t,n){let r=!0===n.useMaps,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<e.value;s++){let a=tn(t,n);if(a===en){if(e.value===1/0)break;throw new Error(`${tt} got unexpected break to lengthed map`)}if(a===Qt)throw new Error(`${tt} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(!0!==r&&"string"!=typeof a)throw new Error(`${tt} non-string keys not supported (got ${typeof a})`);let u=tn(t,n);if(u===Qt)throw new Error(`${tt} found map but not enough entries (got ${s} [no value], expected ${e.value})`);r?i.set(a,u):o[a]=u}return r?i:o}(n,e,t);if(n.type===ze.tag){if(t.tags&&"function"==typeof t.tags[n.value]){let r=tn(e,t);return t.tags[n.value](r)}throw new Error(`${tt} tag not supported (${n.value})`)}throw new Error("unsupported")}function nn(e,t){if(!(e instanceof Uint8Array))throw new Error(`${tt} data to decode must be a Uint8Array`);let n=(t=Object.assign({},Xt,t)).tokenizer||new class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=Wt[e];if(void 0===t){let n=Zt[e];if(!n)throw new Error(`${tt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let r=31&e;t=n(this.data,this.pos,r,this.options)}return this.pos+=t.encodedLength,t}}(e,t),r=tn(n,t);if(r===Qt)throw new Error(`${tt} did not find any content to decode`);if(r===en)throw new Error(`${tt} got unexpected break`);if(!n.done())throw new Error(`${tt} too many terminals, data makes no sense`);return r}var rn=function e(t,n,r){n=n||[];for(var o=r=r||0;t>=an;)n[r++]=255&t|on,t/=128;for(;t&sn;)n[r++]=255&t|on,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},on=128,sn=-128,an=Math.pow(2,31);var un=function e(t,n){var r,o=0,i=0,s=n=n||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[s++],o+=i<28?(r&cn)<<i:(r&cn)*Math.pow(2,i),i+=7}while(r>=ln);return e.bytes=s-n,o},ln=128,cn=127;var fn=Math.pow(2,7),dn=Math.pow(2,14),hn=Math.pow(2,21),pn=Math.pow(2,28),gn=Math.pow(2,35),yn=Math.pow(2,42),mn=Math.pow(2,49),vn=Math.pow(2,56),bn=Math.pow(2,63),wn={encode:rn,decode:un,encodingLength:function(e){return e<fn?1:e<dn?2:e<hn?3:e<pn?4:e<gn?5:e<yn?6:e<mn?7:e<vn?8:e<bn?9:10}},En=(e,t=0)=>[wn.decode(e,t),wn.decode.bytes],An=(e,t,n=0)=>(wn.encode(e,t,n),t),Sn=e=>wn.encodingLength(e),Cn=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Tn=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}};var kn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==n[s])throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,u=e.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===u;)r++,t++;for(var i=(e.length-t)*l+1>>>0,s=new Uint8Array(i);e[t];){var c=n[e.charCodeAt(t)];if(255===c)return;for(var f=0,d=i-1;(0!==c||f<o)&&-1!==d;d--,f++)c+=a*s[d]>>>0,s[d]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");o=f,t++}if(" "!==e[t]){for(var h=i-o;h!==i&&0===s[h];)h++;for(var p=new Uint8Array(r+(i-h)),g=r;h!==i;)p[g++]=s[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var s=(i-o)*c+1>>>0,l=new Uint8Array(s);o!==i;){for(var f=t[o],d=0,h=s-1;(0!==f||d<r)&&-1!==h;h--,d++)f+=256*l[h]>>>0,l[h]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=d,o++}for(var p=s-r;p!==s&&0===l[p];)p++;for(var g=u.repeat(n);p<s;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:f,decode:function(e){var n=f(e);if(n)return n;throw new Error(`Non-${t} character`)}}},xn=(e,t)=>new class{constructor(e){this.decoders=e}or(e){return xn(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),In=({name:e,prefix:t,encode:n,decode:r})=>new class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}(e,t,n),this.decoder=new class{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return xn(this,e)}}(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}(e,t,n,r),_n=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:o}=kn(n,t);return In({prefix:e,name:t,encode:r,decode:e=>Cn(o(e))})},On=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>In({prefix:t,name:e,encode:e=>((e,t,n)=>{let r="="===t[t.length-1],o=(1<<n)-1,i="",s=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{let o={};for(let c=0;c<t.length;++c)o[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;let s=new Uint8Array(i*n/8|0),a=0,u=0,l=0;for(let c=0;c<i;++c){let t=o[e[c]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);u=u<<n|t,a+=n,a>=8&&(a-=8,s[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,r,n,e)}),Nn=_n({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Pn=(_n({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),On({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),Dn=(On({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),On({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),On({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),On({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),On({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),On({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),On({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),On({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),class{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:$n,byteLength:$n,code:zn,version:zn,multihash:zn,bytes:zn,_baseCache:$n,asCID:$n})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==Fn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Mn)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Dn.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=((e,t)=>{let n=t.byteLength,r=Sn(e),o=r+Sn(n),i=new Uint8Array(o+n);return An(e,i,0),An(n,i,r),i.set(t,o),new Tn(e,n,t,i)})(e,t);return Dn.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&((e,t)=>e===t||e.code===t.code&&e.size===t.size&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0})(e.bytes,t.bytes))(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:r}=this;return 0===n?Rn(t,r,e||Nn.encoder):Ln(t,r,e||Pn.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Hn(/^0\.0/,Vn),!(!e||!e[jn]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Dn)return e;if(null!=e&&e.asCID===e){let{version:t,code:n,multihash:r,bytes:o}=e;return new Dn(t,n,r,o||Un(t,n,r.bytes))}if(null!=e&&!0===e[jn]){let{version:t,multihash:n,code:r}=e,o=(e=>{let t=Cn(e),[n,r]=En(t),[o,i]=En(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Tn(n,o,s,t)})(n);return Dn.create(t,r,o)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==Fn)throw new Error(`Version 0 CID must use dag-pb (code: ${Fn}) block encoding`);return new Dn(e,t,n,n.bytes);case 1:{let r=Un(e,t,n.bytes);return new Dn(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Dn.create(0,Fn,e)}static createV1(e,t){return Dn.create(1,e,t)}static decode(e){let[t,n]=Dn.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Dn.inspectBytes(e),n=t.size-t.multihashSize,r=Cn(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=r.subarray(t.multihashSize-t.digestSize),i=new Tn(t.multihashCode,t.digestSize,o,r);return[0===t.version?Dn.createV0(i):Dn.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=En(e.subarray(t));return t+=r,n},r=n(),o=Fn;if(18===r?(r=0,t=0):1===r&&(o=n()),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let i=t,s=n(),a=n(),u=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:u-i,size:u}}static parse(e,t){let[n,r]=Bn(e,t),o=Dn.decode(r);return o._baseCache.set(n,e),o}}),Bn=(e,t)=>{switch(e[0]){case"Q":{let n=t||Nn;return[Nn.prefix,n.decode(`${Nn.prefix}${e}`)]}case Nn.prefix:{let n=t||Nn;return[Nn.prefix,n.decode(e)]}case Pn.prefix:{let n=t||Pn;return[Pn.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Rn=(e,t,n)=>{let{prefix:r}=n;if(r!==Nn.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let o=t.get(r);if(null==o){let o=n.encode(e).slice(1);return t.set(r,o),o}return o},Ln=(e,t,n)=>{let{prefix:r}=n,o=t.get(r);if(null==o){let o=n.encode(e);return t.set(r,o),o}return o},Fn=112,Mn=18,Un=(e,t,n)=>{let r=Sn(e),o=r+Sn(t),i=new Uint8Array(o+n.byteLength);return An(e,i,0),An(t,i,r),i.set(n,o),i},jn=Symbol.for("@ipld/js-cid/CID"),zn={writable:!1,configurable:!1,enumerable:!0},$n={writable:!1,enumerable:!1,configurable:!1},Hn=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},Vn="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n";var Gn={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Gn.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Dn.decode(e.subarray(1))};var Zn=e=>nn(e,Gn);var Wn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==n[s])throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,u=e.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===u;)r++,t++;for(var i=(e.length-t)*l+1>>>0,s=new Uint8Array(i);e[t];){var c=n[e.charCodeAt(t)];if(255===c)return;for(var f=0,d=i-1;(0!==c||f<o)&&-1!==d;d--,f++)c+=a*s[d]>>>0,s[d]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");o=f,t++}if(" "!==e[t]){for(var h=i-o;h!==i&&0===s[h];)h++;for(var p=new Uint8Array(r+(i-h)),g=r;h!==i;)p[g++]=s[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var s=(i-o)*c+1>>>0,l=new Uint8Array(s);o!==i;){for(var f=t[o],d=0,h=s-1;(0!==f||d<r)&&-1!==h;h--,d++)f+=256*l[h]>>>0,l[h]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=d,o++}for(var p=s-r;p!==s&&0===l[p];)p++;for(var g=u.repeat(n);p<s;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:f,decode:function(e){var n=f(e);if(n)return n;throw new Error(`Non-${t} character`)}}},qn=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Kn=(e,t)=>new class{constructor(e){this.decoders=e}or(e){return Kn(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Yn=({name:e,prefix:t,encode:n,decode:r})=>new class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}(e,t,n),this.decoder=new class{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Kn(this,e)}}(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}(e,t,n,r),Jn=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:o}=Wn(n,t);return Yn({prefix:e,name:t,encode:r,decode:e=>qn(o(e))})},Xn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Yn({prefix:t,name:e,encode:e=>((e,t,n)=>{let r="="===t[t.length-1],o=(1<<n)-1,i="",s=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{let o={};for(let c=0;c<t.length;++c)o[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;let s=new Uint8Array(i*n/8|0),a=0,u=0,l=0;for(let c=0;c<i;++c){let t=o[e[c]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);u=u<<n|t,a+=n,a>=8&&(a-=8,s[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,r,n,e)}),Qn=Xn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),er=(Xn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Xn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Xn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Jn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"})),tr=(Jn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),function e(t,n,r){n=n||[];for(var o=r=r||0;t>=or;)n[r++]=255&t|nr,t/=128;for(;t&rr;)n[r++]=255&t|nr,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n}),nr=128,rr=-128,or=Math.pow(2,31);var ir=function e(t,n){var r,o=0,i=0,s=n=n||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[s++],o+=i<28?(r&ar)<<i:(r&ar)*Math.pow(2,i),i+=7}while(r>=sr);return e.bytes=s-n,o},sr=128,ar=127;var ur=Math.pow(2,7),lr=Math.pow(2,14),cr=Math.pow(2,21),fr=Math.pow(2,28),dr=Math.pow(2,35),hr=Math.pow(2,42),pr=Math.pow(2,49),gr=Math.pow(2,56),yr=Math.pow(2,63),mr={encode:tr,decode:ir,encodingLength:function(e){return e<ur?1:e<lr?2:e<cr?3:e<fr?4:e<dr?5:e<hr?6:e<pr?7:e<gr?8:e<yr?9:10}},vr=(e,t=0)=>[mr.decode(e,t),mr.decode.bytes],br=(e,t,n=0)=>(mr.encode(e,t,n),t),wr=e=>mr.encodingLength(e),Er=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}},Ar=(e,t)=>{let{bytes:n,version:r}=e;return 0===r?xr(n,Cr(e),t||er.encoder):Ir(n,Cr(e),t||Qn.encoder)},Sr=new WeakMap,Cr=e=>{let t=Sr.get(e);if(null==t){let t=new Map;return Sr.set(e,t),t}return t},Tr=class{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==_r)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Or)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Tr.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=((e,t)=>{let n=t.byteLength,r=wr(e),o=r+wr(n),i=new Uint8Array(o+n);return br(e,i,0),br(n,i,r),i.set(t,o),new Er(e,n,t,i)})(e,t);return Tr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Tr.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&((e,t)=>{if(e===t)return!0;{let n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0})(e.bytes,n.bytes)}})(e.multihash,n.multihash)}toString(e){return Ar(this,e)}toJSON(){return{"/":Ar(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;let t=e;if(t instanceof Tr)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){let{version:e,code:n,multihash:r,bytes:o}=t;return new Tr(e,n,r,o||Nr(e,n,r.bytes))}if(!0===t[Pr]){let{version:e,multihash:n,code:r}=t,o=(e=>{let t=qn(e),[n,r]=vr(t),[o,i]=vr(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Er(n,o,s,t)})(n);return Tr.create(e,r,o)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==_r)throw new Error(`Version 0 CID must use dag-pb (code: ${_r}) block encoding`);return new Tr(e,t,n,n.bytes);case 1:{let r=Nr(e,t,n.bytes);return new Tr(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Tr.create(0,_r,e)}static createV1(e,t){return Tr.create(1,e,t)}static decode(e){let[t,n]=Tr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Tr.inspectBytes(e),n=t.size-t.multihashSize,r=qn(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=r.subarray(t.multihashSize-t.digestSize),i=new Er(t.multihashCode,t.digestSize,o,r);return[0===t.version?Tr.createV0(i):Tr.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=vr(e.subarray(t));return t+=r,n},r=n(),o=_r;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let i=t,s=n(),a=n(),u=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:u-i,size:u}}static parse(e,t){let[n,r]=kr(e,t),o=Tr.decode(r);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Cr(o).set(n,e),o}},kr=(e,t)=>{switch(e[0]){case"Q":{let n=t||er;return[er.prefix,n.decode(`${er.prefix}${e}`)]}case er.prefix:{let n=t||er;return[er.prefix,n.decode(e)]}case Qn.prefix:{let n=t||Qn;return[Qn.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},xr=(e,t,n)=>{let{prefix:r}=n;if(r!==er.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let o=t.get(r);if(null==o){let o=n.encode(e).slice(1);return t.set(r,o),o}return o},Ir=(e,t,n)=>{let{prefix:r}=n,o=t.get(r);if(null==o){let o=n.encode(e);return t.set(r,o),o}return o},_r=112,Or=18,Nr=(e,t,n)=>{let r=wr(e),o=r+wr(t),i=new Uint8Array(o+n.byteLength);return br(e,i,0),br(t,i,r),i.set(n,o),i},Pr=Symbol.for("@ipld/js-cid/CID"),Dr=Ae(Ie(),1),Br="Earth";var Rr=Tr.parse("bafyreif3tfdpr5n4jdrbielmcapwvbpcthepfkwq2vwonmlhirbjmotedi"),Lr=["https://ipfs.io","https://dweb.link"];async function Fr(e,t,n=1){try{let n=await async function(e,t){if("function"==typeof e)return e(t);if("function"==typeof e?.block?.get)return e.block.get(t);let n=Array.isArray(e)?e:[e];for(let o of n){let e=new URL(o);e.pathname=`/ipfs/${t.toString()}`,e.search="?format=raw";try{let t=await(0,Dr.default)(e,{headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"});if(!t.ok)throw t;return new Uint8Array(await t.arrayBuffer())}catch(r){throw new Error(`unable to fetch raw block for CID ${t}`,{cause:r})}}}(e,t);return{obj:await Zn(n),block:n}}catch(r){if(n<3)return await Fr(e,t,n+1);throw r}}var Mr=function(e,{cacheKey:t=(([e])=>e),cache:n=new Map}={}){let r=new Map,o=function(...o){let i=t(o);if(r.has(i))return r.get(i);let s=(async()=>{try{if(n&&await n.has(i))return await n.get(i);let t=await e.apply(this,o);try{return t}finally{n&&await n.set(i,t)}}finally{r.delete(i)}})();return r.set(i,s),s};return function(e,t,{ignoreNonConfigurable:n=!1}={}){let{name:r}=e;for(let o of Reflect.ownKeys(t))_e(e,t,o,n);Ne(e,t),Re(e,t,r)}(o,e,{ignoreNonConfigurable:!0}),Le.set(o,n),o}((async function(e,t,n){let r,o;try{({obj:r,block:o}=await Fr(e,t))}catch(s){throw({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REV:"f8ac305",REACT_APP_VERSION:"4.3.1"}?.DEBUG||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REV:"f8ac305",REACT_APP_VERSION:"4.3.1"}?.TEST)&&console.error(o?`[ipfs-geoip] failed to parse DAG-CBOR behind CID '${t}'`:`[ipfs-geoip] failed to get raw block for CID '${t}'`,s),s}let i=0;if(!("data"in r)){for(;r.mins[i]&&r.mins[i]<=n;)i++;let t=r.links[i-1];if(!t)throw new Error("Failed to lookup node");let o=function(e){return e?Tr.asCID(e):null}(t);if(!o)throw new Error("Failed to lookup node");return Mr(e,o,n)}if("data"in r){for(;r.data[i]&&r.data[i].min<=n;)i++;let e=r.data[i-1];if(!e)throw new Error("Failed to lookup leaf node");if(!e.data)throw new Error("Unmapped range");return function(e){return{country_name:e[0],country_code:e[1],region_code:e[2],city:e[3],postal_code:e[4],latitude:e[5],longitude:e[6],planet:Br}}(e.data)}}),{cachePromiseRejection:!1,cacheKey:e=>{let[,t,n]=e;return`${t}.${n}`}});function Ur(e=Lr,t){return Mr(e,Rr,Fe.default.toLong(t))}var jr=n(82395);class zr extends Error{constructor(e){super(e),this.name="TimeoutError"}}class $r extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const Hr=e=>void 0===globalThis.DOMException?new $r(e):new DOMException(e),Vr=e=>{const t=void 0===e.reason?Hr("This operation was aborted."):e.reason;return t instanceof Error?t:Hr(t)};var Gr,Zr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Gr=new WeakMap;const Wr=class{constructor(){Gr.set(this,[])}enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&Zr(this,Gr,"f")[this.size-1].priority>=t.priority)return void Zr(this,Gr,"f").push(n);const r=function(e,t,n){let r=0,o=e.length;for(;o>0;){const i=Math.trunc(o/2);let s=r+i;n(e[s],t)<=0?(r=++s,o-=i+1):o=i}return r}(Zr(this,Gr,"f"),n,((e,t)=>t.priority-e.priority));Zr(this,Gr,"f").splice(r,0,n)}dequeue(){const e=Zr(this,Gr,"f").shift();return null===e||void 0===e?void 0:e.run}filter(e){return Zr(this,Gr,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return Zr(this,Gr,"f").length}};var qr,Kr,Yr,Jr,Xr,Qr,eo,to,no,ro,oo,io,so,ao,uo,lo,co,fo,ho,po,go,yo,mo,vo,bo,wo,Eo=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Ao=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class So extends Error{}class Co extends jr.v{constructor(e){var t,n,r,o;if(super(),qr.add(this),Kr.set(this,void 0),Yr.set(this,void 0),Jr.set(this,0),Xr.set(this,void 0),Qr.set(this,void 0),eo.set(this,0),to.set(this,void 0),no.set(this,void 0),ro.set(this,void 0),oo.set(this,void 0),io.set(this,0),so.set(this,void 0),ao.set(this,void 0),uo.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Wr,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);Eo(this,Kr,e.carryoverConcurrencyCount,"f"),Eo(this,Yr,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),Eo(this,Xr,e.intervalCap,"f"),Eo(this,Qr,e.interval,"f"),Eo(this,ro,new e.queueClass,"f"),Eo(this,oo,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Eo(this,uo,!0===e.throwOnTimeout,"f"),Eo(this,ao,!1===e.autoStart,"f")}get concurrency(){return Ao(this,so,"f")}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Eo(this,so,e,"f"),Ao(this,qr,"m",vo).call(this)}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t={timeout:this.timeout,throwOnTimeout:Ao(this,uo,"f"),...t},new Promise(((n,r)=>{Ao(this,ro,"f").enqueue((async()=>{var o,i,s;Eo(this,io,(i=Ao(this,io,"f"),++i),"f"),Eo(this,Jr,(s=Ao(this,Jr,"f"),++s),"f");try{if(null===(o=t.signal)||void 0===o?void 0:o.aborted)throw new So("The task was aborted.");let r=e({signal:t.signal});t.timeout&&(r=function(e,t,n,r){let o;const i=new Promise(((i,s)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((r={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...r}).signal){const{signal:e}=r;e.aborted&&s(Vr(e)),e.addEventListener("abort",(()=>{s(Vr(e))}))}o=r.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof n){try{i(n())}catch(o){s(o)}return}const r=n instanceof Error?n:new zr("string"===typeof n?n:`Promise timed out after ${t} milliseconds`);"function"===typeof e.cancel&&e.cancel(),s(r)}),t),(async()=>{try{i(await e)}catch(t){s(t)}finally{r.customTimers.clearTimeout.call(void 0,o)}})()}else i(e)}));return i.clear=()=>{clearTimeout(o),o=void 0},i}(Promise.resolve(r),t.timeout)),t.signal&&(r=Promise.race([r,Ao(this,qr,"m",bo).call(this,t.signal)]));const i=await r;n(i),this.emit("completed",i)}catch(a){if(a instanceof zr&&!t.throwOnTimeout)return void n();r(a),this.emit("error",a)}finally{Ao(this,qr,"m",fo).call(this)}}),t),this.emit("add"),Ao(this,qr,"m",go).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return Ao(this,ao,"f")?(Eo(this,ao,!1,"f"),Ao(this,qr,"m",vo).call(this),this):this}pause(){Eo(this,ao,!0,"f")}clear(){Eo(this,ro,new(Ao(this,oo,"f")),"f")}async onEmpty(){0!==Ao(this,ro,"f").size&&await Ao(this,qr,"m",wo).call(this,"empty")}async onSizeLessThan(e){Ao(this,ro,"f").size<e||await Ao(this,qr,"m",wo).call(this,"next",(()=>Ao(this,ro,"f").size<e))}async onIdle(){0===Ao(this,io,"f")&&0===Ao(this,ro,"f").size||await Ao(this,qr,"m",wo).call(this,"idle")}get size(){return Ao(this,ro,"f").size}sizeBy(e){return Ao(this,ro,"f").filter(e).length}get pending(){return Ao(this,io,"f")}get isPaused(){return Ao(this,ao,"f")}}Kr=new WeakMap,Yr=new WeakMap,Jr=new WeakMap,Xr=new WeakMap,Qr=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap,ro=new WeakMap,oo=new WeakMap,io=new WeakMap,so=new WeakMap,ao=new WeakMap,uo=new WeakMap,qr=new WeakSet,lo=function(){return Ao(this,Yr,"f")||Ao(this,Jr,"f")<Ao(this,Xr,"f")},co=function(){return Ao(this,io,"f")<Ao(this,so,"f")},fo=function(){var e;Eo(this,io,(e=Ao(this,io,"f"),--e),"f"),Ao(this,qr,"m",go).call(this),this.emit("next")},ho=function(){Ao(this,qr,"m",mo).call(this),Ao(this,qr,"m",yo).call(this),Eo(this,no,void 0,"f")},po=function(){const e=Date.now();if(void 0===Ao(this,to,"f")){const t=Ao(this,eo,"f")-e;if(!(t<0))return void 0===Ao(this,no,"f")&&Eo(this,no,setTimeout((()=>{Ao(this,qr,"m",ho).call(this)}),t),"f"),!0;Eo(this,Jr,Ao(this,Kr,"f")?Ao(this,io,"f"):0,"f")}return!1},go=function(){if(0===Ao(this,ro,"f").size)return Ao(this,to,"f")&&clearInterval(Ao(this,to,"f")),Eo(this,to,void 0,"f"),this.emit("empty"),0===Ao(this,io,"f")&&this.emit("idle"),!1;if(!Ao(this,ao,"f")){const e=!Ao(this,qr,"a",po);if(Ao(this,qr,"a",lo)&&Ao(this,qr,"a",co)){const t=Ao(this,ro,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Ao(this,qr,"m",yo).call(this),!0)}}return!1},yo=function(){Ao(this,Yr,"f")||void 0!==Ao(this,to,"f")||(Eo(this,to,setInterval((()=>{Ao(this,qr,"m",mo).call(this)}),Ao(this,Qr,"f")),"f"),Eo(this,eo,Date.now()+Ao(this,Qr,"f"),"f"))},mo=function(){0===Ao(this,Jr,"f")&&0===Ao(this,io,"f")&&Ao(this,to,"f")&&(clearInterval(Ao(this,to,"f")),Eo(this,to,void 0,"f")),Eo(this,Jr,Ao(this,Kr,"f")?Ao(this,io,"f"):0,"f"),Ao(this,qr,"m",vo).call(this)},vo=function(){for(;Ao(this,qr,"m",go).call(this););},bo=async function(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(new So("The task was aborted."))}),{once:!0})}))},wo=async function(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))};const To=Co;var ko=n(34737),xo=n.n(ko),Io=n(59496),_o=n.n(Io),Oo=n(23596),No=n.n(Oo),Po=n(4147);const{dependencies:Do}=Po,Bo=K().seconds(1),Ro=Do["ipfs-geoip"];const Lo=e=>4===e[0]&&"127.0.0.1"!==e[1],Fo=e=>{if(!e)return null;const{country_name:t,city:n}=e;return n&&t?`${t}, ${n}`:t},Mo=e=>e.protoNames().join(" \u2022 "),Uo=e=>{if("n/a"===e)return;let t=parseInt(e);return t="s"===/(s|ms)/.exec(e)[0]?1e3*t:t,t},jo=No()((e=>{if(e)for(const n of e.addresses)try{const e=(0,ee.HM)(n).nodeAddress();if((_o().isV4Format(e.address)||_o().isV6Format(e.address))&&!_o().isPrivate(e.address))return e.address}catch(t){}})),zo=async(e,t)=>{const n=await jo(t);let r,o=!1,i=!1;try{r=e.nodeAddress()}catch(s){return{isPrivate:o,isNearby:i}}return o=_o().isPrivate(r.address),n&&(_o().isV4Format(r.address)?i=_o().cidrSubnet(`${n}/24`).contains(r.address):_o().isV6Format(r.address)&&(i=_o().cidrSubnet(`${n}/48`).contains(r.address)&&!_o().cidrSubnet("fc00::/8").contains(r.address))),{isPrivate:o,isNearby:i}};class $o{constructor(e){this.geoipCache=pe({name:"geoipCache",version:Ro,maxAge:K().weeks(1),...e.cache}),this.failedAddrs=xo()(500),this.queue=new To({concurrency:e.concurrency,autoStart:!0}),this.geoipLookupPromises=new Map,this.pass=0}async findLocations(e,t){const n={};for(const r of this.optimizedPeerSet(t)){const t=r.peer,o=r.addr.stringTuples().find(Lo);if(!o)continue;const i=o[1];if(this.failedAddrs.has(i))continue;const s=await this.geoipCache.get(i);s?n[t]=s:this.geoipLookupPromises.has(i)||this.geoipLookupPromises.set(i,this.queue.add((async()=>{try{const t=await Ur(e,i);await this.geoipCache.set(i,t)}catch(t){this.failedAddrs.set(i,!0)}finally{this.geoipLookupPromises.delete(i)}})))}return n}optimizedPeerSet(e){if(this.pass<3){const t=e=>Uo(e.latency)||9999,n=e.concat().sort(((e,n)=>t(e)-t(n)));switch(this.pass=this.pass+1,this.pass-1){case 0:return n.slice(0,10);case 1:return n.slice(0,100);default:return n.slice(0,200)}}return e}}const Ho=function(e){(e=e||{}).concurrency=e.concurrency||4,e.cache=e.cache||{};const t=new $o(e),n=(0,z.Jc)({name:"peerLocations",actionBaseType:"PEER_LOCATIONS",getPromise:e=>{let{store:n}=e;return t.findLocations(n.selectAvailableGatewayUrl(),n.selectPeers())},staleAfter:Bo,retryAfter:Bo,persist:!1,checkIfOnline:!1});return n.reactPeerLocationsFetch=(0,z.P1)("selectRouteInfo","selectPeerLocationsShouldUpdate","selectIpfsConnected",((e,t,n)=>{if("/peers"===e.url&&t&&n)return{actionCreator:"doFetchPeerLocations"}})),n.selectPeerLocationsForSwarm=(0,z.P1)("selectPeers","selectPeerLocations","selectBootstrapPeers","selectIdentity",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>3?arguments[3]:void 0;return e&&Promise.all(e.map((async e=>{const r=e.peer,o=t?t[r]:null,i=Fo(o),s=o&&o.country_code,a=o&&[o.longitude,o.latitude],u=Mo(e.addr),l=e.addr.toString(),c=Uo(e.latency),f=e.direction,{isPrivate:d,isNearby:h}=await zo(e.addr,n);return{peerId:r,location:i,flagCode:s,coordinates:a,connection:u,address:l,protocols:(Array.isArray(e.streams)?Array.from(new Set(e.streams.map((e=>e.Protocol)).map((e=>null!==e&&void 0!==e&&e.trim()?e:"[unnamed]")))).sort():[]).join(", "),direction:f,latency:c,isPrivate:d,isNearby:h}})))})),n.selectPeersCoordinates=(0,z.P1)("selectPeerLocationsForSwarm",(async e=>{if(!e)return[];return(await e).reduce(((e,t)=>{let{peerId:n,coordinates:r}=t;if(!r)return e;let o=!1;const i=e.map((e=>{if(!e||o)return e;const[t,i]=e.coordinates,[s,a]=r;return t-4<=s&&t+4>=s&&(i-4<=a&&i+4>=a)&&(e.peerIds.push(n),o=!0),e}));return o?i:[...i,{peerIds:[n],coordinates:r}]}),[])})),n};var Vo=n(76290),Go=n(47652),Zo=n(50464),Wo=n.n(Zo),qo=n(11044);const Ko=e=>e.split(":").at(-1),Yo=e=>[...new Set(e)],Jo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.every((t=>!t.some((t=>t===e))))},Xo=(e,t)=>{if(e.length!==t.length)return t;return e.filter((e=>!t.includes(e))).length>0?t:e},Qo=async(e,t,n)=>{var r,o,i;const s=t.find((t=>e.endpoint.toString()===t.apiEndpoint.toString())),a=null===s||void 0===s?void 0:s.icon,u=null===s||void 0===s?void 0:s.visitServiceUrl,l={...e,name:e.service,icon:a,visitServiceUrl:u};if("invalid"===(null===e||void 0===e||null===(r=e.stat)||void 0===r?void 0:r.status))return{...l,numberOfPins:-1,online:!1};const c=null===(o=e.stat)||void 0===o||null===(i=o.pinCount)||void 0===i?void 0:i.pinned,f="number"===typeof c,d=f?await ei(e.service,n):void 0;return{...l,numberOfPins:c,online:f,autoUpload:d}},ei=No()((async(e,t)=>{try{return await t.config.get(`Pinning.RemoteServices.${e}.Policies.MFS.Enable`)}catch(r){var n;if(null!==(n=r.message)&&void 0!==n&&n.includes("key has no attribute"))try{return await t.config.get(`Pinning.RemoteServices["${e}"].Policies.MFS.Enable`)}catch(o){}console.error(`unexpected config.get error for "${e}": ${r.message}`)}return!1}),{maxAge:3e3}),ti=(e,t)=>{const n=(0,qo.g)("remotesServicesBackoffs")||{},{service:r}=t,{lastTry:o,tryAfter:i}=n[r]||{lastTry:0,tryAfter:3e4};if(o+i>(new Date).getTime())throw new Error("still within back-off period");try{return e.pin.remote.ls(t)}catch(s){throw s.toString().includes("429 Too Many Requests")&&(n[r]={lastTry:(new Date).getTime(),tryAfter:3*i},(0,qo.D)("remotesServicesBackoffs",n)),s}},ni={name:"pinning",persistActions:["UPDATE_REMOTE_PINS","DISMISS_REMOTE_PINS","CANCEL_PENDING_PINS"],init:e=>{(e=>{const t=setInterval((()=>{e.selectIpfsReady()&&(clearTimeout(t),e.selectPendingPins().forEach((t=>{var n;const[r,o]=t.split(":");e.doSetPinning({cid:null!==(n=Go.k0.asCID(o))&&void 0!==n?n:Go.k0.parse(o)},[r],!1)})))}),1e3)})(e),(e=>{setInterval((()=>{const t=[...e.selectPendingPins(),...e.selectFailedPins()].map((e=>({cid:e.split(":")[1]})));e.doFetchRemotePins(t,!0)}),3e4)})(e)},reducer:(e,t)=>{var n,r,o,i,s,a,u,l,c;if("UPDATE_REMOTE_PINS"===t.type){const{adds:n=[],removals:r=[],pending:o=[],failed:i=[]}=t.payload,s=Xo(e.remotePins,Yo([...e.remotePins,...n].filter(Jo(r,o,i)))),a=Xo(e.notRemotePins,Yo([...e.notRemotePins,...r].filter(Jo(n,o,i)))),u=Xo(e.pendingPins,Yo([...e.pendingPins,...o].filter(Jo(n,r,i)))),l=Xo(e.failedPins,Yo([...e.failedPins,...i].filter(Jo(n,r,o)))),c=Xo(e.completedPins,Yo([...e.completedPins,...n].filter((t=>e.pendingPins.some((e=>e===t))))));return{...e,remotePins:s,notRemotePins:a,pendingPins:u,failedPins:l,completedPins:c}}if("DISMISS_REMOTE_PINS"===t.type){const{failed:n=[],completed:r=[]}=t.payload,o=e.failedPins.filter(Jo(n)),i=e.completedPins.filter(Jo(r));return{...e,failedPins:o,completedPins:i}}if("SET_LOCAL_PINS_STATS"===t.type){const{localPinsSize:n,localNumberOfPins:r}=t.payload;return{...e,localNumberOfPins:r,localPinsSize:n}}if("SET_REMOTE_PINNING_SERVICES"===t.type){const n=e.pinningServices,r=t.payload;if((null===n||void 0===n?void 0:n.length)===(null===r||void 0===r?void 0:r.length)){const t=e=>e&&"undefined"!==typeof e.numberOfPins,o=n.some(t),i=r.some(t);if(o&&!i)return e}return{...e,pinningServices:r}}return"SET_REMOTE_PINNING_SERVICES_AVAILABLE"===t.type?{...e,arePinningServicesSupported:t.payload}:{...e,pinningServices:null!==(n=null===e||void 0===e?void 0:e.pinningServices)&&void 0!==n?n:[],remotePins:null!==(r=null===e||void 0===e?void 0:e.remotePins)&&void 0!==r?r:[],pendingPins:null!==(o=null===e||void 0===e?void 0:e.pendingPins)&&void 0!==o?o:[],failedPins:null!==(i=null===e||void 0===e?void 0:e.failedPins)&&void 0!==i?i:[],completedPins:null!==(s=null===e||void 0===e?void 0:e.completedPins)&&void 0!==s?s:[],notRemotePins:null!==(a=null===e||void 0===e?void 0:e.notRemotePins)&&void 0!==a?a:[],localPinsSize:null!==(u=null===e||void 0===e?void 0:e.localPinsSize)&&void 0!==u?u:0,localNumberOfPins:null!==(l=null===e||void 0===e?void 0:e.localNumberOfPins)&&void 0!==l?l:0,arePinningServicesSupported:null!==(c=null===e||void 0===e?void 0:e.arePinningServicesSupported)&&void 0!==c&&c}},doFetchRemotePins:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async n=>{var r,o;let{dispatch:i,store:s,getIpfs:a}=n;const u=s.selectPinningServices();if(null===u||void 0===u||!u.length)return;const l=a();if(!l||null!==s&&void 0!==s&&null!==(r=s.ipfs)&&void 0!==r&&null!==(o=r.ipfs)&&void 0!==o&&o.ready||!l.pin.remote)return;const c=e?e.map((e=>e.cid.toString())):[],f=s.selectRemotePins(),d=s.selectNotRemotePins(),h=((e,t)=>{const n=[...new Set(e)],r=[];for(let o=0;o<n.length;o+=t){const e=n.slice(o,o+t);r.push(e)}return r})(c,10),p=[],g=[],y=[],m=[];await Promise.allSettled(u.map((async e=>{try{const r=t?new Set:new Set([...f,...d].filter((t=>t.startsWith(e.name))).map(Ko));for(const t of h){const o=t.filter((e=>!r.has(e.toString())));if(!o.length)continue;const i=new Set(o.map((e=>e.toString())));try{const t=ti(l,{service:e.name,cid:o.map((e=>{var t;return null!==(t=Go.k0.asCID(e))&&void 0!==t?t:Go.k0.parse(e)})),status:["queued","pinning","pinned","failed"]});for await(const n of t){const t=n.cid.toString();i.delete(t),"queued"===n.status||"pinning"===n.status?m.push(`${e.name}:${t}`):"failed"===n.status?y.push(`${e.name}:${t}`):p.push(`${e.name}:${t}`)}}catch(n){console.error(`Error: pin.remote.ls service=${e.name} cid=${o}: ${n.toString()}`)}for(const t of i)g.push(`${e.name}:${t}`)}}catch(n){console.error("unexpected error during doFetchRemotePins",n)}}))),i({type:"UPDATE_REMOTE_PINS",payload:{adds:p,removals:g,pending:m,failed:y}})}},selectRemotePins:e=>e.pinning.remotePins||[],selectNotRemotePins:e=>e.pinning.notRemotePins||[],selectPendingPins:e=>e.pinning.pendingPins||[],selectFailedPins:e=>e.pinning.failedPins||[],selectCompletedPins:e=>e.pinning.completedPins||[],selectLocalPinsSize:e=>e.pinning.localPinsSize,selectLocalNumberOfPins:e=>e.pinning.localNumberOfPins,doSelectRemotePinsForFile:e=>t=>{let{store:n}=t;const r=n.selectPinningServices().map((e=>e.name));return Yo([...n.selectPendingPins(),...n.selectRemotePins()]).filter((t=>Ko(t)===e.cid.toString())).map((e=>e.split(":").at(0))).filter((e=>r.includes(e)))},doFetchLocalPinsStats:()=>async e=>{let{getIpfs:t,dispatch:n}=e;const r=t();if(!r)return null;n({type:"SET_LOCAL_PINS_STATS",payload:{localPinsSize:-1,localNumberOfPins:(await Wo()(r.pin.ls({type:"recursive"}))).length}})},doFetchPinningServices:()=>async e=>{var t,n;let{getIpfs:r,store:o,dispatch:i}=e;const s=r();if(!s||null!==o&&void 0!==o&&null!==(t=o.ipfs)&&void 0!==t&&null!==(n=t.ipfs)&&void 0!==n&&n.ready||!s.pin.remote)return null;const a=(await s.commands()).Subcommands.find((e=>"pin"===e.Name)).Subcommands.some((e=>"remote"===e.Name));if(i({type:"SET_REMOTE_PINNING_SERVICES_AVAILABLE",payload:a}),!a)return null;const u=o.selectRemoteServiceTemplates(),l=await s.pin.remote.service.ls();i({type:"SET_REMOTE_PINNING_SERVICES",payload:await Promise.all(l.map((e=>Qo(e,u,s))))})},doFetchPinningServicesStats:()=>async e=>{var t,n;let{getIpfs:r,store:o,dispatch:i}=e;const s=r();if(!s||null!==o&&void 0!==o&&null!==(t=o.ipfs)&&void 0!==t&&null!==(n=t.ipfs)&&void 0!==n&&n.ready||!s.pin.remote)return null;if(!(await s.commands()).Subcommands.find((e=>"pin"===e.Name)).Subcommands.some((e=>"remote"===e.Name)))return null;const a=o.selectRemoteServiceTemplates(),u=await s.pin.remote.service.ls({stat:!0});i({type:"SET_REMOTE_PINNING_SERVICES",payload:await Promise.all(u.map((e=>Qo(e,a,s))))})},selectPinningServices:e=>e.pinning.pinningServices||[],selectRemoteServiceTemplates:()=>Vo.X,selectArePinningServicesSupported:e=>e.pinning.arePinningServicesSupported,selectPinningServicesDefaults:()=>Vo.X.reduce(((e,t)=>({...e,[t.name]:{...t,nickname:t.name}})),{}),doDismissCompletedPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{dispatch:n}=e;n({type:"DISMISS_REMOTE_PINS",payload:{completed:t}})}},doDismissFailedPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{dispatch:n}=e;n({type:"DISMISS_REMOTE_PINS",payload:{failed:t}})}},doCancelPendingPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{getIpfs:n,dispatch:r}=e;const o=n();for(const s of t){var i;const[e,t]=s.split(":");await o.pin.remote.rm({cid:[null!==(i=Go.k0.asCID(t))&&void 0!==i?i:Go.k0.parse(t)],service:e})}r({type:"UPDATE_REMOTE_PINS",payload:{removals:t}})}},doSetPinning:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return async o=>{let{getIpfs:i,store:s,dispatch:a}=o;const u=i(),{cid:l,name:c}=e,f=t.includes("local");if(n!==f)try{const e={serviceName:"Local node"};f?(await u.pin.add(l),a({type:"IPFS_PIN_SUCCEED",msgArgs:e})):(await u.pin.rm(l),a({type:"IPFS_UNPIN_SUCCEED",msgArgs:e}))}catch(g){console.error(`unexpected local pin error for ${l} (${c})`,g);const e={serviceName:"local",errorMsg:g.toString()};a({type:"IPFS_PIN_FAILED",msgArgs:e})}const d=[],h=[],p=[];s.selectPinningServices().forEach((async e=>{const n=t.includes(e.name);if(r.includes(e.name)===n)return;const o=`${e.name}:${l}`;try{const t={serviceName:e.name};n?(d.push(o),await u.pin.remote.add(l,{service:e.name,name:c,background:!0}),a({type:"IPFS_PIN_SUCCEED",msgArgs:t})):(p.push(o),await u.pin.remote.rm({cid:[l],service:e.name}),a({type:"IPFS_UNPIN_SUCCEED",msgArgs:t}))}catch(g){console.error(`ipfs.pin.remote error for ${l}@${e.name}`,g);const n={serviceName:e.name,errorMsg:g.toString()};h.push(o),a({type:"IPFS_PIN_FAILED",msgArgs:n})}})),a({type:"UPDATE_REMOTE_PINS",payload:{adds:[],removals:p,pending:d,failed:h}}),await s.doPinsFetch()}},doAddPinningService:e=>{let{apiEndpoint:t,nickname:n,secretApiKey:r}=e;return async e=>{let{getIpfs:o}=e;const i=o();n=n.replaceAll(".","_"),await i.pin.remote.service.add(n,{endpoint:t,key:r})}},doRemovePinningService:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.pin.remote.service.rm(e),r.doFetchPinningServices()},doSetAutoUploadForService:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n(),i=`Pinning.RemoteServices.${e}.Policies.MFS.Enable`,s=await o.config.get(i);await o.config.set(i,!s),r.doFetchPinningServices()}},ri=ni;var oi=n(5803);const ii=(0,oi.ZP)((()=>Promise.all([n.e(174),n.e(353),n.e(960)]).then(n.bind(n,51960))),{fallback:e.createElement(x.Z,null)}),si=(0,oi.ZP)((()=>Promise.all([n.e(539),n.e(612),n.e(588)]).then(n.bind(n,93353))),{fallback:e.createElement(x.Z,null)}),ai=(0,oi.ZP)((()=>n.e(965).then(n.bind(n,2965))),{fallback:e.createElement(x.Z,null)}),ui=(0,oi.ZP)((()=>n.e(942).then(n.bind(n,65942))),{fallback:e.createElement(x.Z,null)}),li=(0,oi.ZP)((()=>n.e(178).then(n.bind(n,43178))),{fallback:e.createElement(x.Z,null)}),ci=(0,oi.ZP)((()=>Promise.all([n.e(539),n.e(37),n.e(301)]).then(n.bind(n,58301))),{fallback:e.createElement(x.Z,null)}),fi=(0,oi.ZP)((()=>Promise.all([n.e(539),n.e(654),n.e(488)]).then(n.bind(n,82488))),{fallback:e.createElement(x.Z,null)});var di=n(18970),hi=n(17457),pi=n(84855),gi=n(43697);const yi=(0,a.Zh)("settings")((t=>{let{t:n}=t;return e.createElement("div",{"data-id":"AnalyticsPage",className:"mw9 center"},e.createElement(di.ql,null,e.createElement("title",null,n("title")," | IPFS")),e.createElement(pi.Z,null,e.createElement(hi.Z,null,n("analytics")),e.createElement(gi.Z,{t:n,open:!0})))})),mi=(0,oi.ZP)((()=>n.e(706).then(n.bind(n,10706))),{fallback:e.createElement(x.Z,null)}),vi=()=>e.createElement("div",{"data-id":"BlankPage"}),bi=(0,z.Zh)({"/explore":ui,"/explore*":li,"/files*":si,"/ipfs*":si,"/ipns*":si,"/pins*":ai,"/peers":ci,"/settings/analytics":yi,"/settings*":fi,"/welcome":mi,"/blank":vi,"/status*":ii,"/":ii,"":ii},{routeInfoSelector:"selectHash"}),wi={name:"redirects",reactToEmptyHash:(0,z.P1)("selectHash",(e=>{if(""===e)return{actionCreator:"doUpdateHash",args:["#/"]}})),reactToIpfsConnectionFail:(0,z.P1)("selectIpfsInitFailed","selectHash",((e,t)=>{if(e&&"/welcome"!==t&&!t.startsWith("/settings"))return{actionCreator:"doUpdateHash",args:["#/welcome"]}}))};var Ei=n(72126);function Ai(e){let t;try{t=(0,ee.a_)("sni").code}catch(n){return null}for(const[r,o]of e)if(r===t&&void 0!==o)return o;return null}function Si(e){return e.some((([e,t])=>e===(0,ee.a_)("tls").code))}function Ci(e,t,n){const r=Ti[(0,ee.a_)(e).name];if(void 0===r)throw new Error(`Can't interpret protocol ${(0,ee.a_)(e).name}`);const o=r(t,n);return e===(0,ee.a_)("ip6").code?`[${o}]`:o}const Ti={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`tcp://${Ci(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`udp://${Ci(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Ci(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Ci(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=Si(t),r=Ai(t);if(n&&null!==r)return`https://${r}`;const o=n?"https://":"http://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=Ci(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},tls:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return Ci(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return Ci(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=Ci(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=Si(t),r=Ai(t);if(n&&null!==r)return`wss://${r}`;const o=n?"wss://":"ws://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=Ci(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},wss:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=Ci(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Ci(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Ci(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${Ci(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};var ki=n(19778).Buffer;const xi=["127.0.0.1","[::1]","0.0.0.0","[::]"],Ii=(0,z.Jc)({name:"config",staleAfter:6e4,persist:!1,checkIfOnline:!1,getPromise:async e=>{let{getIpfs:t,store:n}=e;const r=await t().config.getAll();let o;o=ki.isBuffer(r)?r.toString():JSON.stringify(r,null,"\t");const i=JSON.parse(o),s=n.selectPublicGateway(),a=_i("Gateway",i)||s,u=new URL(a);if(xi.includes(u.hostname)){u.hostname="localhost";const e=u.toString().replace(/\/+$/,"");if(await Ni(e))return n.doSetAvailableGateway(e),o}return await Oi(a)||n.doSetAvailableGateway(s),o}});function _i(e,t){if(!t)return null;try{const n=function(e,t){const n=(0,ee.HM)(e).stringTuples(),r=n.pop();if(void 0===r)throw new Error("Unexpected end of multiaddr");const o=(0,ee.a_)(r[0]),i=Ti[o.name];if(null==i)throw new Error(`No interpreter found for ${o.name}`);let s=i(r[1]??"",n);return!1!==t?.assumeHttp&&r[0]===(0,ee.a_)("tcp").code&&(s=s.replace("tcp://","http://"),"443"!==r[1]&&"80"!==r[1]||("443"===r[1]&&(s=s.replace("http://","https://")),s=s.substring(0,s.lastIndexOf(":")))),s}(Array.isArray(t.Addresses[e])?t.Addresses[e][0]:t.Addresses[e],{assumeHttp:!0});if(0===new URL(n).port)throw Error("port set to 0, not deterministic");return n}catch(n){return console.log(`Failed to get url from config at Addresses.${e}`,n),null}}Ii.selectConfigObject=(0,z.P1)("selectConfig",(e=>JSON.parse(e))),Ii.selectApiUrl=(0,z.P1)("selectConfigObject","selectPublicGateway",((e,t)=>_i("API",e)||t)),Ii.selectGatewayUrl=(0,z.P1)("selectConfigObject","selectPublicGateway",((e,t)=>_i("Gateway",e)||t)),Ii.selectAvailableGatewayUrl=(0,z.P1)("selectAvailableGateway","selectGatewayUrl",((e,t)=>e||t)),Ii.selectBootstrapPeers=(0,z.P1)("selectConfigObject",(e=>e&&e.Bootstrap)),Ii.reactConfigFetch=(0,z.P1)("selectConfigShouldUpdate","selectIpfsReady",((e,t)=>{if(e&&t)return{actionCreator:"doFetchConfig"}}));const Oi=No()((async e=>{try{const{status:t}=await fetch(`${e}/ipfs/bafkqae2xmvwgg33nmuqhi3zajfiemuzahiwss`);return 200===t}catch(t){return console.error(`Unable to use the gateway at ${e}. The public gateway will be used as a fallback`,t),!1}})),Ni=No()((async e=>{try{(e=new URL(e)).hostname=`bafkqae2xmvwgg33nmuqhi3zajfiemuzahiwss.ipfs.${e.hostname}`;const{status:t}=await fetch(e.toString());return 200===t}catch(t){return console.error(`Unable to use the subdomain gateway at ${e}. Regular gateway will be used as a fallback`,t),!1}})),Pi=Ii;var Di=n(98595),Bi=n(89849);const Ri={doSaveConfig:e=>async t=>{let{store:n}=t;n.selectConfigIsSaving()?console.log("doSaveConfig skipped, config save already in progress"):await n.doPerformSaveConfig(e)},doPerformSaveConfig:e=>(0,Bi.f)("CONFIG_SAVE",(async t=>{const n=await Li((async()=>{const n=JSON.parse(e),r=t.getIpfs();if(null==r)throw Error("IPFS node is not found");await r.config.replace(n)}));if(!n.ok)throw n.error;await t.store.doMarkConfigAsOutdated()}))},Li=async e=>{try{return{ok:!0,value:await e()}}catch(t){return{ok:!1,error:t}}},Fi=Di.D(["CONFIG_SAVE"]),Mi={name:"config_save",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSaving:!1},t=arguments.length>1?arguments[1]:void 0;if(t.type===Fi.CONFIG_SAVE){const{task:n}=t;switch(n.status){case"Init":return{...e,isSaving:!0};case"Exit":{const{result:t}=n;if(t.ok)return{...e,isSaving:!1,lastSuccess:Date.now()};{const{error:n}=t,r=n&&n.message||String(n);return{...e,isSaving:!1,lastError:Date.now(),errorMessage:r}}}default:return e}}return e},selectConfigIsSaving:e=>e.config_save.isSaving,selectConfigSaveLastSuccess:e=>e.config_save.lastSuccess,selectConfigSaveLastError:e=>e.config_save.lastError,...Ri},Ui=Mi;var ji=n(15560),zi=n.n(ji);const $i={name:"tours",init:e=>{zi().localStorage.getItem("tourTooltip")&&e.doDisableTooltip()},reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!1,tooltip:!0},t=arguments.length>1?arguments[1]:void 0;return"TOURS_ENABLE"===t.type?{...e,enabled:!0}:"TOURS_DISABLE"===t.type?{...e,enabled:!1}:"TOURS_TOOLTIP_DISABLE"===t.type?{...e,tooltip:!1}:e},doDisableTooltip:()=>e=>{let{dispatch:t}=e;zi().localStorage.setItem("tourTooltip",!1),t({type:"TOURS_TOOLTIP_DISABLE"})},doEnableTours:()=>e=>{let{dispatch:t}=e;t({type:"TOURS_ENABLE"})},doDisableTours:()=>e=>{let{dispatch:t}=e;t({type:"TOURS_DISABLE"})},selectTours:e=>e.tours,selectToursEnabled:e=>e.tours.enabled,selectShowTooltip:e=>e.tours.tooltip},Hi=Di.D(["EXPERIMENTS_TOGGLE","EXPERIMENTS_UPDATE_STATE"]),Vi=[],Gi=(e,t)=>({...e,[t]:{...e[t],blocked:!1}}),Zi={selectExperimentsState:e=>e.experiments,selectExperiments:(0,z.P1)("selectExperimentsState",(e=>Vi.map((t=>({...t,...e[t.key]})))))},Wi={doExpToggleAction:e=>t=>{let{dispatch:n}=t;e&&n({type:Hi.EXPERIMENTS_TOGGLE,task:{status:"Init",id:Symbol(Hi.EXPERIMENTS_TOGGLE),init:{key:e}}})}},qi={name:"experiments",persistActions:[Hi.EXPERIMENTS_TOGGLE,Hi.EXPERIMENTS_UPDATE_STATE],reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Hi.EXPERIMENTS_TOGGLE:{const{task:n}=t;switch(n.status){case"Init":return((e,t)=>({...e,[t]:{...e[t],blocked:!0}}))(e,n.init.key);case"Exit":{const{result:t}=n;return t.ok?((e,t)=>Gi({...e,[t]:{...e[t],enabled:!(e&&e[t]&&e[t].enabled)}},t))(e,t.value.key):Gi(e,t.error.key)}default:return e}}case Hi.EXPERIMENTS_UPDATE_STATE:return((e,t)=>Object.keys(t).reduce(((n,r)=>({...n,[r]:{...e[r],...t[r]}})),e))(e,t.payload);default:return e}},...Zi,...Wi},Ki=qi,Yi={show:!1,error:!1,eventId:null,code:null},Ji={name:"notify",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi,t=arguments.length>1?arguments[1]:void 0;return"NOTIFY_DISMISSED"===t.type?{...e,show:!1}:"STATS_FETCH_FAILED"===t.type?{...e,show:!0,error:!0,eventId:t.type}:t.type.match(/^FILES_\w+_FAILED$/)?{...e,show:!0,error:!0,eventId:"FILES_EVENT_FAILED",code:t.payload.error.code}:"STATS_FETCH_FINISHED"===t.type&&"STATS_FETCH_FAILED"===e.eventId?{...e,error:!1,eventId:"STATS_FETCH_FINISHED",lastSuccess:Date.now()}:"SWARM_CONNECT_FAILED"===t.type||"SWARM_CONNECT_FINISHED"===t.type?{...e,show:!0,error:"SWARM_CONNECT_FAILED"===t.type,eventId:t.type}:t.type===Hi.EXP_TOGGLE_FAILED?{...e,show:!0,error:!0,eventId:`experimentsErrors.${t.payload.key}`}:"IPFS_PIN_FAILED"===t.type?{...e,show:!0,error:!0,msgArgs:t.msgArgs,eventId:t.type}:"IPFS_PIN_SUCCEED"===t.type||"IPFS_UNPIN_SUCCEED"===t.type?{...e,show:!0,error:!1,msgArgs:t.msgArgs,eventId:t.type}:"IPFS_CONNECT_FAILED"===t.type?{...e,show:!0,error:!0,eventId:t.type}:"IPFS_CONNECT_SUCCEED"===t.type?{...e,show:!0,error:!1,eventId:t.type}:"IPFS_API_ADDRESS_INVALID"===t.type?{...e,show:!0,error:!0,eventId:t.type}:e},selectNotify:e=>e.notify,selectNotifyI18nKey:(0,z.P1)("selectNotify","selectIpfsProvider",((e,t)=>{const{eventId:n,code:r}=e;if("STATS_FETCH_FAILED"===n)return"ipfsApiRequestFailed";if("IPFS_CONNECT_FAILED"===n)return"ipfsConnectFail";if("IPFS_CONNECT_SUCCEED"===n)return"ipfsConnectSuccess";if("IPFS_API_ADDRESS_INVALID"===n)return"ipfsInvalidApiAddress";if("IPFS_PIN_FAILED"===n)return"ipfsPinFailReason";if("IPFS_PIN_SUCCEED"===n)return"ipfsPinSucceedReason";if("IPFS_UNPIN_SUCCEED"===n)return"ipfsUnpinSucceedReason";if("FILES_EVENT_FAILED"===n){switch(r?r.replace(/^(ERR_)/,""):""){case"FOLDER_EXISTS":return"folderExists";case Ei.aO.WRITE:case Ei.aO.ADD_BY_PATH:case"API_RESPONSE":return"filesAddFailed";case Ei.aO.FETCH:return"filesFetchFailed";case Ei.aO.MOVE:return"filesRenameFailed";case Ei.aO.MAKE_DIR:return"filesMakeDirFailed";case Ei.aO.COPY:return"filesCopyFailed";case Ei.aO.DELETE:return"filesRemoveFailed";default:return"filesEventFailed"}}return"STATS_FETCH_FINISHED"===n?"ipfsIsBack":"SWARM_CONNECT_FAILED"===n?"couldntConnectToPeer":"SWARM_CONNECT_FINISHED"===n?"connectedToPeer":n})),doNotifyDismiss:()=>e=>{let{dispatch:t}=e;return t({type:"NOTIFY_DISMISSED"})},reactNotifyOkDismiss:(0,z.P1)("selectAppTime","selectNotify",((e,t)=>{if("STATS_FETCH_FINISHED"===t.eventId&&t.show&&e-t.lastSuccess>3e3)return{type:"NOTIFY_DISMISSED"}}))},Xi={name:"connected",reducer:(e,t)=>{switch(e=e||{lastError:0,isNodeInfoOpen:!1},t.type){case"STATS_FETCH_FAILED":return{...e,lastError:Date.now()};case"NODE_INFO_OPEN":return{...e,isNodeInfoOpen:t.payload};default:return e}},doSetIsNodeInfoOpen:e=>t=>{let{dispatch:n}=t;return n({type:"NODE_INFO_OPEN",payload:e})},...{selectConnectedLastError:e=>e.connected.lastError,selectIpfsConnected:(0,z.P1)("selectIpfsReady","selectNodeBandwidthLastSuccess","selectNodeBandwidthLastError",((e,t,n)=>e&&null!=t&&t>n)),selectIsNodeInfoOpen:e=>e.connected.isNodeInfoOpen}},Qi={name:"retryInit",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RETRY_INIT_DISABLE":return{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1,needToRetry:!1};case $.aO.IPFS_INIT:{const{task:n}=t;switch(n.status){case"Init":{const t=Date.now();return{...e,currentlyTrying:!0,startedAt:t,tryCount:(e.tryCount||0)+1}}case"Exit":if(n.result.ok)return{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1,needToRetry:!1};{const t=Date.now();return{...e,failedAt:t,currentlyTrying:!1}}default:return e}}default:return e}},doDisableRetryInit:()=>e=>{e.dispatch({type:"RETRY_INIT_DISABLE"})},selectRetryInitState:e=>e.retryInit,reactConnectionInitRetry:(0,z.P1)("selectAppTime","selectIpfsReady","selectRetryInitState",((e,t,n)=>{let{failedAt:r,tryCount:o,needToRetry:i,currentlyTrying:s}=n;return!s&&(!!e&&(!!i&&(null!=o&&o>5||t?{actionCreator:"doDisableRetryInit"}:!(!r||e-r<2500)&&{actionCreator:"doTryInitIpfs"})))}))},es=Qi,ts=(0,z.Jc)({name:"identity",actionBaseType:"IDENTITY",getPromise:e=>{let{getIpfs:t}=e;return t().id().catch((e=>{console.error("Failed to get identity",e)}))},staleAfter:1/0,persist:!1,checkIfOnline:!1});ts.selectIdentityLastSuccess=e=>e.identity.lastSuccess,ts.reactIdentityFetch=(0,z.P1)("selectIpfsConnected","selectIdentityIsLoading","selectIdentityLastSuccess","selectConnectedLastError",((e,t,n,r)=>{if(e&&!t&&(!n||r>n))return{actionCreator:"doFetchIdentity"}}));const ns=ts,rs=pe({name:"bundle-cache",version:1,maxAge:1/0}),os=window,is={selectIsIpfsDesktop:()=>!!os.ipfsDesktop,selectDesktopCountlyActions:()=>[]},ss={...is,selectDesktopVersion:()=>{var e;return null===(e=os.ipfsDesktop)||void 0===e?void 0:e.version},selectDesktopCountlyDeviceId:()=>{var e;return null===(e=os.ipfsDesktop)||void 0===e?void 0:e.countlyDeviceId},selectDesktopCountlyActions:()=>{var e;return null===(e=os.ipfsDesktop)||void 0===e?void 0:e.countlyActions}},as={doDesktopAddConsent:e=>()=>{var t;return null===(t=os.ipfsDesktop)||void 0===t?void 0:t.addConsent(e)},doDesktopRemoveConsent:e=>()=>{var t;return null===(t=os.ipfsDesktop)||void 0===t?void 0:t.removeConsent(e)},doDesktopUpdateLanguage:e=>()=>{var t;return null===(t=os.ipfsDesktop)||void 0===t?void 0:t.updateLanguage(e)}},us={name:"ipfsDesktop",reducer:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},...os.ipfsDesktop?ss:is,...os.ipfsDesktop?as:{}},ls=(0,z.Jc)({name:"repoStats",getPromise:async e=>{let{getIpfs:t}=e;return t().repo.stat()},staleAfter:6e4,persist:!1,checkIfOnline:!1});ls.selectRepoSize=(0,z.P1)("selectRepoStats",(e=>{if(e&&e.repoSize)return e.repoSize.toString()})),ls.selectRepoNumObjects=(0,z.P1)("selectRepoStats",(e=>{if(e&&e.numObjects)return e.numObjects.toString()})),ls.reactRepoStatsFetch=(0,z.P1)("selectRepoStatsShouldUpdate","selectIpfsReady",((e,t)=>{if(e&&t)return{actionCreator:"doFetchRepoStats"}}));const cs=ls;var fs=n(69497),ds=n(34585);const hs=/webui[-.]ipfs/,ps=/(?:localhost|127.0.0.1)/,gs=/ipfs/;function ys(e){if("function"===typeof e)return!0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])throw new TypeError("Expected a function");return!1}function ms(e){if("number"===typeof e)return!0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])throw new TypeError("Expected a number");return!1}const vs=Di.D(["DESKTOP_SETTING_TOGGLE"]),bs=Di.D(["ANALYTICS_ENABLED","ANALYTICS_DISABLED","ANALYTICS_ADD_CONSENT","ANALYTICS_REMOVE_CONSENT","SET_SHOW_ANALYTICS_BANNER"]),ws=[$.aO.IPFS_INIT,Fi.CONFIG_SAVE,ds.aO.MAKE_DIR,ds.aO.WRITE,ds.aO.ADD_BY_PATH,ds.aO.MOVE,ds.aO.DELETE,ds.aO.DOWNLOAD_LINK,Hi.EXPERIMENTS_TOGGLE,vs.DESKTOP_SETTING_TOGGLE];async function Es(){var e;if(null!==(e=zi().ipfsDesktop)&&void 0!==e&&e.countlyAppKey)return zi().ipfsDesktop.countlyAppKey;return"kubo"===await async function(){const{origin:e}=globalThis.location;if(hs.test(e))return ps.test(e)?"local":"webui.ipfs";try{const e=await fetch("/webui",{method:"HEAD"}),{pathname:t}=new URL(e.url);if(e.redirected&&gs.test(t))return"kubo"}catch{}return ps.test(e)?"local":"webui.ipfs"}()?"c4524cc93fed92a5838d4ea27c5a65526b4e7558":"8fa213e6049bff23b08e5f5fbac89e7c27397612"}const As={all:["sessions","events","views","location","crashes"],safe:["sessions","events","views","location"]};function Ss(e,t){zi().Countly.q.push(["add_consent",e]),t.selectIsIpfsDesktop()&&t.doDesktopAddConsent(e)}function Cs(e,t){zi().Countly.q.push(["remove_consent",e]),t.selectIsIpfsDesktop()&&t.doDesktopRemoveConsent(e)}function Ts(e){let{id:t,duration:n}=e;zi().Countly.q.push(["add_event",{key:t,count:1,dur:n}])}const ks=new Map([["IPFS_INIT_FAILED",((e,t)=>(ys(e)&&ms(t),((e,t)=>{ys(e)&&ms(t);let n=0;return function(){if(n++,n>=t)return e(...arguments)}})((e=>{ys(e);let t,n=!1;return function(){return n||(t=e(...arguments),n=!0),t}})(e),t)))(Ts,5)]]);const xs={selectAnalytics:e=>e.analytics,selectAnalyticsConsent:e=>e.analytics.consent,selectAnalyticsEnabled:e=>e.analytics.consent.length>0,selectAnalyticsOptedOutPriorToDefaultOptIn:e=>!e.analytics.optedOut&&0===e.analytics.consent.length&&e.analytics.lastDisabledAt>e.analytics.lastEnabledAt,selectAnalyticsOptedOut:e=>e.analytics.optedOut,selectShowAnalyticsComponents:e=>e.analytics.showAnalyticsComponents,selectShowAnalyticsBanner:e=>e.analytics.showAnalyticsBanner,selectAnalyticsActionsToRecord:(0,z.P1)("selectIsIpfsDesktop","selectDesktopCountlyActions",((e,t)=>e?t.concat(ws).sort():Array.from(ws).sort()))},Is={doToggleAnalytics:()=>e=>{let{store:t}=e;!t.selectAnalyticsEnabled()?t.doEnableAnalytics():t.doDisableAnalytics()},doDisableAnalytics:()=>e=>{let{dispatch:t,store:n}=e;zi().Countly.opt_out(),Cs(As.all,n),t({type:"ANALYTICS_DISABLED",payload:{consent:[]}})},doEnableAnalytics:()=>e=>{let{dispatch:t,store:n}=e;Cs(As.all,n),zi().Countly.opt_in(),Ss(As.safe,n),t({type:"ANALYTICS_ENABLED",payload:{consent:As.safe}})},doToggleConsent:e=>t=>{let{store:n}=t;n.selectAnalyticsConsent().includes(e)?n.doRemoveConsent(e):n.doAddConsent(e)},doRemoveConsent:e=>t=>{let{dispatch:n,store:r}=t;0===r.selectAnalyticsConsent().filter((t=>t!==e)).length&&zi().Countly.opt_out(),Cs(e,r),n({type:"ANALYTICS_REMOVE_CONSENT",payload:{name:e}})},doAddConsent:e=>t=>{let{dispatch:n,store:r}=t;0===r.selectAnalyticsConsent().length&&zi().Countly.opt_in(),Ss(e,r),n({type:"ANALYTICS_ADD_CONSENT",payload:{name:e}})},doToggleShowAnalyticsBanner:e=>t=>{let{dispatch:n}=t;n({type:"SET_SHOW_ANALYTICS_BANNER",payload:{shouldShow:e}})}},_s=e=>{switch(e.type){case ds.aO.MAKE_DIR:case ds.aO.WRITE:case ds.aO.ADD_BY_PATH:case ds.aO.MOVE:case ds.aO.DELETE:case ds.aO.DOWNLOAD_LINK:case $.aO.IPFS_INIT:case Fi.CONFIG_SAVE:return Os(e.task,e.type);case Hi.EXPERIMENTS_TOGGLE:return Ns(e.task,"EXPERIMENTS");case vs.DESKTOP_SETTING_TOGGLE:return Ns(e.task,"DESKTOP_SETTING");default:return null}},Os=(e,t)=>{if("Exit"===e.status){const{duration:n,result:r}=e;return{id:r.ok?t:`${t}_FAILED`,duration:n,error:r.ok?null:r.error}}return null},Ns=(e,t)=>{if("Exit"===e.status){const{result:n,duration:r}=e,{key:o}=n.ok?n.value:n.error,i=n.ok?null:n.error,s=n.ok?n.value.value?"ENABLED":"DISABLED":"FAILED";return{id:`${t}_${fs.constantCase(o)}_${s}`,duration:r,error:i}}return null},Ps=e=>{let{countlyUrl:t="https://countly.ipfs.tech",appVersion:r="4.3.1",appGitRevision:o="f8ac305",debug:i=!1}=e;return{name:"analytics",persistActions:[bs.ANALYTICS_ENABLED,bs.ANALYTICS_DISABLED,bs.ANALYTICS_DISABLED,bs.ANALYTICS_ADD_CONSENT,bs.ANALYTICS_REMOVE_CONSENT,bs.SET_SHOW_ANALYTICS_BANNER],init:async e=>{zi().Countly||(zi().Countly={},zi().Countly.q=[],await n.e(739).then(n.t.bind(n,33739,23)));const o=zi().Countly;o.require_consent=!0,o.url=t;const s=Es();if(s.then((e=>{o.app_key=e})),o.app_version=r,o.debug=i,e.selectIsIpfsDesktop()&&(o.app_version=e.selectDesktopVersion(),o.q.push(["change_id",e.selectDesktopCountlyDeviceId(),!0])),o.q.push(["track_sessions"]),o.q.push(["track_errors"]),e.selectAnalyticsEnabled()){Ss(e.selectAnalyticsConsent(),e)}else e.selectAnalyticsOptedOut()||(e.selectAnalyticsOptedOutPriorToDefaultOptIn()&&e.doToggleShowAnalyticsBanner(!0),e.doEnableAnalytics());e.subscribeToSelectors(["selectRouteInfo"],(e=>{let{routeInfo:t}=e;zi().location&&zi().location.hash&&zi().Countly.q.push(["track_pageview",t.pattern])})),"function"===typeof o.init&&(await s,o.init())},getMiddleware:()=>()=>e=>t=>{const n=_s(t);if(n){const{id:e,duration:r,error:o}=n;!function(e){let{id:t,duration:n}=e;const r=ks.get(t);r?r({id:t,duration:n}):Ts({id:t,duration:n})}({id:e,duration:r}),o&&(zi().Countly.q.push(["add_log",t.type]),zi().Countly.q.push(["log_error",o]))}return e(t)},reducer:(e,t)=>{switch(e=e||{lastEnabledAt:0,lastDisabledAt:0,showAnalyticsComponents:!1,showAnalyticsBanner:!1,optedOut:true,consent:[]},t.type){case bs.ANALYTICS_ENABLED:return{...e,lastEnabledAt:Date.now(),consent:t.payload.consent,optedOut:!1};case bs.ANALYTICS_DISABLED:return{...e,lastDisabledAt:Date.now(),consent:t.payload.consent,optedOut:!0,showAnalyticsBanner:!1};case bs.ANALYTICS_ADD_CONSENT:{const n=e.consent.filter((e=>e!==t.payload.name)).concat(t.payload.name);return{...e,lastEnabledAt:Date.now(),consent:n,optedOut:!1}}case bs.ANALYTICS_REMOVE_CONSENT:{const n=e.consent.filter((e=>e!==t.payload.name)),r=0===n.length?Date.now():e.lastDisabledAt,o=0===n.length;return{...e,lastDisabledAt:r,consent:n,optedOut:o,showAnalyticsBanner:!1}}case bs.SET_SHOW_ANALYTICS_BANNER:{var n;const r=(null===(n=t.payload)||void 0===n?void 0:n.shouldShow)||!1;return{...e,showAnalyticsBanner:r}}default:return e.consent?e:e.lastEnabledAt>e.lastDisabledAt?{...e,consent:As.safe}:{...e,consent:[]}}},...xs,...Is}},Ds=(0,z.Jc)({name:"cliTutorMode",actionBaseType:"CLI_TUTOR_MODE_TOGGLE",persist:!0,checkIfOnline:!1,getPromise:()=>{}});Ds.reactIsCliTutorModeEnabled=(0,z.P1)("selectIsCliTutorModeEnabled",(e=>{const t=Boolean(JSON.parse(localStorage.getItem("isCliTutorModeEnabled")));void 0!==e&&e!==t&&localStorage.setItem("isCliTutorModeEnabled",e)})),Ds.selectIsCliTutorModeEnabled=e=>e.cliTutorMode.isCliTutorModeEnabled,Ds.selectIsCliTutorModalOpen=e=>!!e.cliTutorMode.showCliTutorModal,Ds.selectCliOptions=e=>e.cliTutorMode.cliOptions,Ds.reducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"CLI_TUTOR_MODE_TOGGLE"===t.type?{...e,isCliTutorModeEnabled:t.payload}:"CLI_TUTOR_MODAL_ENABLE"===t.type?{...e,showCliTutorModal:t.payload}:"CLI_OPTIONS"===t.type?{...e,cliOptions:t.payload}:e},Ds.doToggleCliTutorMode=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODE_TOGGLE",payload:e})},Ds.doSetCliOptions=e=>t=>{let{dispatch:n}=t;n({type:"CLI_OPTIONS",payload:e})},Ds.doOpenCliTutorModal=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODAL_ENABLE",payload:e})},Ds.doOpenCliTutorModal=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODAL_ENABLE",payload:e})},Ds.init=e=>{const t=Boolean(JSON.parse(localStorage.getItem("isCliTutorModeEnabled")));return e.doToggleCliTutorMode(t)};const Bs=Ds;var Rs=n(72672);const Ls={name:"ipns",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keys:[],expectedPublishTime:(0,qo.g)("expectedPublishTime")||60},t=arguments.length>1?arguments[1]:void 0;return"CACHE_IPNS_KEYS"===t.type?{...e,keys:t.payload}:"SET_EXPECTED_PUBLISH_TIME"===t.type?{...e,expectedPublishTime:t.payload}:e},selectIpnsKeys:e=>e.ipns.keys||[],selectExpectedPublishTime:e=>e.ipns.expectedPublishTime,doFetchIpnsKeys:()=>async e=>{let{getIpfs:t,dispatch:n}=e;const r=t(),o=await r.key.list(),i=[];for(const{id:s,name:a}of o){const e=(await Wo()(r.name.resolve(`/ipns/${s}`,{offline:!0}))).length>0;i.push({id:s,name:a,published:e})}n({type:"CACHE_IPNS_KEYS",payload:i})},doGenerateIpnsKey:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.key.gen(e),r.doFetchIpnsKeys()},doRemoveIpnsKey:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.key.rm(e),r.doFetchIpnsKeys()},doRenameIpnsKey:(e,t)=>async n=>{let{getIpfs:r,store:o}=n;const i=r();await i.key.rename(e,t),o.doFetchIpnsKeys()},doPublishIpnsKey:(e,t)=>async n=>{let{getIpfs:r,store:o}=n;const i=r();await i.name.publish(e,{key:t})},doUpdateExpectedPublishTime:e=>async t=>{let{store:n,dispatch:r}=t;const o=n.selectExpectedPublishTime(),i=Math.floor((1.5*e+o)/2);await(0,qo.D)("expectedPublishTime",i),r({type:"SET_EXPECTED_PUBLISH_TIME",payload:i})}},Fs=Ls,Ms=(0,z.pY)((0,z.qF)({cacheFn:rs.set}),Z({idleTimeout:5e3}),$.ZP,H.b0,ns,bi,wi,$i,(0,Ei.ZP)(),(0,H.py)(),Pi,Ui,Rs.ZP,Q,W(),oe,Ho(),ri,Ji,Xi,es,Ki,us,cs,Bs,Ps({}),Fs);var Us=n(32821),js=n(60348);function zs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hs(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Vs=0,Gs=(0,e.memo)((function(t){var n=t.children,r=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ws(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=t;o[Zs]||(o[Zs]=(0,js.W)(e,t,n,r));return o[Zs]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(Hs(t,["children"])),o=zs(r,2),i=o[0],s=o[1];return e.useEffect((function(){return s&&Vs++,function(){s&&(0===--Vs&&(Ws()[Zs]=null))}}),[]),e.createElement(js.L.Provider,{value:i},n)}));Gs.displayName="DndProvider";var Zs=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function Ws(){return"undefined"!==typeof n.g?n.g:window}var qs=n(52354);function Ks(e){var t=null;return function(){return null==t&&(t=e()),t}}function Ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Js=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var o=[];return n.forEach((function(e){return o.push(e)})),o}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}],n&&Ys(t.prototype,n),r&&Ys(t,r),e}(),Xs=Ks((function(){return/firefox/i.test(navigator.userAgent)})),Qs=Ks((function(){return Boolean(window.safari)}));function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ta,na=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,o=[],i=0;i<r;i++)o.push(i);o.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var s,a,u=[],l=[],c=[],f=0;f<r-1;f++)s=t[f+1]-t[f],a=n[f+1]-n[f],l.push(s),u.push(a),c.push(a/s);for(var d=[c[0]],h=0;h<l.length-1;h++){var p=c[h],g=c[h+1];if(p*g<=0)d.push(0);else{s=l[h];var y=l[h+1],m=s+y;d.push(3*m/((m+y)/p+(m+s)/g))}}d.push(c[c.length-1]);for(var v,b=[],w=[],E=0;E<d.length-1;E++){v=c[E];var A=d[E],S=1/l[E],C=A+d[E+1]-v-v;b.push((v-A-C)*S),w.push(C*S*S)}this.xs=t,this.ys=n,this.c1s=d,this.c2s=b,this.c3s=w}var t,n,r;return t=e,n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,o=this.c2s,i=this.c3s,s=t.length-1;if(e===t[s])return n[s];for(var a,u=0,l=i.length-1;u<=l;){var c=t[a=Math.floor(.5*(u+l))];if(c<e)u=a+1;else{if(!(c>e))return n[a];l=a-1}}var f=e-t[s=Math.max(0,l)],d=f*f;return n[s]+r[s]*f+o[s]*d+i[s]*f*d}}],n&&ea(t.prototype,n),r&&ea(t,r),e}(),ra=1;function oa(e){var t=e.nodeType===ra?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function ia(e){return{x:e.clientX,y:e.clientY}}function sa(e,t,n,r,o){var i=function(e){var t;return"IMG"===e.nodeName&&(Xs()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),s=oa(i?e:t),a={x:n.x-s.x,y:n.y-s.y},u=e.offsetWidth,l=e.offsetHeight,c=r.anchorX,f=r.anchorY,d=function(e,t,n,r){var o=e?t.width:n,i=e?t.height:r;return Qs()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}(i,t,u,l),h=d.dragPreviewWidth,p=d.dragPreviewHeight,g=o.offsetX,y=o.offsetY,m=0===y||y;return{x:0===g||g?g:new na([0,.5,1],[a.x,a.x/u*h,a.x+h-u]).interpolate(c),y:m?y:function(){var e=new na([0,.5,1],[a.y,a.y/l*p,a.y+p-l]).interpolate(f);return Qs()&&i&&(e+=(window.devicePixelRatio-1)*p),e}()}}function aa(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var la=(ua(ta={},c.FILE,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),ua(ta,c.URL,{exposeProperties:{urls:function(e,t){return aa(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),ua(ta,c.TEXT,{exposeProperties:{text:function(e,t){return aa(e,t,"")}},matchesTypes:["Text","text/plain"]}),ta);function ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&ca(t.prototype,n),r&&ca(t,r),e}();function da(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(la).filter((function(e){return la[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&ha(t.prototype,n),r&&ha(t,r),e}();function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){ma(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ba=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){var t=r.sourceNodes.get(e);return t&&oa(t)||null},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return Boolean(e&&r.document&&r.document.body&&document.body.contains(e))},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=ia(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var o=e.dataTransfer,i=da(o);if(r.monitor.isDragging()){if(o&&"function"===typeof o.setDragImage){var s=r.monitor.getSourceId(),a=r.sourceNodes.get(s),u=r.sourcePreviewNodes.get(s)||a;if(u){var l=r.getCurrentSourcePreviewNodeOptions(),c=sa(a,u,n,{anchorX:l.anchorX,anchorY:l.anchorY},{offsetX:l.offsetX,offsetY:l.offsetY});o.setDragImage(u,c.x,c.y)}}try{null===o||void 0===o||o.setData("application/json",{})}catch(f){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(i)r.beginDragNativeItem(i);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=da(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,Xs()||r.actions.hover(t,{clientOffset:ia(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:ia(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){var t;(r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem())&&(null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:ia(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new pa(n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Js(this.isNodeInDocument)}var t,n,r;return t=e,(n=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var o=function(t){return r.handleDragStart(t,e)},i=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",i),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},i=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",o),t.addEventListener("drop",i),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",o),t.removeEventListener("drop",i)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return ya({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return ya({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(c).some((function(t){return c[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new fa(la[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}])&&va(t.prototype,n),r&&va(t,r),e}();const wa=e=>{const t=function(e,t){return new ba(e,t)}(e),n=t.handleTopDropCapture;return t.handleTopDropCapture=e=>{if(n.call(t,e),t.currentNativeSource&&e.dataTransfer.items){if([...e.dataTransfer.items].every((e=>{let{kind:t}=e;return"string"===t})))return;const n=(0,qs.getFilesFromDataTransferItems)(e.dataTransfer.items);t.currentNativeSource.item.filesPromise=n}},t};console.log("IPFS Web UI - v4.3.1 - https://github.com/ipfs-shipyard/ipfs-webui/commit/f8ac305"),async function(){const n=await rs.getAll(),o=Ms(n);t.render(e.createElement(r.z,{store:o},e.createElement(a.a3,{i18n:Us.Z},e.createElement(Gs,{backend:wa},e.createElement(j,null)))),document.getElementById("root"))}()})()})();
//# sourceMappingURL=main.67b3e2a2.js.map